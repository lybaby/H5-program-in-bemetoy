/*! m2.bemetoy.com 29-12-2015 */
var Zepto=function(){function a(a){return null==a?String(a):U[V.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&Object.getPrototypeOf(a)==Object.prototype}function g(a){return"number"==typeof a.length}function h(a){return D.call(a,function(a){return null!=a})}function i(a){return a.length>0?x.fn.concat.apply([],a):a}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||H[j(a)]?b:b+"px"}function m(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function n(a){return"children"in a?C.call(a.children):x.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function o(a,b,c){for(w in b)c&&(f(b[w])||Z(b[w]))?(f(b[w])&&!f(a[w])&&(a[w]={}),Z(b[w])&&!Z(a[w])&&(a[w]=[]),o(a[w],b[w],c)):b[w]!==v&&(a[w]=b[w])}function p(a,b){return null==b?x(a):x(a).filter(b)}function q(a,c,d,e){return b(c)?c.call(a,d,e):c}function r(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function s(a,b){var c=a.className||"",d=c&&c.baseVal!==v;return b===v?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function t(a){try{return a?"true"==a||("false"==a?!1:"null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?x.parseJSON(a):a):a}catch(b){return a}}function u(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)u(a.childNodes[c],b)}var v,w,x,y,z,A,B=[],C=B.slice,D=B.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},z=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},A=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.fragment=function(a,b,c){var d,e,g;return J.test(a)&&(d=x(E.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(K,"<$1></$2>")),b===v&&(b=I.test(a)&&RegExp.$1),b in R||(b="*"),g=R[b],g.innerHTML=""+a,d=x.each(C.call(g.childNodes),function(){g.removeChild(this)})),f(c)&&(e=x(d),x.each(c,function(a,b){N.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},W.Z=function(a,b){return a=a||[],a.__proto__=x.fn,a.selector=b||"",a},W.isZ=function(a){return a instanceof W.Z},W.init=function(a,c){var d;if(!a)return W.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&I.test(a))d=W.fragment(a,RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}else{if(b(a))return x(E).ready(a);if(W.isZ(a))return a;if(Z(a))d=h(a);else if(e(a))d=[a],a=null;else if(I.test(a))d=W.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}}return W.Z(d,a)},x=function(a,b){return W.init(a,b)},x.extend=function(a){var b,c=C.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){o(a,c,b)}),a},W.qsa=function(a,b){var c,e="#"==b[0],f=!e&&"."==b[0],g=e||f?b.slice(1):b,h=T.test(g);return d(a)&&h&&e?(c=a.getElementById(g))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:C.call(h&&!e?f?a.getElementsByClassName(g):a.getElementsByTagName(b):a.querySelectorAll(b))},x.contains=E.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},x.type=a,x.isFunction=b,x.isWindow=c,x.isArray=Z,x.isPlainObject=f,x.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},x.inArray=function(a,b,c){return B.indexOf.call(b,a,c)},x.camelCase=z,x.trim=function(a){return null==a?"":String.prototype.trim.call(a)},x.uuid=0,x.support={},x.expr={},x.map=function(a,b){var c,d,e,f=[];if(g(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return i(f)},x.each=function(a,b){var c,d;if(g(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},x.grep=function(a,b){return D.call(a,b)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),x.fn={forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,indexOf:B.indexOf,concat:B.concat,map:function(a){return x(x.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return x(C.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(x):E.addEventListener("DOMContentLoaded",function(){a(x)},!1),this},get:function(a){return a===v?C.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return B.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):x(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return x(A(this.concat(x(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==v)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):g(a)&&b(a.item)?C.call(a):x(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return x(c)},has:function(a){return this.filter(function(){return e(a)?x.contains(this,a):x(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:x(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:x(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?x(a).filter(function(){var a=this;return B.some.call(c,function(b){return x.contains(b,a)})}):1==this.length?x(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)}):x()},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=x(a));c&&!(e?e.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return x(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=x.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return p(b,a)},parent:function(a){return p(A(this.pluck("parentNode")),a)},children:function(a){return p(this.map(function(){return n(this)}),a)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(a){return p(this.map(function(a,b){return D.call(n(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return x.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=m(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=x(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){x(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){x(this[0]).before(a=x(a));for(var b;(b=a.children()).length;)a=b.first();x(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=x(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=x(this);(a===v?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return x(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return x(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(b){var c=this.innerHTML;x(this).empty().append(q(this,a,b,c))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=q(this,a,b,this.textContent);this.textContent=null==c?"":""+c}):0 in this?this[0].textContent:null},attr:function(a,b){var c;return"string"!=typeof a||1 in arguments?this.each(function(c){if(1===this.nodeType)if(e(a))for(w in a)r(this,w,a[w]);else r(this,a,q(this,b,c,this.getAttribute(a)))}):this.length&&1===this[0].nodeType?!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:v},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){r(this,a)},this)})},prop:function(a,b){return a=Y[a]||a,1 in arguments?this.each(function(c){this[a]=q(this,b,c,this[a])}):this[0]&&this[0][a]},data:function(a,b){var c="data-"+a.replace(M,"-$1").toLowerCase(),d=1 in arguments?this.attr(c,b):this.attr(c);return null!==d?t(d):v},val:function(a){return 0 in arguments?this.each(function(b){this.value=q(this,a,b,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var c=x(this),d=q(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2){var d,e=this[0];if(!e)return;if(d=getComputedStyle(e,""),"string"==typeof b)return e.style[z(b)]||d.getPropertyValue(b);if(Z(b)){var f={};return x.each(b,function(a,b){f[b]=e.style[z(b)]||d.getPropertyValue(b)}),f}}var g="";if("string"==a(b))c||0===c?g=j(b)+":"+l(b,c):this.each(function(){this.style.removeProperty(j(b))});else for(w in b)b[w]||0===b[w]?g+=j(w)+":"+l(w,b[w])+";":this.each(function(){this.style.removeProperty(j(w))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(x(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?B.some.call(this,function(a){return this.test(s(a))},k(a)):!1},addClass:function(a){return a?this.each(function(b){if("className"in this){y=[];var c=s(this),d=q(this,a,b,c);d.split(/\s+/g).forEach(function(a){x(this).hasClass(a)||y.push(a)},this),y.length&&s(this,c+(c?" ":"")+y.join(" "))}}):this},removeClass:function(a){return this.each(function(b){if("className"in this){if(a===v)return s(this,"");y=s(this),q(this,a,b,y).split(/\s+/g).forEach(function(a){y=y.replace(k(a)," ")}),s(this,y.trim())}})},toggleClass:function(a,b){return a?this.each(function(c){var d=x(this),e=q(this,a,c,s(this));e.split(/\s+/g).forEach(function(a){(b===v?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===v?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===v?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(x(a).css("margin-top"))||0,c.left-=parseFloat(x(a).css("margin-left"))||0,d.top+=parseFloat(x(b[0]).css("border-top-width"))||0,d.left+=parseFloat(x(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==x(a).css("position");)a=a.offsetParent;return a})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});x.fn[a]=function(e){var f,g=this[0];return e===v?c(g)?g["inner"+b]:d(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=x(this),g.css(a,q(this,e,b,g[a]()))})}}),O.forEach(function(b,c){var d=c%2;x.fn[b]=function(){var b,e,f=x.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var h=x.contains(E.documentElement,e);f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return x(a).remove();e.insertBefore(a,b),h&&u(a,function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},x.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return x(a)[b](this),this}}),W.Z.prototype=x.fn,W.uniq=A,W.deserializeValue=t,x.zepto=W,x}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return a&&(!c.e||a.e==c.e)&&(!c.ns||h.test(a.ns))&&(!f||b(a.fn)===b(f))&&(!g||a.sel==g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){var e=2 in arguments&&n.call(arguments,2);if(o(c)){var f=function(){return c.apply(d,e?e.concat(n.call(arguments)):arguments)};return f._zid=b(c),f}if(p(d))return e?(e.unshift(c[d],c),a.proxy.apply(null,e)):a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(o(d)||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){b.type in t&&"function"==typeof this[b.type]?this[b.type]():"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return 0 in arguments?this.bind(b,a):this.trigger(b)}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/,z=s.createElement("a");z.href=window.location.href,a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c,e=a.extend({},b||{}),i=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===e[p]&&(e[p]=a.ajaxSettings[p]);d(e),e.crossDomain||(c=s.createElement("a"),c.href=e.url,c.href=c.href,e.crossDomain=z.protocol+"//"+z.host!=c.protocol+"//"+c.host),e.url||(e.url=window.location.toString()),m(e);var n=e.dataType,o=/\?.+=\?/.test(e.url);if(o&&(n="jsonp"),e.cache!==!1&&(b&&b.cache===!0||"script"!=n&&"jsonp"!=n)||(e.url=l(e.url,"_="+Date.now())),"jsonp"==n)return o||(e.url=l(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),a.ajaxJSONP(e,i);var r,t=e.accepts[n],u={},v=function(a,b){u[a.toLowerCase()]=[a,b]},w=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,x=e.xhr(),A=x.setRequestHeader;if(i&&i.promise(x),e.crossDomain||v("X-Requested-With","XMLHttpRequest"),v("Accept",t||"*/*"),(t=e.mimeType||t)&&(t.indexOf(",")>-1&&(t=t.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(t)),(e.contentType||e.contentType!==!1&&e.data&&"GET"!=e.type.toUpperCase())&&v("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(q in e.headers)v(q,e.headers[q]);x.setRequestHeader=v;var B="async"in e?e.async:!0;if(x.open(e.type,e.url,B,e.username,e.password),x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=j,clearTimeout(r);var b,c=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==w){n=n||k(e.mimeType||x.getResponseHeader("content-type")),b=x.responseText;try{"script"==n?(1,eval)(b):"xml"==n?b=x.responseXML:"json"==n&&(b=y.test(b)?null:a.parseJSON(b))}catch(d){c=d}c?h(c,"parsererror",x,e,i):g(b,x,e,i)}else h(x.statusText||null,x.status?"error":"abort",x,e,i)}},f(x,e)===!1)return x.abort(),h(null,"abort",x,e,i),x;if(e.xhrFields)for(q in e.xhrFields)x[q]=e.xhrFields[q];for(q in u)A.apply(x,u[q]);return e.timeout>0&&(r=setTimeout(function(){x.onreadystatechange=j,x.abort(),h(null,"timeout",x,e,i)},e.timeout)),x.send(e.data?e.data:null),x},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var A=encodeURIComponent;a.param=function(b,c){var d=[];return d.add=function(b,c){a.isFunction(c)&&(c=c()),null==c&&(c=""),this.push(A(b)+"="+A(c))},o(d,b,c),d.join("&").replace(/%20/g,"+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c,d=[],e=function(a){return a.forEach?a.forEach(e):void d.push({name:b,value:a})};return this[0]&&a.each(this[0].elements,function(d,f){c=f.type,b=f.name,b&&"fieldset"!=f.nodeName.toLowerCase()&&!f.disabled&&"submit"!=c&&"reset"!=c&&"button"!=c&&"file"!=c&&("radio"!=c&&"checkbox"!=c||f.checked)&&e(a(f).val())}),d},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(0 in arguments)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(a){"__proto__"in{}||a.extend(a.zepto,{Z:function(b,c){return b=b||[],a.extend(b,a.fn),b.selector=c||"",b.__Z=!0,b},isZ:function(b){return"array"===a.type(b)&&"__Z"in b}});try{getComputedStyle(void 0)}catch(b){var c=getComputedStyle;window.getComputedStyle=function(a){try{return c(a)}catch(b){return null}}}}(Zepto);

/*
 RequireJS 2.1.18 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var requirejs,require,define;
(function(ba){function G(b){return"[object Function]"===K.call(b)}function H(b){return"[object Array]"===K.call(b)}function v(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1);}}function T(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));d-=1);}}function t(b,c){return fa.call(b,c)}function m(b,c){return t(b,c)&&b[c]}function B(b,c){for(var d in b)if(t(b,d)&&c(b[d],d))break}function U(b,c,d,e){c&&B(c,function(c,g){if(d||!t(b,g))e&&"object"===typeof c&&c&&!H(c)&&!G(c)&&!(c instanceof
RegExp)?(b[g]||(b[g]={}),U(b[g],c,d,e)):b[g]=c});return b}function u(b,c){return function(){return c.apply(b,arguments)}}function ca(b){throw b;}function da(b){if(!b)return b;var c=ba;v(b.split("."),function(b){c=c[b]});return c}function C(b,c,d,e){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=e;d&&(c.originalError=d);return c}function ga(b){function c(a,k,b){var f,l,c,d,e,g,i,p,k=k&&k.split("/"),h=j.map,n=h&&h["*"];if(a){a=a.split("/");l=a.length-1;j.nodeIdCompat&&
Q.test(a[l])&&(a[l]=a[l].replace(Q,""));"."===a[0].charAt(0)&&k&&(l=k.slice(0,k.length-1),a=l.concat(a));l=a;for(c=0;c<l.length;c++)if(d=l[c],"."===d)l.splice(c,1),c-=1;else if(".."===d&&!(0===c||1===c&&".."===l[2]||".."===l[c-1])&&0<c)l.splice(c-1,2),c-=2;a=a.join("/")}if(b&&h&&(k||n)){l=a.split("/");c=l.length;a:for(;0<c;c-=1){e=l.slice(0,c).join("/");if(k)for(d=k.length;0<d;d-=1)if(b=m(h,k.slice(0,d).join("/")))if(b=m(b,e)){f=b;g=c;break a}!i&&(n&&m(n,e))&&(i=m(n,e),p=c)}!f&&i&&(f=i,g=p);f&&(l.splice(0,
g,f),a=l.join("/"))}return(f=m(j.pkgs,a))?f:a}function d(a){z&&v(document.getElementsByTagName("script"),function(k){if(k.getAttribute("data-requiremodule")===a&&k.getAttribute("data-requirecontext")===i.contextName)return k.parentNode.removeChild(k),!0})}function e(a){var k=m(j.paths,a);if(k&&H(k)&&1<k.length)return k.shift(),i.require.undef(a),i.makeRequire(null,{skipMap:!0})([a]),!0}function n(a){var k,c=a?a.indexOf("!"):-1;-1<c&&(k=a.substring(0,c),a=a.substring(c+1,a.length));return[k,a]}function p(a,
k,b,f){var l,d,e=null,g=k?k.name:null,j=a,p=!0,h="";a||(p=!1,a="_@r"+(K+=1));a=n(a);e=a[0];a=a[1];e&&(e=c(e,g,f),d=m(r,e));a&&(e?h=d&&d.normalize?d.normalize(a,function(a){return c(a,g,f)}):-1===a.indexOf("!")?c(a,g,f):a:(h=c(a,g,f),a=n(h),e=a[0],h=a[1],b=!0,l=i.nameToUrl(h)));b=e&&!d&&!b?"_unnormalized"+(O+=1):"";return{prefix:e,name:h,parentMap:k,unnormalized:!!b,url:l,originalName:j,isDefine:p,id:(e?e+"!"+h:h)+b}}function s(a){var k=a.id,b=m(h,k);b||(b=h[k]=new i.Module(a));return b}function q(a,
k,b){var f=a.id,c=m(h,f);if(t(r,f)&&(!c||c.defineEmitComplete))"defined"===k&&b(r[f]);else if(c=s(a),c.error&&"error"===k)b(c.error);else c.on(k,b)}function w(a,b){var c=a.requireModules,f=!1;if(b)b(a);else if(v(c,function(b){if(b=m(h,b))b.error=a,b.events.error&&(f=!0,b.emit("error",a))}),!f)g.onError(a)}function x(){R.length&&(ha.apply(A,[A.length,0].concat(R)),R=[])}function y(a){delete h[a];delete V[a]}function F(a,b,c){var f=a.map.id;a.error?a.emit("error",a.error):(b[f]=!0,v(a.depMaps,function(f,
d){var e=f.id,g=m(h,e);g&&(!a.depMatched[d]&&!c[e])&&(m(b,e)?(a.defineDep(d,r[e]),a.check()):F(g,b,c))}),c[f]=!0)}function D(){var a,b,c=(a=1E3*j.waitSeconds)&&i.startTime+a<(new Date).getTime(),f=[],l=[],g=!1,h=!0;if(!W){W=!0;B(V,function(a){var i=a.map,j=i.id;if(a.enabled&&(i.isDefine||l.push(a),!a.error))if(!a.inited&&c)e(j)?g=b=!0:(f.push(j),d(j));else if(!a.inited&&(a.fetched&&i.isDefine)&&(g=!0,!i.prefix))return h=!1});if(c&&f.length)return a=C("timeout","Load timeout for modules: "+f,null,
f),a.contextName=i.contextName,w(a);h&&v(l,function(a){F(a,{},{})});if((!c||b)&&g)if((z||ea)&&!X)X=setTimeout(function(){X=0;D()},50);W=!1}}function E(a){t(r,a[0])||s(p(a[0],null,!0)).init(a[1],a[2])}function I(a){var a=a.currentTarget||a.srcElement,b=i.onScriptLoad;a.detachEvent&&!Y?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=i.onScriptError;(!a.detachEvent||Y)&&a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function J(){var a;
for(x();A.length;){a=A.shift();if(null===a[0])return w(C("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));E(a)}}var W,Z,i,L,X,j={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},h={},V={},$={},A=[],r={},S={},aa={},K=1,O=1;L={require:function(a){return a.require?a.require:a.require=i.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports?r[a.map.id]=a.exports:a.exports=r[a.map.id]={}},module:function(a){return a.module?
a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return m(j.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}};Z=function(a){this.events=m($,a.id)||{};this.map=a;this.shim=m(j.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Z.prototype={init:function(a,b,c,f){f=f||{};if(!this.inited){this.factory=b;if(c)this.on("error",c);else this.events.error&&(c=u(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.errback=
c;this.inited=!0;this.ignore=f.ignore;f.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;i.startTime=(new Date).getTime();var a=this.map;if(this.shim)i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=
this.map.url;S[a]||(S[a]=!0,i.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var f=this.exports,l=this.factory;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(l)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{f=i.execCb(c,l,b,f)}catch(d){a=d}else f=i.execCb(c,l,b,f);this.map.isDefine&&void 0===f&&((b=this.module)?f=b.exports:this.usingExports&&
(f=this.exports));if(a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",w(this.error=a)}else f=l;this.exports=f;if(this.map.isDefine&&!this.ignore&&(r[c]=f,g.onResourceLoad))g.onResourceLoad(i,this.map,this.depMaps);y(c);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=
this.map,b=a.id,d=p(a.prefix);this.depMaps.push(d);q(d,"defined",u(this,function(f){var l,d;d=m(aa,this.map.id);var e=this.map.name,P=this.map.parentMap?this.map.parentMap.name:null,n=i.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(f.normalize&&(e=f.normalize(e,function(a){return c(a,P,!0)})||""),f=p(a.prefix+"!"+e,this.map.parentMap),q(f,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),d=m(h,f.id)){this.depMaps.push(f);
if(this.events.error)d.on("error",u(this,function(a){this.emit("error",a)}));d.enable()}}else d?(this.map.url=i.nameToUrl(d),this.load()):(l=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),l.error=u(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];B(h,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&y(a.map.id)});w(a)}),l.fromText=u(this,function(f,c){var d=a.name,e=p(d),P=M;c&&(f=c);P&&(M=!1);s(e);t(j.config,b)&&(j.config[d]=j.config[b]);try{g.exec(f)}catch(h){return w(C("fromtexteval",
"fromText eval for "+b+" failed: "+h,h,[b]))}P&&(M=!0);this.depMaps.push(e);i.completeLoad(d);n([d],l)}),f.load(a.name,n,l,j))}));i.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){V[this.map.id]=this;this.enabling=this.enabled=!0;v(this.depMaps,u(this,function(a,b){var c,f;if("string"===typeof a){a=p(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=m(L,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;q(a,"defined",u(this,function(a){this.undefed||
(this.defineDep(b,a),this.check())}));this.errback?q(a,"error",u(this,this.errback)):this.events.error&&q(a,"error",u(this,function(a){this.emit("error",a)}))}c=a.id;f=h[c];!t(L,c)&&(f&&!f.enabled)&&i.enable(a,this)}));B(this.pluginMaps,u(this,function(a){var b=m(h,a.id);b&&!b.enabled&&i.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){v(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};
i={config:j,contextName:b,registry:h,defined:r,urlFetched:S,defQueue:A,Module:Z,makeModuleMap:p,nextTick:g.nextTick,onError:w,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=j.shim,c={paths:!0,bundles:!0,config:!0,map:!0};B(a,function(a,b){c[b]?(j[b]||(j[b]={}),U(j[b],a,!0,!0)):j[b]=a});a.bundles&&B(a.bundles,function(a,b){v(a,function(a){a!==b&&(aa[a]=b)})});a.shim&&(B(a.shim,function(a,c){H(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn)a.exportsFn=
i.makeShimExports(a);b[c]=a}),j.shim=b);a.packages&&v(a.packages,function(a){var b,a="string"===typeof a?{name:a}:a;b=a.name;a.location&&(j.paths[b]=a.location);j.pkgs[b]=a.name+"/"+(a.main||"main").replace(ia,"").replace(Q,"")});B(h,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=p(b,null,!0))});if(a.deps||a.callback)i.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(ba,arguments));return b||a.exports&&da(a.exports)}},makeRequire:function(a,
e){function j(c,d,m){var n,q;e.enableBuildCallback&&(d&&G(d))&&(d.__requireJsBuild=!0);if("string"===typeof c){if(G(d))return w(C("requireargs","Invalid require call"),m);if(a&&t(L,c))return L[c](h[a.id]);if(g.get)return g.get(i,c,a,j);n=p(c,a,!1,!0);n=n.id;return!t(r,n)?w(C("notloaded",'Module name "'+n+'" has not been loaded yet for context: '+b+(a?"":". Use require([])"))):r[n]}J();i.nextTick(function(){J();q=s(p(null,a));q.skipMap=e.skipMap;q.init(c,d,m,{enabled:!0});D()});return j}e=e||{};U(j,
{isBrowser:z,toUrl:function(b){var d,e=b.lastIndexOf("."),k=b.split("/")[0];if(-1!==e&&(!("."===k||".."===k)||1<e))d=b.substring(e,b.length),b=b.substring(0,e);return i.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return t(r,p(b,a,!1,!0).id)},specified:function(b){b=p(b,a,!1,!0).id;return t(r,b)||t(h,b)}});a||(j.undef=function(b){x();var c=p(b,a,!0),e=m(h,b);e.undefed=!0;d(b);delete r[b];delete S[c.url];delete $[b];T(A,function(a,c){a[0]===b&&A.splice(c,1)});e&&(e.events.defined&&($[b]=e.events),
y(b))});return j},enable:function(a){m(h,a.id)&&s(a).enable()},completeLoad:function(a){var b,c,d=m(j.shim,a)||{},g=d.exports;for(x();A.length;){c=A.shift();if(null===c[0]){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);E(c)}c=m(h,a);if(!b&&!t(r,a)&&c&&!c.inited){if(j.enforceDefine&&(!g||!da(g)))return e(a)?void 0:w(C("nodefine","No define call for "+a,null,[a]));E([a,d.deps||[],d.exportsFn])}D()},nameToUrl:function(a,b,c){var d,e,h;(d=m(j.pkgs,a))&&(a=d);if(d=m(aa,a))return i.nameToUrl(d,b,c);if(g.jsExtRegExp.test(a))d=
a+(b||"");else{d=j.paths;a=a.split("/");for(e=a.length;0<e;e-=1)if(h=a.slice(0,e).join("/"),h=m(d,h)){H(h)&&(h=h[0]);a.splice(0,e,h);break}d=a.join("/");d+=b||(/^data\:|\?/.test(d)||c?"":".js");d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":j.baseUrl)+d}return j.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+j.urlArgs):d},load:function(a,b){g.load(i,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||ja.test((a.currentTarget||a.srcElement).readyState))N=null,
a=I(a),i.completeLoad(a.id)},onScriptError:function(a){var b=I(a);if(!e(b.id))return w(C("scripterror","Script error for: "+b.id,a,[b.id]))}};i.require=i.makeRequire();return i}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),ea=!z&&"undefined"!==
typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(G(requirejs))return;q=requirejs;requirejs=void 0}"undefined"!==typeof require&&!G(require)&&(q=require,require=void 0);g=requirejs=function(b,c,d,e){var n,p="_";!H(b)&&"string"!==typeof b&&(n=b,H(c)?(b=c,c=d,d=e):b=[]);n&&n.context&&(p=n.context);
(e=m(F,p))||(e=F[p]=g.s.newContext(p));n&&e.configure(n);return e.require(b,c,d)};g.config=function(b){return g(b)};g.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=g);g.version="2.1.18";g.jsExtRegExp=/^\/|:|\?|\.js$/;g.isBrowser=z;x=g.s={contexts:F,newContext:ga};g({});v(["toUrl","undef","defined","specified"],function(b){g[b]=function(){var c=F._;return c.require[b].apply(c,arguments)}});if(z&&(y=x.head=document.getElementsByTagName("head")[0],
D=document.getElementsByTagName("base")[0]))y=x.head=D.parentNode;g.onError=ca;g.createNode=function(b){var c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};g.load=function(b,c,d){var e=b&&b.config||{};if(z)return e=g.createNode(e,c,d),e.setAttribute("data-requirecontext",b.contextName),e.setAttribute("data-requiremodule",c),e.attachEvent&&!(e.attachEvent.toString&&
0>e.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,e.attachEvent("onreadystatechange",b.onScriptLoad)):(e.addEventListener("load",b.onScriptLoad,!1),e.addEventListener("error",b.onScriptError,!1)),e.src=d,J=e,D?y.insertBefore(e,D):y.appendChild(e),J=null,e;if(ea)try{importScripts(d),b.completeLoad(c)}catch(m){b.onError(C("importscripts","importScripts failed for "+c+" at "+d,m,[c]))}};z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(b){y||(y=b.parentNode);if(I=b.getAttribute("data-main"))return s=
I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0});define=function(b,c,d){var e,g;"string"!==typeof b&&(d=c,c=b,b=null);H(c)||(d=c,c=null);!c&&G(d)&&(c=[],d.length&&(d.toString().replace(ka,"").replace(la,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));if(M){if(!(e=J))N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),
function(b){if("interactive"===b.readyState)return N=b}),e=N;e&&(b||(b=e.getAttribute("data-requiremodule")),g=F[e.getAttribute("data-requirecontext")])}(g?g.defQueue:R).push([b,c,d])};define.amd={jQuery:!0};g.exec=function(b){return eval(b)};g(q)}})(this);


/*! m2.bemetoy.com 09-04-2016 */
!function(){"use strict";var a=window.BEME||{};a.APP_STATUS="online",a.APIURL="http://h5.bemetoy.com/app/m2",a.data={},a.userInfo={},a.urlList=new Array,a.scrollList=new Array,a._lastScroll=0,a._currentScroll=0,window.BEME=a;var b=location.pathname,c=b.lastIndexOf("/");b=b.substr(0,c).replace("/pages","");var d={baseUrl:b+"/static-src/js/",paths:{jplayer:"../../static/lib/jquery.jplayer.min",jweixin:"http://res.wx.qq.com/open/js/jweixin-1.0.0"},waitSeconds:6};"online"!=window.BEME.APP_STATUS&&(d.urlArgs="_t="+(new Date).getTime()),require.config(d);var e=document.documentElement;e.style.fontSize=e.clientWidth/7.5+"px"}(),window.Zepto&&define("zepto",[],function(){return window.Zepto}),window.console=window.console||{log:function(){}},window.BEME.initPage=function(a){"use strict";BEME.PAGENAME=a,require(["page/"+a],function(a){a.init();var b=document.documentElement;b.style.fontSize=b.clientWidth/7.5+"px",window.BEME.curPageInstance=a})},function(){var a={};a.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},a.invert=function(b){for(var c={},d=a.keys(b),e=0,f=d.length;f>e;e++)c[b[d[e]]]=d[e];return c},a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var b=/(.)^/,c={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},d=/\\|'|\r|\n|\u2028|\u2029/g,e=function(a){return"\\"+c[a]},f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g=a.invert(f),h=function(b){var c=function(a){return b[a]},d="(?:"+a.keys(b).join("|")+")",e=RegExp(d),f=RegExp(d,"g");return function(a){return a=null==a?"":""+a,e.test(a)?a.replace(f,c):a}};a.escape=h(f),a.unescape=h(g),a.template=function(c,f,g){g=$.extend({},g,a.templateSettings);var h=RegExp([(g.escape||b).source,(g.interpolate||b).source,(g.evaluate||b).source].join("|")+"|$","g"),i=0,j="__p+='";c.replace(h,function(a,b,f,g,h){return j+=c.slice(i,h).replace(d,e),i=h+a.length,b?j+="'+\n((__t=("+b+"))==null?'':_v.escape(__t))+\n'":f?j+="'+\n((__t=("+f+"))==null?'':__t)+\n'":g&&(j+="';\n"+g+"\n__p+='"),a}),j+="';\n",g.variable||(j="with(obj||{}){\n"+j+"}\n"),j="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+j+"return __p;\n";var k="";try{k=Function(g.variable||"obj","_v",j)}catch(l){throw l.source=j,l}if(f)return k(f,a);var m=function(b){return k.call(this,b,a)},n=g.variable||"obj";return m.source="function("+n+"){\n"+j+"}",m},BEME.template=a.template}(),function(a){function b(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){k=null,m.last&&(m.el.trigger("longTap"),m={})}function d(){k&&clearTimeout(k),k=null}function e(){h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),k&&clearTimeout(k),h=i=j=k=null,m={}}function f(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function g(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}var h,i,j,k,l,m={},n=750,o=!1;a(document).ready(function(){var p,q,r,s,t=0,u=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),a(document).bind("MSGestureEnd",function(a){var b=a.velocityX>1?"Right":a.velocityX<-1?"Left":a.velocityY>1?"Down":a.velocityY<-1?"Up":null;b&&(m.el.trigger("swipe"),m.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(b){(!(s=g(b,"down"))||f(b))&&(r=s?b:b.touches[0],b.touches&&1===b.touches.length&&m.x2&&(m.x2=void 0,m.y2=void 0),p=Date.now(),q=p-(m.last||p),m.el=a("tagName"in r.target?r.target:r.target.parentNode),h&&clearTimeout(h),m.x1=r.pageX,m.y1=r.pageY,q>0&&250>=q&&(m.isDoubleTap=!0),m.last=p,k=setTimeout(c,n),l&&s&&l.addPointer(b.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){(!(s=g(a,"move"))||f(a))&&(r=s?a:a.touches[0],d(),m.x2=r.pageX,m.y2=r.pageY,t+=Math.abs(m.x1-m.x2),u+=Math.abs(m.y1-m.y2))}).on("touchend MSPointerUp pointerup",function(c){if(!(s=g(c,"up"))||f(c)){if(d(),m.x2&&Math.abs(m.x1-m.x2)>30||m.y2&&Math.abs(m.y1-m.y2)>30){j=setTimeout(function(){m.el.trigger("swipe");var a=b(m.x1,m.x2,m.y1,m.y2);m.el.trigger("swipe"+a),m={}},0);var k=b(m.x1,m.x2,m.y1,m.y2);o&&o.call(this,c,k)}else"last"in m&&(30>t&&30>u?i=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=e,m.el.trigger(b),m.isDoubleTap?(m.el&&m.el.trigger("doubleTap"),m={}):h=setTimeout(function(){h=null,m.el&&m.el.trigger("singleTap"),m={}},250)},0):m={});t=u=0}}).on("touchcancel MSPointerCancel pointercancel",e),a(window).on("scroll",e)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.on(b,a)},a.fn.swipeAsyn=function(a){o=a}})}(Zepto),define("comm/clickevent",["comm/url","comm/pushsong","comm/request","helper/playerbar","helper/app","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h){"use strict";h.audition=function(a,b){var c=$(b).parent(),e=c.attr("sid"),f=$(".select-all").css("display"),g=$(".delete-all");void 0===f||""===f||"none"===f&&0===g.length||"none"===f&&"none"===g.css("display")?d.initPlayer(c,a[+e]):h.checkbox_all(c)},h.check=function(a){var b=$(a).parent();h.checkbox_all(b)},h.initSelectAllEvent=function(a){$(".select-all").on("click",".left,.title",function(){var a=$(this).parent(),b=a.find(".left").attr("value"),c=$(".item").find(".checkbox");0==+b?(a.find("img").attr("src","./static/images/xuanze.png"),a.find(".left").attr("value",1),$.each(c,function(a,b){$(b).find("img").attr("src","./static/images/xuanze.png"),$(b).attr("value",1)}),$("#add").removeClass("content_add"),$("#add").addClass("content"),$("#delete").removeClass("content_add"),$("#delete").addClass("content")):(a.find("img").attr("src","./static/images/xuanzekong.png"),a.find(".left").attr("value",0),$.each(c,function(a,b){$(b).find("img").attr("src","./static/images/xuanzekong.png"),$(b).attr("value",0)}),$("#add").removeClass("content"),$("#add").addClass("content_add"),$("#delete").removeClass("content"),$("#delete").addClass("content_add"))}),$(".select-all").on("click","#cancel",function(){$("."+a).show(),$(".select-all").hide(),$(".item").find(".checkbox").hide(),$(".item").find(".checkbox span").length&&($(".item").find(".checkbox").show(),$(".item").find(".checkbox span").show(),$(".item").find(".checkbox img").hide())}),$(".select-all").on("click","#add",function(){var b=$(".item"),c=[],d=[],e=[];$.each(b,function(a,b){var f=$(b),g=f.find(".checkbox").attr("value");1===+g&&(c.push(f.attr("sid")),d.push(f.attr("tag")),e.push(f.attr("tagval")))}),f.showAddMyablumBox(c.join(","),d.join(","),e.join(","),a)})},h.playEdit=function(a){("none"===$(".item").find(".checkbox")[0].style.display||""===$(".item").find(".checkbox")[0].style.display)&&($("."+a).hide(),$(".select-all").show(),$(".item").find(".checkbox").show(),$(".item").find(".checkbox span").length&&($(".item").find(".checkbox span").hide(),$(".item").find(".checkbox img").show()))},h.pushSong=function(a){var a=$(a).parent(),c=(a.attr("sid"),$(".select-all").css("display")),d=$(".delete-all");if(!$(".select-all").length||""===c||"none"===c&&0===d.length||"none"===c&&"none"===d.css("display")){var e=["url","md5","type","tag","tagval","size"],f={};$.each(e,function(b,c){f[c]=a.attr(c)});var g=$.extend({},f);g.bid=f.tagval,g.fid=a.attr("sid"),b.playMusic(f,g);var i=document.title,j=$(a).find(".title").text();(""==j||null==j)&&(j=$(a).find(".name").text());var k=h.findName();_czc.push(["_trackEvent","歌曲推送数","歌曲推送数","歌曲推送数"]),_czc.push(["_trackEvent",i,k,j])}else h.checkbox_all(a)},h.pushAllSong=function(a){if(0==$(".item-a").filter(".play-btn").attr("value")){$(".item-a").filter(".play-btn").attr("value",1);var a=$(a).parent().parent().find(".item"),c=["url","md5","type","tag","tagval","size"],d=[],e=[],f=[],g=[],i=0;if($.each(a,function(a,b){var g={};$.each(c,function(a,c){g[c]=$(b).attr(c)}),d.push(g);var h=$.extend({},g);h.bid=g.tagval,h.fid=$(b).attr("sid"),e.push(h),f.push($(b).find(".title").text())}),e.length>10){i=Math.ceil(e.length/10);for(var j=0;i>j;j++)g.push(e.slice(10*j,10*(j+1)));$.each(g,function(a,c){b.playAllMusic(c,c)})}else b.playAllMusic(d,e);var k=document.title,l=h.findName();_czc.push(["_trackEvent","全部播放",l,"全部播放"]),$.each(f,function(a,b){_czc.push(["_trackEvent","歌曲推送数","歌曲推送数","歌曲推送数"]),_czc.push(["_trackEvent",k,l,b])})}},h.pushSongLi=function(a){var a=$(a),c=(a.attr("sid"),["url","md5","type","tag","tagval","size"]),d={};$.each(c,function(b,c){d[c]=a.attr(c)});var e=$.extend({},d);e.bid=d.tagval,e.fid=a.attr("sid"),b.playMusic(d,e);var f=document.title,g=$(a).find(".title").text(),i=h.findName();_czc.push(["_trackEvent","歌曲推送数","歌曲推送数","歌曲推送数"]),_czc.push(["_trackEvent",f,i,g])},h.findName=function(){var a=document.title,b="";switch(a){case"电台":b=$(document).find(".name-box").find(".name").text();break;case"专辑":b=$(document).find(".info-box").find(".title").text();break;case"专题":b=$(document).find(".infotitle").text();break;case"点播排行":b=$(document).find(".menu-list").find(".cur").text();break;case"点播足迹":b="点播足迹";break;default:b="我的听听"}return b},h.newPlayEvent=function(){$("#J_newplay-box").on("click",".btn-cancel",function(){$("#J_newplay-box").hide(),e.hideMask(),$("#play_name").val(""),$("#J_newplay-box .btn-ok").css("color","#acacac")}),$("#J_newplay-box").on("click",".btn-ok",function(){if(null!=$("#play_name").val()&&""!=$("#play_name").val()){var a=$("#play_name").val(),b=$("#play_id").val();return""==b?void c.getRequest({url:BEME.APIURL+"/albums/addPlayList",data:{name:a},type:"POST",successfn:function(a){0===a.code?($("#J_newplay-box").hide(),e.hideMask(),window.location.reload()):(e.showTips("添加失败！"),$("#J_newplay-box").hide(),e.hideMask(),$("#play_name").val(""),$("#J_newplay-box .btn-ok").css("color","#acacac"))}}):void c.getRequest({url:BEME.APIURL+"/albums/editPlayList",data:{name:a,id:b},type:"POST",successfn:function(a){0===a.code?($("#J_newplay-box").hide(),e.hideMask(),window.location.reload()):(e.showTips("添加失败！"),$("#J_newplay-box").hide(),e.hideMask(),$("#play_name").val(""),$("#J_newplay-box .btn-ok").css("color","#acacac"))}})}}),$("#play_name").on("input propertychange",function(){null==$("#play_name").val()||""==$("#play_name").val()?$("#J_newplay-box .btn-ok").css("color","#acacac"):$("#J_newplay-box .btn-ok").css("color","#0091ff")})},h.checkbox_all=function(a){var b=a.find(".checkbox").attr("value");if(0==+b){$(a.find(".checkbox")).find("img").attr("src","./static/images/xuanze.png"),a.find(".checkbox").attr("value","1");var c=$(".item").find(".checkbox"),d=0,e=!1;$.each(c,function(a,b){0==$(b).attr("value")&&d++,1==$(b).attr("value")&&(e=!0)}),d||($(".delete-all .left").length?($(".delete-all .left img").attr("src","./static/images/xuanze.png"),$(".delete-all .left").attr("value",1),$(".select-all .left img").attr("src","./static/images/xuanze.png"),$(".select-all .left").attr("value",1)):($(".select-all .left img").attr("src","./static/images/xuanze.png"),$(".select-all .left").attr("value",1))),e?($("#add").removeClass("content_add"),$("#add").addClass("content"),$("#delete").removeClass("content_add"),$("#delete").addClass("content")):($("#add").removeClass("content"),$("#add").addClass("content_add"),$("#delete").removeClass("content"),$("#delete").addClass("content_add"))}else{$(a.find(".checkbox")).find("img").attr("src","./static/images/xuanzekong.png"),a.find(".checkbox").attr("value","0");var e=!1,c=$(".item").find(".checkbox");if($.each(c,function(a,b){1==$(b).attr("value")&&(e=!0)}),e?($("#add").removeClass("content_add"),$("#add").addClass("content"),$("#delete").removeClass("content_add"),$("#delete").addClass("content")):($("#add").removeClass("content"),$("#add").addClass("content_add"),$("#delete").removeClass("content"),$("#delete").addClass("content_add")),$(".delete-all .left").length){var f=$(".delete-all .left").attr("value");1==+f&&($(".delete-all .left img").attr("src","./static/images/xuanzekong.png"),$(".delete-all .left").attr("value",0),$(".select-all .left img").attr("src","./static/images/xuanzekong.png"),$(".select-all .left").attr("value",0))}else{var f=$(".select-all .left").attr("value");1==+f&&($(".select-all .left img").attr("src","./static/images/xuanzekong.png"),$(".select-all .left").attr("value",0))}}},h.shareToWeixin=function(a,b,d,e){c.getRequest({url:BEME.APIURL+"/weixin/getWeixinJosn",data:{id:a,type:b,album_type:d,album_id:e},successfn:function(a){0==a.code&&window.bemetoy.socialShareWithContent(a.data)}})}}),define("comm/pushsong",["comm/url","helper/app","comm/request","require","exports"],function(a,b,c,d,e){"use strict";var f=function(a,d,e){if(1==b.getUA(0)?b.showOneTips("推送成功!"):b.showTips("推送成功!"),c.getRequest({url:BEME.APIURL+"/albums/playSong",data:{tag:e,tag_id:a,song_id:d},type:"POST",successfn:function(a){}}),$("#num")){var f=$("#num").text();f=+f+1,$("#num").html(f)}},g=function(a,d){if(b.showTips("推送成功!"),$("#J_random-box").hide(),b.hideMask(),d?$("#J_body-mask").show():c.getRequest({url:BEME.APIURL+"/listen/getUnPlay",type:"POST",successfn:function(a){if(0==a.code&&a.data>30){var c="玩具已有"+a.data+"首歌曲尚未播放，快去播给宝宝听吧~";b.showAlert(c)}}}),$.each(a,function(a,b){c.getRequest({url:BEME.APIURL+"/albums/playSong",data:{tag:b.tag,tag_id:b.bid,song_id:b.fid},type:"POST",successfn:function(a){}})}),$("#num")){var e=$("#num").text();e=+e+a.length,$("#num").html(e)}};e.getUid=function(){var a,b;try{a=window.bemetoy.getFromUerid(),b=window.bemetoy.getToUerid()}catch(c){a=0,b=0}return{from:a,to:b}},e.getPushUrl=function(){var a="short.bemetoy.com/push_music",b=location.host.split(".");return b.length>3&&(a=b[0]+"."+a),"http://"+a};var h={};h.stringify=function(a){if(a instanceof Object){var b="";if(a.constructor===Array){for(var c=0;c<a.length;b+=h.stringify(a[c])+",",c++);return"["+b.substr(0,b.length-1)+"]"}if(a.toString!==Object.prototype.toString)return'"'+a.toString().replace(/"/g,"\\$&")+'"';for(var d in a)b+='"'+d.replace(/"/g,"\\$&")+'":'+h.stringify(a[d])+",";return"{"+b.substr(0,b.length-1)+"}"}return"string"==typeof a?'"'+a.replace(/"/g,"\\$&")+'"':String(a)},e.stringify=h.stringify,e.playMusic=function(a,c){var d=e.getUid(),g=e.stringify(a);return d.to<1?void(b.getUA(0)>1?window.location.href="#!m=pushfail&text=1&type="+a.tag:b.showOneTips("您尚未绑定玩具!")):(a={fromuid:d.from,touid:d.to,pushBuf:g},void $.ajax({url:e.getPushUrl(),dataType:"jsonp",type:"get",jsonp:"cb",cache:!1,data:a,error:function(a,b,c){},success:function(a){1001===a.result&&b.showAlert(a.res_info),e.musicAddScore(),f(c.bid,c.fid,c.tag)}}))},e.musicAddScore=function(){try{var a=b.getUA(1),c=b.getUA(0);a>0&&c>1&&window.bemetoy.musicAddScore()}catch(d){}},window.onMusicAddScoreResult=function(a){var b=parseInt(a);if(b>0){$("#J_score-tips .point").text("+"+b);var c=$("#J_score-tips");$("#J_score-tips").show(),c.addClass("tipsscore"),setTimeout(function(){c.removeClass("tipsscore"),$("#J_score-tips").hide()},3e3)}else $("#J_score-tips").hide()},e.playAllMusic=function(a,c){var d=e.getUid(),f=e.stringify(a);return d.to<1?($("#J_random-box").hide(),b.hideMask(),void(window.location.href="#!m=pushfail&text=1&type="+a[0].tag)):(a={fromuid:d.from,touid:d.to,pushBuf:f},void $.ajax({url:e.getPushUrl(),dataType:"jsonp",type:"get",jsonp:"cb",cache:!1,data:a,success:function(a){var d=!1;1001===a.result&&(d=!0,b.showAlert(a.res_info)),e.musicAddScore(),$(".item-a").filter(".play-btn").attr("value",0),g(c,d)}}))}}),define("comm/request",["comm/utils","helper/app","require","exports"],function(a,b,c,d){"use strict";d.hookSuccess=function(){};var e={};d.addGlobalRequestHook=function(a,b){b?e[a]=b:delete e[a]};var f=function(a,b){d.hookSuccess(a,b),$.each(e,function(c,d){d(a,b)})};d.getRequest=function(a){return a=a||{},a.url?(a.xhrFields={withCredentials:!0},a.success=function(b){if(a.successfn){var c=b?$.parseJSON(b):{};a.successfn(c),f(c,a)}},a.timeout=45e3,a.error=function(a,c,d){b.loadingFail()},$.ajax(a)):void 0};var g=function(a,b){var c=$.parseJSON(a);return b.successfn(c,{from:"local"}),f(c,b),c},h=function(a,b){return g(a,b)};d.getLocalRequest=function(c){if(c=c||{},c.url){c.name=c.name||c.url;var d=a.cache.get(c.name);d&&c.successfn&&h(d,c),c.success=function(b){if(b){var e=null;e=d&&d==b||!c.successfn?$.parseJSON(b):h(b,c),e&&0==e.code&&d!=b&&c.name&&a.cache.set(c.name,b)}},c.xhrFields={withCredentials:!0},c.timeout=45e3,c.error=function(a,c,d){b.loadingFail()},d?setTimeout(function(){$.ajax(c)},100):$.ajax(c)}},d.getScript=function(a,b){var c=document.createElement("script");c.async="async",c.src=a,b&&(c.onload=b),document.getElementsByTagName("head")[0].appendChild(c)}}),define("comm/swipe",["require","exports"],function(a,b){"use strict";function c(a,b){function c(){p=t.children,s=p.length,p.length<2&&(b.continuous=!1),o.transitions&&b.continuous&&p.length<3&&(t.appendChild(p[0].cloneNode(!0)),t.appendChild(t.children[1].cloneNode(!0)),p=t.children),q=new Array(p.length),r=a.getBoundingClientRect().width||a.offsetWidth,t.style.width=p.length*r+"px";for(var c=p.length;c--;){var d=p[c];d.style.width=r+"px",d.setAttribute("data-index",c),o.transitions&&(d.style.left=c*-r+"px",h(c,u>c?-r:c>u?r:0,0))}b.continuous&&o.transitions&&(h(f(u-1),-r,0),h(f(u+1),r,0)),o.transitions||(t.style.left=u*-r+"px"),a.style.visibility="visible"}function d(){b.continuous?g(u-1):u&&g(u-1)}function e(){b.continuous?g(u+1):u<p.length-1&&g(u+1)}function f(a){return(p.length+a%p.length)%p.length}function g(a,c){if(u!=a){if(o.transitions){var d=Math.abs(u-a)/(u-a);if(b.continuous){var e=d;d=-q[f(a)]/r,d!==e&&(a=-d*p.length+a)}for(var g=Math.abs(u-a)-1;g--;)h(f((a>u?a:u)-g-1),r*d,0);a=f(a),h(u,r*d,c||v),h(a,0,c||v),b.continuous&&h(f(a-d),-(r*d),0)}else a=f(a),j(u*-r,a*-r,c||v);u=a,n(b.callback&&b.callback(u,p[u]))}}function h(a,b,c){i(a,b,c),q[a]=b}function i(a,b,c){var d=p[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function j(a,c,d){if(!d)return void(t.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(t.style.left=c+"px",y&&k(),b.transitionEnd&&b.transitionEnd.call(event,u,p[u]),void clearInterval(f)):void(t.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){w=setTimeout(e,y)}function l(){y=0,clearTimeout(w)}var m=function(){},n=function(a){setTimeout(a||m,0)},o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var p,q,r,s,t=a.children[0];b=b||{};var u=parseInt(b.startSlide,10)||0,v=b.speed||300;b.continuous=void 0!==b.continuous?b.continuous:!0;var w,x,y=b.auto||0,z={},A={},B={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":n(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":n(this.transitionEnd(a));break;case"resize":n(c)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];z={x:b.pageX,y:b.pageY,time:+new Date},x=void 0,A={},t.addEventListener("touchmove",this,!1),t.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];A={x:c.pageX-z.x,y:c.pageY-z.y},"undefined"==typeof x&&(x=!!(x||Math.abs(A.x)<Math.abs(A.y))),x||(a.preventDefault(),l(),b.continuous?(i(f(u-1),A.x+q[f(u-1)],0),i(u,A.x+q[u],0),i(f(u+1),A.x+q[f(u+1)],0)):(A.x=A.x/(!u&&A.x>0||u==p.length-1&&A.x<0?Math.abs(A.x)/r+1:1),i(u-1,A.x+q[u-1],0),i(u,A.x+q[u],0),i(u+1,A.x+q[u+1],0)))}},end:function(a){var c=+new Date-z.time,d=Number(c)<250&&Math.abs(A.x)>20||Math.abs(A.x)>r/2,e=!u&&A.x>0||u==p.length-1&&A.x<0;b.continuous&&(e=!1);var g=A.x<0;x||(d&&!e?(g?(b.continuous?(h(f(u-1),-r,0),h(f(u+2),r,0)):h(u-1,-r,0),h(u,q[u]-r,v),h(f(u+1),q[f(u+1)]-r,v),u=f(u+1)):(b.continuous?(h(f(u+1),r,0),h(f(u-2),-r,0)):h(u+1,r,0),h(u,q[u]+r,v),h(f(u-1),q[f(u-1)]+r,v),u=f(u-1)),b.callback&&b.callback(u,p[u])):b.continuous?(h(f(u-1),-r,v),h(u,0,v),h(f(u+1),r,v)):(h(u-1,-r,v),h(u,0,v),h(u+1,r,v))),t.removeEventListener("touchmove",B,!1),t.removeEventListener("touchend",B,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==u&&(y&&k(),b.transitionEnd&&b.transitionEnd.call(a,u,p[u]))}};return c(),y&&k(),o.addEventListener?(o.touch&&t.addEventListener("touchstart",B,!1),o.transitions&&(t.addEventListener("webkitTransitionEnd",B,!1),t.addEventListener("msTransitionEnd",B,!1),t.addEventListener("oTransitionEnd",B,!1),t.addEventListener("otransitionend",B,!1),t.addEventListener("transitionend",B,!1)),window.addEventListener("resize",B,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},stop:function(){l()},getPos:function(){return u},getNumSlides:function(){return s},kill:function(){l(),t.style.width="",t.style.left="";for(var a=p.length;a--;){var b=p[a];b.style.width="",b.style.left="",o.transitions&&i(a,0,0)}o.addEventListener?(t.removeEventListener("touchstart",B,!1),t.removeEventListener("webkitTransitionEnd",B,!1),t.removeEventListener("msTransitionEnd",B,!1),t.removeEventListener("oTransitionEnd",B,!1),t.removeEventListener("otransitionend",B,!1),t.removeEventListener("transitionend",B,!1),window.removeEventListener("resize",B,!1)):window.onresize=null}}}}(window.jQuery||window.Zepto)&&!function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new c(a(this)[0],b))})}}(window.jQuery||window.Zepto)}),define("comm/touch",["require","exports"],function(a,b){"use strict";b.drag=function(a){var b,c,d,e=!1,f={timeLimit:100,speedLimit:80,stopLimit:400,callback:function(){},end:function(){}},g=$(a),h=0,i=0,j=0,k="",l=$(document.body).offset();g.on("touchstart",function(a){if(j=g.offset(),a.targetTouches||a.touches&&1==a.touches.length){var d=a.touches||a.targetTouches||[a];e={x:d[0].pageX,y:d[0].pageY}}b=e.x-h,c=e.y-i}).on("touchmove",function(a){var e=a.touches||a.targetTouches||[a];d={x:e[0].pageX,y:e[0].pageY},k="translate("+(d.x-b)+"px, "+(d.y-c)+"px)",g.css({transform:k,"-webkit-transform":k}),a.preventDefault()}).on("touchend",function(a){return f.end(a),h=0,i=0,d?(k={},k.left=Math.max(j.left+d.x-b,0),k.top=Math.max(j.top+d.y-c,0),k.left=Math.min(k.left,l.width-60),k.top=Math.min(k.top,l.height-60),k.transform=null,k["-webkit-transform"]=null,g.css(k),d=!1,void a.preventDefault()):!0})}}),define("comm/unveil",["require","exports"],function(a,b){"use strict";!function(a){a.fn.unveil=function(b,c){function d(){var b=j.filter(function(){var b=a(this);if("none"!=b.css("display")){var c=f.scrollTop(),d=c+f.height(),e=b.offset().top,h=e+b.height();return h>=c-g&&d+g>=e}});e=b.trigger("unveil"),j=j.not(e)}var e,f=a(window),g=b||0,h=window.devicePixelRatio>1,i=h?"data-src-retina":"data-src",j=this;return this.one("unveil",function(){var a=this.getAttribute(i);a=a||this.getAttribute("data-src"),a&&(this.setAttribute("src",a),"function"==typeof c&&c.call(this))}),f.on("scroll.unveil resize.unveil lookup.unveil",d),d(),this}}(window.jQuery||window.Zepto)}),define("comm/url",["require","exports"],function(a,b){"use strict";b.setHash=function(a,b){return console.log("set hash:"+a),b=b||window,a=a.replace(/^[#!]+/,""),b.location.hash="#!"+a,a},b.getHash=function(a){var b=location.hash||location.search,c=0;return a&&(c=a.indexOf("#"),b=c>-1?a.substr(c+1):""),b?b.replace(/^[#!\?]+/,""):""},b.getParams=function(a){for(var b,c={},d=this.getHash(a),e=d?d.split("&"):[],f=0,g=e.length;g>f;f++)b=e[f].split("="),c[b[0]]=b[1];return c},b.buildQuery=function(a){var b=[];return $.each(a,function(a,c){null!==c&&"undefined"!=typeof c&&b.push(a+"="+c)}),b=b.join("&")},b.setParams=function(a){var c=b.buildQuery(a);return b.setHash(c)},b.extParams=function(a){var c=b.getParams();return c=$.extend(c,a),b.setParams(c)},b.reload=function(a){var b=this.getParams(a);return b.t=Math.ceil(1e3*Math.random()),this.setParams(b)},b.getHashParam=function(a){var c=b.getHash().match(new RegExp("(^|&)"+a+"=([^&]*)(&|$)"));return null!==c?c[2]:""},b.getUrlParam=function(a,b){var c=b||window.location.search,d=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),e=c.substr(c.indexOf("?")+1).match(d);return null!==e?e[2]:""}}),define("comm/utils",["comm/url","require","exports"],function(a,b,c){"use strict";var d=function(){},e=window.localStorage;Object.keys=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},c.getQueryString=function(a,b){var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),d=window.location.search.substr(1).match(c);return null!==d?d[2]:b};var f={};c.getUrlSearchInfo=function(){if(f.searchData)return f.searchData;var a,b,c=window.location,d=c.search.replace(/^[\?]+/,""),e=location.hash.replace(/^[#!]+/,"");return d=d+"&"+e,d=d.split("&"),f.searchData={},$.each(d,function(c,d){return d?(c=d.indexOf("="),c>-1?(a=d.substr(0,c),b=d.substr(c+1)):(a=d,b=""),void(f.searchData[a]=b)):!0}),f.searchData};var g={set:function(a,b){try{return e.setItem(a,b)}catch(c){try{return e.removeItem(a),e.setItem(a,b)}catch(d){e.clear(),console.log("cache["+a+"] set error!")}}return!1},get:function(a){try{return e.getItem(a)}catch(b){return!1}},del:function(a){try{return e.removeItem(a)}catch(b){return!1}},clear:function(){e.clear()}};c.cache=g,e||(c.cache={set:d,get:d,del:d,clear:d}),c.template=function(a,b,c){var d=$("#"+a),e=d.html();return BEME.template(e,b,c)},c.getHashUrl=function(b,c){c=c||"#!";var d="";return d=a.buildQuery(b),c+d},c.replaceHashUrl=function(b,c){c=c||"#!";var d="",e=a.getParams();return $.extend(b,e),d=a.buildQuery(b),c+d},c.getDateInfo=function(a,b){var c=new Date(1e3*a),d={y:c.getFullYear(),m:c.getMonth()+1,d:c.getDate(),H:c.getHours(),M:c.getMinutes(),S:c.getSeconds()};return $.each(d,function(a,b){d[a]=10>b?"0"+b:b}),b?d[b]:d},c.formatDate=function(a){var b=c.getDateInfo(a),d=b.m+"-"+b.d;return b.y!=(new Date).getFullYear()&&(d=b.y+"-"+d),d},c.appCookie=function i(a,b,c){var d=document,e=window.location.hostname;if("undefined"==typeof b){if(0<d.cookie.length){var f=d.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null===f?"":f[2]}return""}if(i(a)==b)return!1;c=$.extend({expires:1,path:"/",domain:e},c||{}),null===b&&(b="",c.expires=-1);var g="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var h;"number"==typeof c.expires?(h=new Date,h.setTime(h.getTime()+1*c.expires*60*60*1e3)):h=c.expires,g=h.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:e;c.secure?"; secure":"";return d.cookie=a+"="+b+"; path="+j+"; domain="+k+"; expires="+g,i(a)},c.formatTime=function(a){for(var b=[],c=0,d=0,e=1;e>-1;e--)c=Math.pow(60,e),d=Math.floor(a/c),d=10>d?"0"+d:d,b.push(d),a%=c;return b.join(":")},c.imageUrl=function(a){if(a){var b=a.split(".");return b[b.length-2]=b[b.length-2]+"_335px_70qu",b.join(".")}},c.imageUrlHead=function(a){if(a){var b=a.split(".");return b[b.length-2]=b[b.length-2]+"_335px_90qu",b.join(".")}},c.imageWeixin=function(a){if(a){var b=a.split(".");return b[b.length-2]=b[b.length-2]+"_70px_70qu",b.join(".")}},c.imageUrlStationHead=function(a,b){if(a){var c=a.split(".");return 1==b&&(c[c.length-2]=c[c.length-2]+"_640px_90qu"),0==b&&(c[c.length-2]=c[c.length-2]+"_320px_90qu"),c.join(".")}},c.formatPushTime=function(a){a=a.replace(/(,$)/,"");var b=a.split(",");if(7===b.length)return"天";var c=[],d=["日","一","二","三","四","五","六"];return b.sort(),0===+b[0]&&(b.splice(0,1),b.push(0)),$.each(b,function(a,b){c.push("周"+d[+b])}),c.join("、")};var h=["#eb67d5","#33b833","#ed5239","#288be1","#ff8800"];return c.getRandColor=function(){var a=[];return function(){a.length<1&&(a=h.slice(0));var b=a[Math.floor(a.length*Math.random())],c=a.indexOf(b);return a.splice(c,1),b}}(),c.headerMenu=function(){$("#myplay").hide(),$("#editplay").hide(),$("#addplay").hide(),$("#save_station").hide(),$("#delete_play").hide()},c.hideHeader=function(){$(".main-header").hide(),$("#J_wrapper").css("margin-top","-1.1rem"),$("#J_body-tips").css("margin-top","-1.05rem")},c.loadImages=function(a,b,c){for(var d=0,e=a.length,f=null,g=!1,h={},i=function(){this.onload=null,this.onerror=null;var a=this.getAttribute("_src");return h[a]=this,++d==e&&b&&!g?(g=!0,b(!0,d,h)):void b(!1,d,h)},j=0;e>j;j++)f=new Image,f.onload=i,f.onerror=i,f.setAttribute("_src",a[j]),f.src=a[j];c&&setTimeout(function(){g||(g=!0,b(h))},c)},$.Deferred=function(){var a={},b={done:function(b){a.success=b}};return{resolve:function(){a.success&&a.success.apply(this,arguments)},promise:function(){return b},resolveWith:function(){},rejectWith:function(){}}},$.fn.addAnim=function(a,b,c){b=b||300,c=c||"webkitAnimationEnd webkitTransitionEnd";var d=$.Deferred(),e=$(this),f=function(a){e.css({"-webkit-transition":"",transition:""}).css("zoom"),e.off(c,f),d.resolve(e)};return setTimeout(function(){var d="all "+b+"ms ease-in";e.one(c,f).css({"-webkit-transition":d,transition:d}).addClass(a)},0),d.promise()},BEME.func=BEME.func||{},BEME.func.appCookie=c.appCookie,BEME.func.getHashUrl=c.getHashUrl,BEME.func.replaceHashUrl=c.replaceHashUrl,BEME.func.getDateInfo=c.getDateInfo,BEME.func.formatDate=c.formatDate,BEME.func.formatTime=c.formatTime,BEME.func.formatPushTime=c.formatPushTime,BEME.func.imageUrl=c.imageUrl,BEME.func.imageUrlHead=c.imageUrlHead,BEME.func.imageUrlStationHead=c.imageUrlStationHead,c}),define("comm/zeptodata",["require","exports"],function(a,b){"use strict";function c(a,b){var c=a[i],e=c&&f[c];if(void 0===b)return e||d(a);if(e){if(b in e)return e[b];var j=h(b);if(j in e)return e[j]}return g.call($(a),b)}function d(a,b,c){var d=a[i]||(a[i]=++$.uuid),g=f[d]||(f[d]=e(a));return void 0!==b&&(g[h(b)]=c),g}function e(a){var b={};return $.each(a.attributes||j,function(a,c){0==c.name.indexOf("data-")&&(b[h(c.name.replace("data-",""))]=$.zepto.deserializeValue(c.value))}),b}var f={},g=$.fn.data,h=$.camelCase,i=$.expando="Zepto"+ +new Date,j=[];$.fn.data=function(a,b){return void 0===b?$.isPlainObject(a)?this.each(function(b,c){$.each(a,function(a,b){d(c,a,b)})}):0 in this?c(this[0],a):void 0:this.each(function(){d(this,a,b)})},$.fn.removeData=function(a){return"string"==typeof a&&(a=a.split(/\s+/)),this.each(function(){var b=this[i],c=b&&f[b];c&&$.each(a||c,function(b){delete c[a?h(this):b]})})},["remove","empty"].forEach(function(a){var b=$.fn[a];$.fn[a]=function(){var c=this.find("*");return"remove"===a&&(c=c.add(this)),c.removeData(),b.call(this)}})}),define("helper/app",["comm/url","comm/utils","comm/request","require","exports"],function(a,b,c,d,e){"use strict";var f=function(){var a=$("#J_alert-box"),b=f.setting;if(!f.isInit){f.isInit=!0;var c={close:function(){$("#J_body-mask, #J_alert-box").hide()}};a.find(".btn-cancel").on("click",function(a){b=f.setting,b.cancel?b.cancel.call(c,a):c.close()}),a.find(".btn-ok").on("click",function(a){b=f.setting,b.ok?(b.ok.call(c,a),c.close()):c.close()})}b.hideCancel?(a.find(".btn-cancel").hide(),a.find("a").css("width","100%")):(a.find(".btn-cancel").show(),a.find("a").css("width","50%")),a.find(".title").html(b.title),a.find(".content").html(b.content),a.find(".btn-ok").html(b.okWording),a.find(".btn-cancel").html(b.cancelWording),$("#J_body-mask, #J_alert-box").show()};e.showAlert=function(a,b){var c={title:"提示",content:"描述",hideCancel:!1,ok:b,cancel:!1,okWording:"确定",cancelWording:"取消"};"string"==typeof a&&(a={hideCancel:!0,content:a,okWording:"确定",ok:!1}),f.setting=$.extend(c,a),f()},e.showTips=function(a,b){b=b||2e3;var c=$("#J_body-tips");c.text(a).removeClass("tips-in tips-out").css("zoom"),c.addClass("tips-in"),setTimeout(function(){c.removeClass("tips-in tips-out").css("zoom"),
c.addClass("tips-out")},b)},e.showOneTips=function(a,b){b=b||2e3;var c=$("#J_body-tips");c.text(a).removeClass("tipsone-in tipsone-out").css("zoom"),c.addClass("tipsone-in"),setTimeout(function(){c.removeClass("tipsone-in tipsone-out").css("zoom"),c.addClass("tipsone-out")},b)};var g={};e.onHashchange=function(a,b){g[a]=b},e.offHashchange=function(a){delete g[a]},e.initEvent=function(){$(window).on("hashchange",function(a){var b=this;$.each(g,function(c,d){d.call(b,a)})})},e.loaded=function(){$(document.body).removeClass("loading")},e.loading=function(){$(document.body).addClass("loading")},e.loadingFail=function(){$(document.body).removeClass("loading"),$(document.body).addClass("loading-f")},e.noScroll=function(){$(document.body).addClass("overflow")},e.showMask=function(){$("#J_body-mask").show(),$(document.body).addClass("overflow")},e.hideMask=function(){$("#J_body-mask").hide(),$(document.body).removeClass("overflow")},e.setTitle=function(a){document.title=a,$("#J_header-title span").text(a)},e.showImage=function(){$("img[imgsrc]").each(function(a,b){var c=$(this).attr("imgsrc"),d=this,b=document.createElement("img");b.onload=function(){$(d).attr("src",b.src)},b.src=c})},e.hideAllBox=function(){$("#J_body-mask").hide();try{$("#J_random-box").hide(),$("#J_alert-box").hide(),$("#J_album-alert").hide(),$("#J_newplay-box").hide()}catch(a){}},e.getUA=function(a){var b=navigator.userAgent,c=b.toLowerCase().match(/(bemetoy)\/([\d.]+)/);if(null!=c){var d=c[2].split(".");return d[a]}return 0},e.backScroll=function(){var a=location.href,b=window.BEME.urlList.length;if(b>0)if(a==window.BEME.urlList[b-2])setTimeout(function(){window.scrollTo(0,window.BEME.scrollList[window.BEME.scrollList.length-1]),window.BEME.urlList.pop(),window.BEME.scrollList.pop()},50);else{if(a==window.BEME.urlList[b-1])return;window.scrollTo(0,0),window.BEME.scrollList.push(window.BEME._currentScroll),window.BEME.urlList.push(a)}else window.BEME.scrollList.push(window.BEME._currentScroll),window.BEME.urlList.push(a)},e.changeDate=function(a){var b=new Date(a),c=b.getMonth()+1+"月"+b.getDate()+"日 ";return c},e.showHeader=function(){var b=a.getParams(),c=!0,d=["myindex","myalbum","myindex","myplay","mystation"];$.each(d,function(a,d){return b.m===d?(c=!1,!1):void 0});try{window.bemetoy.showMyListenHeader(c)}catch(e){}},e.showShare=function(){var a=e.getUA(0),b=e.getUA(1);a>1&&b>0&&$(".share_weixin").show()},e.shareWeixinUrl=function(a){$.ajax({url:BEME.APIURL+"/weixin/getWeixinContent",dataType:"json",type:"get",withCredentials:!0,cache:!1,data:a,success:function(a){0==a.code&&window.bemetoy.socialShareWithContent(a.data)}})}}),define("helper/jrange",[],function(){"use strict";var a=0,b=function(){return this.init.apply(this,arguments)};b.prototype={defaults:{onstatechange:function(){},ondragchange:function(){},isRange:!1,showLabels:!0,showScale:!0,step:1,format:"%s",theme:"theme-green",width:300,disable:!1},template:['<div class="slider-container">','<div class="back-bar">','<div class="selected-bar"></div>','<div class="pointer low"></div><div class="pointer-label"></div>','<div class="pointer high btn-play btn-single"></div><div class="pointer-label"></div>','<div class="clickable-dummy"></div>','<div class="load-bar" />',"</div>",'<div class="scale"></div>',"</div>"].join(""),init:function(a,b){this.options=$.extend({},this.defaults,b),this.inputNode=$(a),this.options.value=this.inputNode.val()||(this.options.isRange?this.options.from+","+this.options.from:this.options.from),this.domNode=$(this.template),this.domNode.addClass(this.options.theme),this.inputNode.after(this.domNode),this.domNode.on("change",this.onChange),this.pointers=$(".pointer",this.domNode),this.lowPointer=this.pointers.first(),this.highPointer=this.pointers.last(),this.labels=$(".pointer-label",this.domNode),this.lowLabel=this.labels.first(),this.highLabel=this.labels.last(),this.scale=$(".scale",this.domNode),this.bar=$(".selected-bar",this.domNode),this.clickableBar=this.domNode.find(".clickable-dummy"),this.interval=this.options.to-this.options.from,this.render()},render:function(){return 0!==this.inputNode.width()||this.options.width?(this.domNode.width(this.options.width||this.inputNode.width()),this.inputNode.hide(),this.isSingle()&&(this.lowPointer.hide(),this.lowLabel.hide()),this.options.showLabels||this.labels.hide(),this.attachEvents(),this.options.showScale&&this.renderScale(),void this.setValue(this.options.value)):void console.log("jRange : no width found, returning")},isSingle:function(){return"number"==typeof this.options.value?!0:-1!==this.options.value.indexOf(",")||this.options.isRange?!1:!0},attachEvents:function(){this.clickableBar.click($.proxy(this.barClicked,this)),this.pointers.on("mousedown touchstart",$.proxy(this.onDragStart,this)),this.pointers.bind("dragstart",function(a){a.preventDefault()})},onDragStart:function(b){if(!(this.options.disable||"mousedown"===b.type&&1!==b.which)){a=b.timeStamp,b.stopPropagation(),b.preventDefault();var c=$(b.target);this.pointers.removeClass("last-active"),c.addClass("focused last-active"),this[(c.hasClass("low")?"low":"high")+"Label"].addClass("focused"),$(document).on("mousemove.slider touchmove.slider",$.proxy(this.onDrag,this,c)),$(document).on("mouseup.slider touchend.slider touchcancel.slider",$.proxy(this.onDragEnd,this))}},onDrag:function(a,b){b.stopPropagation(),b.preventDefault(),b.touches&&b.touches.length?b=b.touches[0]:b.changedTouches&&b.changedTouches.length&&(b=b.changedTouches[0]);var c=b.clientX-this.domNode.offset().left;this.domNode.trigger("change",[this,a,c])},onDragEnd:function(b){b.stopPropagation(),b.preventDefault();var c=b.timeStamp-a;200>c&&$(this.bar[0]).parent().parent().parent().parent().find(".btn-play").click(),this.pointers.removeClass("focused"),this.labels.removeClass("focused"),$(document).off(".slider")},barClicked:function(a){if(!this.options.disable){var b=0,c=a.pageX-this.clickableBar.offset().left;this.isSingle()?(b=this.pointers.last(),this.setPosition(b,c,!0,!0)):(b=Math.abs(parseInt(this.pointers.first().css("left"),10)-c+this.pointers.first().width()/2)<Math.abs(parseInt(this.pointers.last().css("left"),10)-c+this.pointers.first().width()/2)?this.pointers.first():this.pointers.last(),this.setPosition(b,c,!0,!0));var d=a.clientX-this.domNode.offset().left;this.domNode.trigger("change",[this,b,d])}},onChange:function(a,b,c,d){var e,f;b.isSingle()?(e=0,f=b.domNode.width()):(e=c.hasClass("high")?b.lowPointer.position().left+b.lowPointer.width()/2:0,f=c.hasClass("low")?b.highPointer.position().left+b.highPointer.width()/2:b.domNode.width());var g=Math.min(Math.max(d,e),f);b.setPosition(c,g,!0),b.options.ondragchange.call(b,b.options.value)},setPosition:function(a,b,c,d){var e,f=this.lowPointer.position().left,g=this.highPointer.position().left,h=this.highPointer.width()/2;c||(b=this.prcToPx(b)),a[0]===this.highPointer[0]?g=Math.round(b-h):f=Math.round(b-h),0==h&&(h=14),d=!1,a[d?"animate":"css"]({left:Math.round(b-h)}),e=this.isSingle()?0:f+h,this.bar[d?"animate":"css"]({width:Math.round(g+h-e),left:e}),this.showPointerValue(a,b,d),this.isReadonly()},setValue:function(a){var b=a.toString().split(",");this.options.value=a;var c=this.valuesToPrc(2===b.length?b:[0,b[0]]);this.isSingle()?this.setPosition(this.highPointer,c[1]):(this.setPosition(this.lowPointer,c[0]),this.setPosition(this.highPointer,c[1]))},renderScale:function(){for(var a=this.options.scale||[this.options.from,this.options.to],b=Math.round(100/(a.length-1)*10)/10,c="",d=0;d<a.length;d++)c+='<span style="left: '+d*b+'%">'+("|"!=a[d]?"<ins>"+a[d]+"</ins>":"")+"</span>";this.scale.html(c),$("ins",this.scale).each(function(){$(this).css({marginLeft:-$(this).width()/2})})},getBarWidth:function(){var a=this.options.value.split(",");return a.length>1?parseInt(a[1],10)-parseInt(a[0],10):parseInt(a[0],10)},showPointerValue:function(a,b,c){var d,e=$(".pointer-label",this.domNode)[a.hasClass("low")?"first":"last"](),f=this.positionToValue(b);if($.isFunction(this.options.format)){var g=this.isSingle()?void 0:a.hasClass("low")?"low":"high";d=this.options.format(f,g)}else d=this.options.format.replace("%s",f);var h=e.html(d).width(),i=b-h/2;i=Math.min(Math.max(i,0),this.options.width-h),e[c?"animate":"css"]({left:i}),this.setInputValue(a,f)},valuesToPrc:function(a){var b=100*(a[0]-this.options.from)/this.interval,c=100*(a[1]-this.options.from)/this.interval;return[b,c]},prcToPx:function(a){return this.domNode.width()*a/100},positionToValue:function(a){var b=a/this.domNode.width()*this.interval;return b+=this.options.from,Math.round(b/this.options.step)*this.options.step},setInputValue:function(a,b){if(this.isSingle())this.options.value=b.toString();else{var c=this.options.value.split(",");a.hasClass("low")?this.options.value=b+","+c[1]:this.options.value=c[0]+","+b}this.inputNode.val()!==this.options.value&&(this.inputNode.val(this.options.value),this.options.onstatechange.call(this,this.options.value))},getValue:function(){return this.options.value},isReadonly:function(){this.domNode.toggleClass("slider-readonly",this.options.disable)},disable:function(){this.options.disable=!0,this.isReadonly()},enable:function(){this.options.disable=!1,this.isReadonly()},toggleDisable:function(){this.options.disable=!this.options.disable,this.isReadonly()}};var c="jRange";$.fn[c]=function(a){var d,e=arguments;return this.each(function(){var f=$(this),g=f.data("plugin_"+c),h="object"==typeof a&&a;g||(f.data("plugin_"+c,g=new b(this,h)),$(window).resize(function(){g.setValue(g.getValue())})),"string"==typeof a&&(d=g[a].apply(g,Array.prototype.slice.call(e,1)))}),d||this}}),define("helper/playerbar",["comm/utils","comm/zeptodata","comm/clickevent","helper/app","helper/temphtml","helper/jrange","jplayer","page/myalbum","page/myhistory","page/myplay","require","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m="#J_jplayer-box",n=null,o=null,p=!1,q=!1,r="#J_jplayer-box_1",s="#J_jplayer-weixin",t=!0,u=!1,v={},w=0,x=null,y=!1,z=null,A=function(a){var b="active-play-item",d=a.attr("url");a.parent().find(".item").removeClass(b),a.addClass(b),o.length>0&&a.attr("sid")==o.attr("sid")&&("none"!=o.css("display")&&(o.remove(),n.addClass("item-option-showplay"),n.show()),o.remove()),n.find(".op-del").hide(),"true"==a.attr("user")&&n.find(".op-del").show(),n.attr("sid",a.attr("sid")),n.insertAfter(a),p._totalTime.text(a.find(".desc").text()),$(".load-bar").css("width","0"),p.jPlayer("setMedia",{mp3:d}),p.jPlayer("play"),y=!1;try{var e="试听"+document.title,f="试听"+$(a).find(".title").text(),g="试听"+c.findName();_czc.push(["_trackEvent",e,g,f])}catch(h){}},B=function(a){var b="active-play-item",c=a.attr("url");a.parent().find(".item").removeClass(b),a.addClass(b);var d=$(s);d.attr("sid",a.attr("sid")),d.insertAfter(a),p._totalTime.text(a.find(".desc").text()),$(".load-bar").css("width","0"),p.jPlayer("setMedia",{mp3:c}),p.jPlayer("play")},C=function(b){p.jPlayer({ready:function(a){p.jPlayer("setMedia",{mp3:b}),a.jPlayer.html.used&&a.jPlayer.html.audio.available&&(this._audio=$(this).data("jPlayer").htmlElement.audio)},progress:function(a){var b=a.jPlayer.status.remaining||0,c=(a.jPlayer.status.readyState,0),d=this;if("object"==typeof d._audio.buffered&&d._audio.buffered.length>0){if(d._audio.duration>0){for(var e=0,f=0;f<d._audio.buffered.length;f++)e+=d._audio.buffered.end(f)-d._audio.buffered.start(f);c=100*e/d._audio.duration}}else c=0;var g=100*(d._audio.duration-b)/d._audio.duration;c=g+c>=100?100:g+c,$(".load-bar").css("width",c+"%"),console.log(c)},timeupdate:function(b){var c=b.jPlayer.status,d=c.currentPercentAbsolute;if(!c.waitForLoad&&!y)try{var e={};e.name=$(this).parent().attr("name"),y=!0,window.bemetoy.playMusicWithInfo(JSON.stringify(e))}catch(f){}p.playedTime.text(a.formatTime(c.currentTime||0));var g=p._slider.data("plugin_jRange");g&&(g.setValue(d),100==d&&(g.setValue(0),p.playedTime.text("00:00")))},play:function(a){n.find(".btn-single").length<1?n.find(".btn-play").addClass("btn-pause"):n.find(".op-play").addClass("op-pause"),u=!0},pause:function(a){n.find(".btn-single").length<1?n.find(".btn-play").removeClass("btn-pause"):n.find(".op-play").removeClass("op-pause")},ended:function(a){if(n.find(".btn-single").length<1?n.find(".btn-play").removeClass("btn-pause"):n.find(".op-play").removeClass("op-pause"),$(".song-page").length>0){var b=$(".song-page .play-cover");b.addClass("pause"),b.attr("src","./static/images/bofang.png")}var c="active-play-item",d=$("."+c),e=d.parent().find(".item"),f=++w%e.length,g=e.eq(f);$(s).length>0?B(g):A(g)},smoothPlayBar:!0,supplied:"mp3",preload:"none",wmode:"window"}),p._slider&&p._slider.data("plugin_jRange").setValue(0)},D=function(){p=n.find(".player"),p.playedTime=n.find(".played-time"),p._totalTime=n.find(".total-time"),p._slider=n.find(".slider"),p.jPlayer("clearMedia"),p._slider.jRange({from:0,to:100,step:1,width:"68%",format:"%s",ondragchange:function(a){this.__timeout&&clearTimeout(this.__timeout),this.__timeout=setTimeout(function(){p.jPlayer("playHead",a)},100)}}),n.on("click",".btn-play1",function(){var a=$(this);return a.hasClass("btn-pause")?p.jPlayer("pause"):p.jPlayer("play"),!1}).on("click",".op-push",function(){var a=$(m).index()-1;c.pushSongLi($(m).parent().find("li")[a])}).on("click",".op-play",function(){var a="item-option-showplay";if(w=$("#J_jplayer-box").index()-1,$(r).length>0&&$(r).index()<w&&(w-=1),n.hasClass(a))$(this).hasClass("op-pause")?p.jPlayer("pause"):p.jPlayer("play");else{n.addClass(a);var b=$("#J_jplayer-box").parent().find(".item");A(b.eq(w%b.length))}}).on("click",".op-up",function(){d.showTips("产品原因，点不动")}).on("click",".op-add",function(){h.showAddMyablumBox(v.id,v.tag,v.tagval)}).on("click",".op-del",function(){"history"===v._type&&i.deleteHistory(v.relate_id),"play"===v._type&&j.deletePlay(v.relate_id)}).on("click",".op-share",function(){c.shareToWeixin(v.id,"song",v.tag,v.tagval)})},E=function(a){q=o.find(".player"),o.on("click",".btn-play",function(){var a=$(this);return a.hasClass("btn-pause")?q.jPlayer("pause"):q.jPlayer("play"),!1}).on("click",".op-push",function(){var a=$(r).index()-1;c.pushSongLi($(r).parent().find("li")[a])}).on("click",".op-play",function(){w=o.index()-2,o.index()<n.index()&&(w=o.index()-1),o.remove(),A(a),n.show()}).on("click",".op-up",function(){d.showTips("产品原因，点不动")}).on("click",".op-add",function(){h.showAddMyablumBox(v.id,v.tag,v.tagval)}).on("click",".op-del",function(){"history"===v._type&&i.deleteHistory(v.relate_id),"play"===v._type&&j.deletePlay(v.relate_id)})},F=function(a){p=n.find(".player"),p.playedTime=n.find(".played-time"),p._totalTime=n.find(".total-time"),p._slider=n.find(".slider"),p.jPlayer("clearMedia"),p._slider.jRange({from:0,to:100,step:1,width:"68%",format:"%s",ondragchange:function(a){this.__timeout&&clearTimeout(this.__timeout),this.__timeout=setTimeout(function(){p.jPlayer("playHead",a)},100)}}),n.on("click",".btn-play",function(a){a.stopPropagation();var b=$(this);return b.hasClass("btn-pause")?p.jPlayer("pause"):p.jPlayer("play"),!1}).on("click",".btn-song",function(){if($(".song-page").length>0){var a=$(".song-page .play-cover");return void(a.hasClass("pause")?(a.removeClass("pause"),p.jPlayer("play"),a.attr("src","./static/images/zanting.png")):(a.addClass("pause"),p.jPlayer("pause"),a.attr("src","./static/images/bofang.png")))}}).on("click",".play",function(){var a=$(this);return a.hasClass("pause")?(p.jPlayer("pause"),a.removeClass("pause")):(p.jPlayer("play"),a.addClass("pause")),!1})};l.initPlayer=function(b,c,f){z=x=b,v=c,n=$(m),o=$(r);var g=n.attr("sid");if(g==c.id)return"none"!=n.css("display")?n.hide():(o.hide(),n.show());var h=o.attr("sid");if(h==c.id)return"none"!=o.css("display")?o.hide():(n.hide(),o.show());n.length<1?(n=$(e.playOptionHtml),n.insertAfter(b),D(),n.find(".btn-play").removeClass("btn-pause"),n.removeClass("item-option-showplay"),p._totalTime.text(a.formatTime(v.song_time||v.radio_time)),n.find(".op-del").hide(),c.user&&n.find(".op-del").show(),n.find(".op-up").hide(),n.attr("sid",c.id).show(),n.attr("name",c.name),C(v.url),t=!1,p.jPlayer("setMedia",{mp3:v.url})):u?(o.remove(),n.hide(),o.length<1&&(o=$(e.playOptionHtmlOther)),o.insertAfter(b),E(b),o.removeClass("item-option-showplay"),o.find(".op-del").hide(),c.user&&o.find(".op-del").show(),o.find(".op-up").hide(),o.attr("sid",c.id).show(),o.attr("name",c.name)):(n.insertAfter(b),n.find(".btn-play").removeClass("btn-pause"),n.removeClass("item-option-showplay"),p._totalTime.text(a.formatTime(v.song_time||v.radio_time)),n.find(".op-del").hide(),c.user&&n.find(".op-del").show(),n.find(".op-up").hide(),n.attr("sid",c.id).show(),n.attr("name",c.name),C(v.url),t=!1,p.jPlayer("setMedia",{mp3:v.url}));var i=d.getUA(1);i>0&&$(".item-option-box .op-share").show()},l.initWeixinPlayer=function(b,c,d){n=$(s);var f="active-play-item",g=n.attr("sid");return g==c.id?"none"!=n.css("display")?n.hide():n.show():(n.length<1?(w=b.index(),n=$(e.playWeixinHtml),n.insertAfter(b),F(),n.find(".player-slider").show(),n.addClass("item-option-showplay"),p._totalTime.text(a.formatTime(c.song_time||c.radio_time)),n.attr("sid",c.id).show(),C(c.url),t=!1,p.jPlayer("setMedia",{mp3:c.url}),b.addClass(f),setTimeout(function(){p.jPlayer("play")},100)):(w=b.index(),n.index()<w&&(w-=1),n.insertAfter(b),n.find(".btn-play").removeClass("btn-pause"),n.addClass("item-option-showplay"),p._totalTime.text(a.formatTime(c.song_time||c.radio_time)),n.attr("sid",c.id).show(),C(c.url),t=!1,p.jPlayer("setMedia",{mp3:c.url}),b.parent().find(".item").removeClass(f),b.addClass(f),p.jPlayer("play")),void n.find(".btn-single").removeClass("btn-single"))},l.initIpPlay=function(b,c){n=$(e.playWeixinHtml),n.insertAfter(b),F(),n.find(".player-slider").show(),n.addClass("item-option-showplay"),p._totalTime.text(a.formatTime(c.song_time||c.radio_time)),n.attr("sid",c.id).show(),n.attr("name",c.name),C(c.url),n.find(".btn-single").removeClass("btn-single"),t=!1,p.jPlayer("setMedia",{mp3:c.url})},l.initIpIndexPlay=function(b,c,d){1==d&&(n=$(e.playWeixinHtml)),2==d&&(n=$(e.playBearSongHtml)),3==d&&(n=$(e.playMikaSongHtml)),4==d&&(n=$(e.playBearHtml)),5==d&&(n=$(e.playMikaHtml)),n.insertAfter(b),F(),n.find(".player-slider").show(),n.addClass("item-option-showplay"),p._totalTime.text(a.formatTime(c.song_time||c.radio_time)),n.attr("sid",c.id).show(),n.attr("name",c.name),C(c.url),(2==d||3==d)&&n.find(".btn-single").removeClass("btn-single"),t=!1,p.jPlayer("setMedia",{mp3:c.url})},l.initWeixinSongPlay=function(b,c){n=$(e.playWeixinSongHtml),n.insertAfter(b),F(),n.find(".player-slider").show(),n.addClass("item-option-showplay"),p._totalTime.text(a.formatTime(c.song_time||c.radio_time)),n.attr("sid",c.id).show(),C(c.url),n.find(".slider-container").find(".high").removeClass("btn-play"),n.find(".slider-container").find(".high").addClass("btn-song"),t=!1,p.jPlayer("setMedia",{mp3:c.url})},l.stopPlayer=function(){p&&p.jPlayer("stop"),t=!0},l.uninit=function(){w=0,n.off("click"),l.stopPlayer()}}),define("helper/singleplayer",["comm/utils","comm/zeptodata","comm/clickevent","helper/app","helper/temphtml","helper/jrange","jplayer","require","exports"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(a){var b=$(a),c=b.find(".player");c.playedTime=b.find(".played-time"),c._totalTime=b.find(".total-time"),c._slider=b.find(".slider"),c._slider.jRange({from:0,to:100,step:1,width:"68%",format:"%s",ondragchange:function(a){this.__timeout&&clearTimeout(this.__timeout),this.__timeout=setTimeout(function(){c.jPlayer("playHead",a)},100)}}),b.on("click",".btn-play",function(a){a.stopPropagation();var b=$(this);return b.hasClass("btn-pause")?c.jPlayer("pause"):c.jPlayer("play"),!1}).on("click",".play",function(){var a=$(this);return a.hasClass("pause")?(c.jPlayer("pause"),a.removeClass("pause")):(c.jPlayer("play"),a.addClass("pause")),!1})};i.initSinglePlayer=function(b,c,d){var f=$(e.playSingleHtml);f.attr("id",b),f.insertAfter(d),j("#"+b);var g=$("#"+b);g.find(".player-slider").show(),g.addClass("item-option-showplay");var h=g.find(".player");g.find(".total-time").text(a.formatTime(c.song_time||c.radio_time)),k(g,h,c.url),h.jPlayer("setMedia",{mp3:c.url})},i.initSingleWeixinPlayer=function(b,c,d){var f=$(e.playBearSongHtml);f.attr("id",b),f.insertAfter(d),j("#"+b);var g=$("#"+b);g.find(".player-slider").show(),g.addClass("item-option-showplay");var h=g.find(".player");g.find(".total-time").text(a.formatTime(c.song_time||c.radio_time)),k(g,h,c.url),f.find(".btn-single").removeClass("btn-single"),h.jPlayer("setMedia",{mp3:c.url})};var k=function(b,c,d){c.playedTime=b.find(".played-time"),c._totalTime=b.find(".total-time"),c._slider=b.find(".slider"),c.jPlayer({ready:function(a){c.jPlayer("setMedia",{mp3:d}),a.jPlayer.html.used&&a.jPlayer.html.audio.available&&(this._audio=$(this).data("jPlayer").htmlElement.audio)},progress:function(a){var b=a.jPlayer.status.remaining||0,c=(a.jPlayer.status.readyState,0),d=this;if("object"==typeof d._audio.buffered&&d._audio.buffered.length>0){if(d._audio.duration>0){for(var e=0,f=0;f<d._audio.buffered.length;f++)e+=d._audio.buffered.end(f)-d._audio.buffered.start(f);c=100*e/d._audio.duration}}else c=0;var g=100*(d._audio.duration-b)/d._audio.duration;c=g+c>=100?100:g+c,$(".load-bar").css("width",c+"%"),console.log(c)},timeupdate:function(b){var d=b.jPlayer.status,e=d.currentPercentAbsolute;c.playedTime.text(a.formatTime(d.currentTime||0));var f=c._slider.data("plugin_jRange");f&&(f.setValue(e),100==e&&(f.setValue(0),c.playedTime.text("00:00")))},play:function(a){b.find(".btn-single").length<1&&b.find(".btn-play").addClass("btn-pause")},pause:function(a){b.find(".btn-play").removeClass("btn-pause")},ended:function(a){var b=$(this).parent().parent().index(),c=$(this).parent().parent().parent().find(".music-list"),d=++b%c.length,e=c.eq(d);e.find(".btn-play").click()},smoothPlayBar:!0,supplied:"mp3",preload:"none",wmode:"window"}),c._slider};i.stopPlayer=function(){$jPlayer&&$jPlayer.jPlayer("stop")},i.uninit=function(){$playBox.off("click"),i.stopPlayer()}}),define("helper/temphtml",["require","exports"],function(a,b){"use strict";b.bodyMaskHtml='<div class="body-mask" id="J_body-mask"></div>',b.playOptionHtml=['<li class="item-option-box" id="J_jplayer-box">','<div class="player-slider">','<div class="played-time">00:00</div>','<div class="total-time">00:00</div>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>','<div class="option-bar">','<a class="item-a op-push op-btn" action="push" href="javascript:void(0);">推送给玩具</a>','<a class="item-a op-play op-btn" action="play" href="javascript:void(0);">手机试听</a>','<a class="item-a op-up op-btn" action="up" href="javascript:void(0);">点赞</a>','<a class="item-a op-add op-btn" action="add" href="javascript:void(0);">加入歌单</a>','<a class="item-a op-del op-btn" action="del" href="javascript:void(0);">删除</a>','<a class="item-a op-share op-btn" action="share" href="javascript:void(0);">分享</a>',"</div>","</li>"].join(""),b.playOptionHtmlOther=['<li class="item-option-box" id="J_jplayer-box_1">','<div class="player-slider">','<div class="played-time">00:00</div>','<div class="total-time">00:00</div>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>','<div class="option-bar">','<a class="item-a op-push op-btn" action="push" href="javascript:void(0);">推送给玩具</a>','<a class="item-a op-play op-btn" action="play" href="javascript:void(0);">手机试听</a>','<a class="item-a op-up op-btn" action="up" href="javascript:void(0);">点赞</a>','<a class="item-a op-add op-btn" action="add" href="javascript:void(0);">加入歌单</a>','<a class="item-a op-del op-btn" action="del" href="javascript:void(0);">删除</a>','<a class="item-a op-share op-btn" action="share" href="javascript:void(0);">分享</a>',"</div>","</li>"].join(""),b.playWeixinHtml=['<li class="item-option-box" id="J_jplayer-weixin">','<div class="player-slider">','<div class="played-time">00:00</div>','<div class="total-time">00:00</div>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>',"</li>"].join(""),b.playBearHtml=['<li class="item-bear-info" id="J_jplayer-bear">','<div class="player-slider">','<a class="play"></a>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>',"</li>"].join(""),b.playMikaHtml=['<li class="item-mika-info item-bear-info" id="J_jplayer-mika">','<div class="player-slider">','<a class="play"></a>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>',"</li>"].join(""),b.playSingleHtml=['<li class="item-grow-info item-bear-info">','<div class="player-slider">','<a class="play"></a>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>',"</li>"].join(""),b.playWeixinSongHtml=['<li class="item-option-box item-for-weixin" id="J_jplayer-weixin-song">','<div class="player-slider">','<div class="played-time item-for-weixin-color">00:00</div>','<div class="total-time item-for-weixin-color">00:00</div>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>',"</li>"].join(""),b.playBearSongHtml=['<li class="item-option-box item-for-bear" id="J_jplayer-bear-song">','<div class="player-slider">','<div class="played-time item-for-bear-color">00:00</div>','<div class="total-time item-for-bear-color">00:00</div>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>',"</li>"].join(""),b.playMikaSongHtml=['<li class="item-option-box item-for-mika" id="J_jplayer-mika-song">','<div class="player-slider">','<div class="played-time item-for-mika-color">00:00</div>','<div class="total-time item-for-mika-color">00:00</div>','<input class="slider" type="hidden" value="0"/>',"</div>",'<div class="player"></div>',"</li>"].join(""),b.myalbumAlertHtml=['<div class="album-alert" id="J_album-alert">','<div class="title-bar">添加到我的歌单','<a href="javascript:void(0);" class="item-a close-btn">&times;</a>',"</div>",'<ul class="list">','<li class="new-myalbum">','<a href="javascript:void(0);" class="item-a new-btn">','<div class="title text-over">新建歌单</div>',"</a>",'<div class="new-box">','<input type="text" class="left input" placeholder="歌单名称">','<a href="javascript:void(0);" type="ok" class="item-a left ok-btn">确定</a>','<a href="javascript:void(0);" type="cancel" class="item-a left cancel-btn">取消</a>',"</div>","</li>","</ul>","</div>"].join(""),b.myalbumItemHtml=["<% $.each(list, function(i, item){ %>",'<li class="item" albumid="<%=item.id %>">','<a href="javascript:void(0);" class="item-a">','<div class="img-b">','<img class="img-auto" src="<%=item.cover||"./static/images/default-cover.png" %>" alt="">',"</div>",'<div class="title text-over"><div class="name"><%=item.name %></div><span>(共<%=item.count %>首)</span></div>',"</a>","</li>","<% }) %>"].join(""),b.myrandomHtml=['<div class="album-random" id="J_random-box">','<div class="title-bar">为您选出5首随心听歌曲','<a href="javascript:void(0);" class="item-a close-btn">&times;</a>',"</div>",'<ul class="list">',"</ul>",'<li class="footer"><a class="random_left"></a>','<a class="random_right"></a></li>',"</div>"].join(""),b.myipDescription=['<div class="album-random" id="J_random-dec">','<div class="title-people">人物介绍','<a href="javascript:void(0);" class="item-a close-btn">&times;</a>',"</div>",'<ul class=" list-people">','<li><a>角色：</a><span id="name"></span></li>','<li><a>英文名：</a><span id="en_name"></span></li>','<li><a>口号：</a><span id="catchword"></span></li>','<li><a>性格特点：</a><span id="personal"></span></li>','<li><a>介绍：</a><span id="recommend"></span></li>',"</ul>","</div>"].join(""),b.mysongHtml=["<% $.each(list, function(i, item){ %>",' <li class="item" sid="<%=item.id %>"  md5="<%=item.md5 %>" size="<%=item.filesize %>" tag="<%=item.tag %>" tagval="<%=item.tagval %>" url="<%=item.url %>" type="<%=item.type %>">','<a class="checkbox">',"<span><%=i+1 %></span>","</a>",'<a class="item-a" href="javascript:void(0);">','<div class="title-box">','<div class="title text-over"><%=item.name %></div>','<div class="new"></div>',"</div>",'<div class="desc"><%=BEME.func.formatTime(item.song_time) %></div>',"</a>","</li>","<%});%>"].join("")}),define("page/albumindex",["comm/utils","comm/url","comm/request","comm/unveil","helper/app","require","exports"],function(a,b,c,d,e,f,g){"use strict";var h=function(b){if(b.classify)if(b.classify.name)e.setTitle(b.classify.name);else{var c=["其他","0-24个月","2-3岁","3-4岁","4-5岁","5岁以上"];e.setTitle(c[b.classify.age])}else e.setTitle("全部专辑");$("#song_num").html(b.count),$("#album_num").html(b.album_num);var d=a.template("J_temp-albumitem",{list:b.album});$("#album_list").html(d),$("img.lazy").unveil(),e.backScroll()},i=function(a,b){c.getLocalRequest({url:BEME.APIURL+"/albums/albumTagsPage",data:{tag_id:a,classify_age:b,page:1},successfn:function(a){e.loaded(),0===a.code&&h(a.data)}})},j=function(){$("#album_list").append('<div class="pageloading"><span>正在加载...</span></div>')},k=function(){$(".pageloading").remove()},l=function(b,d,e){j(),o=!0,c.getRequest({url:BEME.APIURL+"/albums/albumTagsPage",data:{tag_id:b,classify_age:d,page:e},successfn:function(b){if(k(),0===b.code){var c=a.template("J_temp-albumitem",{list:b.data.album});$("#album_list").append(c),$("img.lazy").unveil()}o=!1}})},m=0,n=1,o=!1,p=function(a,b){window.onscroll=function(){var c=document.body.scrollTop,d=document.body.clientHeight,e=document.body.scrollHeight;30>e-(c+d)&&e>m&&!o&&(n+=1,m=e,l(a,b,n))}};g.init=function(){var c=b.getParams(),d=["其他","0-24个月","2-3岁","3-4岁","4-5岁","5岁以上"];e.setTitle(d[c.age]),$(".back-btn").show(),a.headerMenu(),$("#myplay").show(),e.showHeader(),i(c.id,c.age),m=0,n=1,p(c.id,c.age)},g.uninit=function(){window.onscroll=null}}),define("page/albuminfo",["comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","helper/app","helper/playerbar","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l=function(b){var c=$("#J_album-box"),d=f.getUA(1);d>0&&$("#J_album-box .share").show().css("display","inline-block"),c.find(".img-cover").attr("imgsrc",a.imageUrl(b.album.url)),c.find(".title").text(b.album.name),c.find(".desc").text(b.album.description),$("#J_songnum").text(b.songs.length),$("#num").text(b.album.cnt),$("#collection_num").text(b.album.collection_num);var e="";$.each(b.tags,function(b,c){var d=a.getRandColor();e+='<li style="color:'+d+";border-color:"+d+'">'+c.name+"</li>"}),c.find(".tags").html(e),$.each(b.songs,function(a,c){c.tagval=b.album.id}),e=a.template("J_temp-item",{list:b.songs}),$("#J_song-box").html(e),$.each(b.songs,function(a,b){b._type="album",b.tag="album",k[b.id]=b}),f.showImage(),f.backScroll()},m=function(a,b){c.getRequest({url:BEME.APIURL+"/albums/collectionAlbum",data:{album_id:a,type:"album",action:b},xhrFields:{withCredentials:!0},type:"POST",successfn:function(a){if(0===a.code){var c=$("#J_album-box .favorites");"add"===b?(c.addClass("favoritesed"),$("#J_album-box #content").text("已收藏"),f.showTips("收藏成功！")):(c.removeClass("favoritesed"),$("#J_album-box #content").text("收藏"),f.showTips("已取消收藏！")),$("#collection_num").text(a.data.count)}}})},n=function(a){c.getRequest({url:BEME.APIURL+"/albums/albumList?id="+a,successfn:function(a){f.loaded(),0===a.code&&l(a.data)}}),c.getRequest({url:BEME.APIURL+"/albums/iscollection?type=album&album_id="+a,successfn:function(a){0===a.code&&1===a.data&&($("#J_album-box .favorites").addClass("favoritesed"),$("#J_album-box #content").text("已收藏"))}})},o=function(a){$("#J_album-desc").on("click",function(){var a=$(this);a.attr("block")?(a.css("display","-webkit-box"),a.attr("block",null)):(a.css("display","block"),a.attr("block",1))}),$("#J_album-box .favorites").on("click",function(){var b=$(this),c={};c.content="确定不再收藏该专辑？",b.hasClass("favoritesed")?f.showAlert(c,function(){m(a,"del")}):m(a,"add")}),$("#J_song-box").on("click",".item .item-a",function(){e.pushSong(this)}),$("#J_song-box").on("click",".item-play",function(){e.audition(k,this);
}),$(".caction-box").on("click",".play-btn",function(){e.pushAllSong(this)}),$("#play_edit").on("click",function(){e.playEdit("caction-box",this)}),$("#J_song-box").on("click",".checkbox",function(){}),$("#J_album-box .share").on("click",function(){e.shareToWeixin(a,"album",a)}),e.initSelectAllEvent("caction-box")};j.init=function(){f.setTitle("专辑"),$(".back-btn").show(),a.headerMenu(),$("#myplay").show();var c=b.getParams();f.showHeader(),n(c.id),o(c.id)},j.uninit=function(){$("#J_album-desc,.select-all, #J_song-box, #J_album-box .favorites").off("click")}}),define("page/albummain",["comm/utils","comm/url","comm/request","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g){"use strict";var h=function(){d.loaded(),d.backScroll()},i=function(){};g.init=function(){d.setTitle("专辑分类"),$(".back-btn").show(),a.headerMenu(),$("#myplay").show(),d.showHeader(),h(),i()},g.uninit=function(){}}),define("page/albumweixin",["jweixin","comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","helper/app","helper/playerbar","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={},m={title:"这里是标题",desc:"这里是描述语言",link:location.href,imgUrl:"专辑图片放进来"},n=function(a){var c=$("#J_album-box");c.find(".img-cover").attr("imgsrc",b.imageUrl(a.url)),m.desc=a.description,m.imgUrl=b.imageUrl(a.url),c.find(".desc").text(a.description),q(a.type,a.album_id)},o=function(c,d){var e=$("#J_album-box");if(1==c&&(e.find(".title").text(d.album.name),m.title=d.album.name),2==c&&(e.find(".title").text(d.topic.name),m.title=d.topic.name),3==c&&(e.find(".title").text(d.station.name),m.title=d.station.name),d.tags){var f="";$.each(d.tags,function(a,c){var d=b.getRandColor();f+='<li style="color:'+d+";border-color:"+d+'">'+c.name+"</li>"}),e.find(".tags").html(f)}3==c?(f=b.template("J_temp-item",{list:d.radios}),$("#J_song-box").html(f)):(f=b.template("J_temp-item",{list:d.songs}),$("#J_song-box").html(f),$.each(d.songs,function(a,b){l[b.id]=b})),g.showImage(),a.onMenuShareTimeline(m),a.onMenuShareAppMessage(m),a.onMenuShareQQ(m),a.onMenuShareWeibo(m),a.onMenuShareQZone(m)},p=function(a){d.getRequest({url:BEME.APIURL+"/weixin/getWeixin?id="+a,successfn:function(a){g.loaded(),0===a.code&&n(a.data)}})},q=function(a,b){"album"==a&&d.getRequest({url:BEME.APIURL+"/albums/albumList?id="+b,successfn:function(a){g.loaded(),0===a.code&&o(1,a.data)}}),"topic"==a&&d.getRequest({url:BEME.APIURL+"/albums/topicList?id="+b,successfn:function(a){g.loaded(),0===a.code&&o(2,a.data)}}),"station"==a&&d.getRequest({url:BEME.APIURL+"/station/radiolist?id="+b,successfn:function(a){g.loaded(),0===a.code&&o(3,a.data)}})},r=function(a){$("#J_album-desc").on("click",function(){var a=$(this);a.attr("block")?(a.css("display","-webkit-box"),a.attr("block",null)):(a.css("display","block"),a.attr("block",1))}),$("#J_song-box").on("click",".item",function(){var a=$(this),b=a.attr("sid");h.initWeixinPlayer(a,l[+b])})};k.init=function(){g.setTitle("专辑");var a=c.getParams();g.showHeader(),p(a.id),r(a.id)},k.uninit=function(){$("#J_album-desc,.select-all, #J_song-box, #J_album-box .favorites").off("click")}}),define("page/bemebearindex",["comm/utils","comm/url","helper/playerbar","comm/request","comm/clickevent","helper/app","helper/temphtml","helper/jrange","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={title:"贝美童趣馆",desc:"小囧熊英文乐园",link:location.href,imgUrl:"专辑图片放进来"},l=function(b,c){var d=$(".bear-page");d.find(".banner .img-cover").attr("src",b.url);var e=f.getUA(0);1==e&&($(".main-header").show(),$(".main-header .back-btn").show(),$("#J_wrapper").css("padding","1.1rem 0 0 0"),$(".sub").hide());var g=f.getUA(1);if(e>1&&g>0&&$(".share_weixin").show(),1==c&&($(".share_weixin").hide(),$(".push-song").hide()),k.imgUrl=b.url,b.album){$.each(b.album,function(a,b){1==c?b.id="#!m=weixin&id="+b.id+"&type=album":b.id="#!m=albuminfo&id="+b.id});var h=a.template("J_temp-item-album",{list:b.album});$("#album_list").html(h)}if(1==c)var c=i(["page/weixin"],function(a){a.getWeixinConfig(k)});f.backScroll()},m=function(a,b,c){$.each(a.list,function(a,b){b.content="第"+b.sequence+"期："+b.sub_name,b.question=j.changeDate(b.update_time),1==c&&(b.id=b.id+"&weixin=1")});var d="";d=j.changeDate(a.list[0].update_time)+"最新期——"+a.list[0].sub_name,$("#new-title").text(d),$(".title-box").attr("value",a.list[0].id),n(a.list.slice(0,5).reverse(),c);for(var e=parseInt(a.count/10),f=(a.count%10,""),g=0;e>g;g++)f+=g/3==0?'<li><a class="selected" style="margin:0;" value='+(g+1)+" type="+b+">第"+g+"1-"+(g+1)+"0期</a></li>":g/3==2?'<li><a class="selected" style="margin:0;float:right;" value='+(g+1)+" type="+b+">第"+g+"1-"+(g+1)+"0期</a></li>":'<li><a  class="selected" style="margin:0;" value='+(g+1)+" type="+b+">第"+g+"1-"+(g+1)+"0期</a></li>";f+='<li><a class="selected" style="margin:0;" value='+(g+1)+" type="+b+">第"+(10*e+1)+"-"+a.count+"期</a></li>",$(".page-list").html(f),$(".page-list li").on("click",function(){var a=$(this).find("a").attr("value"),b=$(this).find("a").attr("type");$(this).parent().find("a").addClass("selected"),$(this).find("a").removeClass("selected"),o(b,a,c)})},n=function(b,c){$.each(b,function(a,b){b.content="第"+b.sequence+"期："+b.sub_name,b.question=j.changeDate(b.update_time),1==c&&(b.id=b.id+"&weixin=1")});var d=a.template("J_temp-item",{list:b.reverse()});$("#J_list-box").html(d)},o=function(a,b,c){d.getRequest({url:BEME.APIURL+"/ip/ipList",data:{type:a,page:b},successfn:function(a){f.loaded(),0===a.code&&n(a.data.list,c)}})},p=function(a,b){d.getLocalRequest({url:BEME.APIURL+"/ip/ipClass?type="+a,successfn:function(a){f.loaded(),0===a.code&&l(a.data,b)}}),d.getLocalRequest({url:BEME.APIURL+"/ip/ipList",data:{type:a},successfn:function(c){f.loaded(),0===c.code&&m(c.data,a,b)}})};j.changeDate=function(a){var b=new Date(a),c=b.getMonth()+1+"月"+b.getDate()+"日 ";return c};var q=function(a){$("#play-music").on("click",".music-list .push-song",function(){e.pushSong($(this).parent())}),$(".title-box").on("click",function(){var a=$(this).attr("value"),b="?m=bemebearinfo&id="+a+"&type=2";window.location.href=b}),$(".play-other").on("click",".show-list",function(){var a=$("#J_list-box").find(".list");a.hasClass("hide-all")?(a.removeClass("hide-all"),a.addClass("show-all"),$(".play-other .show-list").removeClass("show-list-down"),$(".play-other .show-list").addClass("show-list-up")):(a.removeClass("show-all"),a.addClass("hide-all"),$(".play-other .show-list").addClass("show-list-down"),$(".play-other .show-list").removeClass("show-list-up"))}),$(".share_weixin").on("click",function(){e.shareToWeixin(a,"ip","ipindex")}),$(".show-preson").on("click",function(){$(".show-preson").hide(),$(".show-hide-all").show()}),$(".hide-preson").on("click",function(){$(".show-preson").show(),$(".show-hide-all").hide()})};j.init=function(){f.setTitle("小囧熊英文乐园");var a=b.getParams();p(a.type,a.weixin),f.hideAllBox(),q(a.type)},j.uninit=function(){$("#play-music").off("click")}}),define("page/bemebearinfo",["comm/utils","comm/url","helper/playerbar","comm/request","page/bemeipindex","comm/clickevent","helper/app","helper/temphtml","helper/jrange","require","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={},m={title:"贝美童趣馆",desc:"小囧熊英文乐园",link:location.href,imgUrl:"专辑图片放进来"},n=function(b,d){var f=$(".bear-info-page"),h=a.template("J_temp-item-song",{list:b.song});$("#play-music").html(h);var i=g.getUA(0);1==i&&($(".main-header").show(),$(".main-header .back-btn").show(),$("#J_wrapper").css("padding","1.1rem 0 0 0"),$(".sub").hide()),1==d&&($(".share_weixin").hide(),$(".push-song").hide());var k=g.getUA(1);i>1&&k>0&&$(".share_weixin").show(),f.find(".play-video").html(b.video_url),f.find(".task-text").html(b.place_hello),f.find(".single-word").html(b.description),f.find(".sentence-word").html(b.answer),f.find(".play-video").find("video").attr("poster",b.url);var l="";l="第"+b.sequence+"期："+b.sub_name;var n=e.changeDate(b.update_time)+"更新";$("#new-title").text(l),$("#new-day").text(n),m.desc="《小囧熊英文乐园》"+b.name,m.imgUrl=b.url;var o=f.find(" .music-list");if(1==d?(c.initIpIndexPlay(o,b.song[0],2),$(".push-bear-song").hide()):c.initIpIndexPlay(o,b.song[0],4),1==d)var d=j(["page/weixin"],function(a){a.getWeixinConfig(m)});g.backScroll()},o=function(b,c,d,e){if(e){$(".more-all").show(),$(".more-all").removeClass("showed"),$(".more-all").text("点击收起"),$.each(b.list,function(a,b){c==b.id&&(b.isCurrent=1),1==d&&(b.id=b.id+"&weixin=1")});var f=a.template("J_temp-item",{list:b.list.reverse()});$(".bear-table").html(f)}else{b.count>24?($(".more-all").show(),$(".more-all").addClass("showed"),$(".more-all").text("查看全部"),b.list=b.list.slice(0,24)):$(".more-all").hide(),$.each(b.list,function(a,b){c==b.id&&(b.isCurrent=1),1==d&&(b.id=b.id+"&weixin=1")});var f=a.template("J_temp-item",{list:b.list.reverse()});$(".bear-table").html(f)}},p=function(b,c){if(b){if(1==c){var d=a.template("J_temp-item-weixin",{list:b});$("#song-list-box").html(d)}else{var d=a.template("J_temp-item-somg",{list:b});$("#song-list-box").html(d)}$.each(b,function(a,b){b._type="album",l[b.id]=b})}},q=function(a,b,c){d.getRequest({url:BEME.APIURL+"/ip/ipInfo?id="+a,successfn:function(a){g.loaded(),0===a.code&&n(a.data,c)}}),d.getRequest({url:BEME.APIURL+"/ip/ipList",data:{type:b},successfn:function(b){g.loaded(),0===b.code&&o(b.data,a,c,!1)}}),d.getRequest({url:BEME.APIURL+"/ip/ipSongList",data:{type:b},successfn:function(a){g.loaded(),0===a.code&&p(a.data,c)}}),1==c?$(".back-index").attr("href","?m=bemebearindex&weixin=1&type="+b):$(".back-index").attr("href","?m=bemebearindex&type="+b)},r=function(a,b){var c=2;d.getRequest({url:BEME.APIURL+"/ip/ipList",data:{type:c},successfn:function(c){g.loaded(),0===c.code&&o(c.data,a,weixin,b)}})},s=function(a,b){$("#play-music").on("click",".music-list .push-bear-song",function(){f.pushSong($(this))}),window.onscroll=function(){$(".title-box").offset().top,$("#bear-song-list").offset().top,$(window).scrollTop()},$(".title-box").on("click",function(){var a=$(this).attr("value"),b="?m=bemeipinfo&id="+a+"&type=1";window.location.href=b}),$("#song-list-box").on("click",".item-play",function(){f.audition(l,this)}),1==b&&$("#song-list-box").on("click",".item",function(){var a=$(this),b=a.attr("sid");c.initWeixinPlayer(a,l[+b])}),$(".more-all").on("click",function(){var b=$(this).hasClass("showed");b?r(a,!0):r(a,!1)}),$(".share_weixin").on("click",function(){f.shareToWeixin(a,"ip","ipinfo",2)}),$(".bear-table").on("click","td",function(){var a=$(this).attr("href");window.location.href=a})};k.init=function(){g.setTitle("小囧熊英文乐园");var a=b.getParams();q(a.id,a.type,a.weixin),g.hideAllBox(),s(a.id,a.weixin)},k.uninit=function(){$("#play-music").off("click"),window.onscroll=null}}),define("page/bemeipindex",["comm/utils","comm/url","helper/playerbar","comm/request","comm/clickevent","helper/app","helper/temphtml","helper/jrange","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={title:"贝美童趣馆",desc:"超级飞侠故事屋",link:location.href,imgUrl:"专辑图片放进来"},l=function(b,d){var e=$(".ip-page");e.find(".banner .img-cover").attr("src",b.url);var g=a.template("J_temp-item-song",{list:b.song});$(".play-music").html(g);var h=f.getUA(0);1==h&&($(".main-header").show(),$(".main-header .back-btn").show(),$("#J_wrapper").css("padding","1.1rem 0 0 0"),$(".sub").hide(),$(".share_weixin").hide()),1==d&&($(".sub").hide(),$(".share_weixin").hide(),$(".push-song").hide());var j=f.getUA(1);h>1&&j>0&&$(".share_weixin").show(),k.imgUrl=b.url;var l=e.find(" .music-list");c.initIpPlay(l,b.song[0]);var g=a.template("J_temp-item-person",{list:b.planes});if($("#person_list").html(g),1==d)var d=i(["page/weixin"],function(a){a.getWeixinConfig(k)});f.backScroll()},m=function(b,c){$.each(b,function(a,b){b.content="第"+b.sequence+"集("+b.update_time.replace(/\-/g,"")+")："+b.sub_name,1==c&&(b.id=b.id+"&weixin=1")});var d="";d=j.changeDate(b[0].update_time)+"刚刚更新："+b[0].sub_name,$("#new-title").text(d),$(".title-box").attr("value",b[0].id);var e=a.template("J_temp-item",{list:b});$("#J_list-box").html(e)},n=function(a,b){d.getLocalRequest({url:BEME.APIURL+"/ip/ipClass?type="+a,successfn:function(a){f.loaded(),0===a.code&&l(a.data,b)}}),d.getLocalRequest({url:BEME.APIURL+"/ip/ipList?type="+a,successfn:function(a){f.loaded(),0===a.code&&m(a.data.list,b)}})};j.changeDate=function(a){var b=new Date(a),c=b.getMonth()+1+"月"+b.getDate()+"日 ";return c},j.showDescriptInfo=function(a){var b=$("#J_random-dec");if(b.length<1)$(document.body).append(g.myipDescription),$("#J_random-dec").on("click",".close-btn",function(){$("#J_random-dec, #J_body-mask").hide(),f.hideMask()});else{var c=$("#J_body-mask").css("display");if("none"!=c)return}var d=["name","en_name","feature","catchword","personal","recommend"];$.each(d,function(b,c){$("#"+c).text(a[c])}),f.showMask(),b.show()};var o=function(a){d.getRequest({url:BEME.APIURL+"/ip/personInfo?id="+a,successfn:function(a){f.loaded(),0===a.code&&j.showDescriptInfo(a.data)}})},p=function(a,b){$("#play-music").on("click",".music-list .push-song",function(){e.pushSong($(this).parent())}),$("#person_list").on("click",".item",function(){var a=$(this).attr("person_id");o(a)}),$(".title-box").on("click",function(){var c=$(this).attr("value"),d="?m=bemeipinfo&id="+c+"&type="+a;1==b&&(d="?m=bemeipinfo&weixin=1&id="+c+"&type="+a),window.location.href=d}),$(".share_weixin").on("click",function(){e.shareToWeixin(a,"ip","ipindex")})};j.init=function(){f.setTitle("超级飞侠故事屋");var a=b.getParams();n(a.type,a.weixin),f.hideAllBox(),p(a.type,a.weixin)},j.uninit=function(){$("#play-music").off("click")}}),define("page/bemeipinfo",["comm/utils","comm/url","comm/clickevent","helper/playerbar","page/bemeipindex","comm/request","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l={title:"贝美童趣馆",desc:"超级飞侠故事屋",link:location.href,imgUrl:"专辑图片放进来"},m=function(b,c){var f=g.getUA(0),h=$(".ipinfo-page");g.setTitle(b.name);var j=a.template("J_temp-item-song",{list:b.song});$(".play-music").html(j),1==f&&($(".main-header").show(),$(".main-header .back-btn").show(),$("#J_wrapper").css("padding","1.1rem 0 0 0"),$(".sub").hide(),$(".share_weixin").hide());var m=g.getUA(1);f>1&&m>0&&$(".share_weixin").show(),1==c&&($(".sub").hide(),$(".share_weixin").hide(),$(".push-song").hide()),h.find(".img-cover").attr("src",b.url),h.find(".sub-title").text(b.sub_name),h.find(".description_ip").text(b.description),h.find(".place").text(b.place),h.find(".hello").text(b.place_hello),h.find(".question").text(b.question),h.find(".answer_content").text(b.answer),h.find(".play-video").html(b.video_url),l.imgUrl=b.url,h.find(".play-video").find("video").attr("poster",b.url),1==c&&($(".share_weixin").hide(),$(".push-song").hide()),$(".sub-day").text(e.changeDate(b.update_time)+"更新");var j=a.template("J_temp-personitem",{list:b.planes});$("#J_plane-box").html(j),$.each(b.song,function(a,b){k[b.id]=b});var n=h.find(" .music-list");if(d.initIpPlay(n,b.song[0]),1==c)var c=i(["page/weixin"],function(a){a.getWeixinConfig(l)});g.backScroll()},n=function(b,c){$.each(b,function(a,b){b.content="第"+b.sequence+"集("+b.update_time.replace(/\-/g,"")+")："+b.sub_name,1==c&&(b.id=b.id+"&weixin=1")});var d=a.template("J_temp-item",{list:b});$("#J_list-box_children").html(d)},o=function(a,b,c){f.getRequest({url:BEME.APIURL+"/ip/ipInfo?id="+a,successfn:function(a){g.loaded(),0===a.code&&m(a.data,c)}}),f.getRequest({url:BEME.APIURL+"/ip/ipList?type="+b,successfn:function(a){g.loaded(),0===a.code&&n(a.data.list,c)}}),1==c?$(".back-index").attr("href","?m=bemeipindex&weixin=1&type="+b):$(".back-index").attr("href","?m=bemeipindex&type="+b)},p=function(a){f.getRequest({url:BEME.APIURL+"/ip/personInfo?id="+a,successfn:function(a){g.loaded(),0===a.code&&e.showDescriptInfo(a.data)}})},q=function(a){$("#play-music").on("click",".music-list .push-song",function(){c.pushSong($(this).parent())}),$("#J_plane-box").on("click",".item-a",function(){var a=$(this).attr("person_id");p(a)}),$("#J_list-box_children").on("click",".item",function(){var a=$(this).find("a").attr("href_url");try{window.location.href=a}catch(b){alert(b)}}),$(".share_weixin").on("click",function(){c.shareToWeixin(a,"ip","ipinfo",1)})};j.init=function(){g.setTitle("贝美童趣馆");var a=b.getParams();o(a.id,a.type,a.weixin),g.hideAllBox(),q(a.id)},j.uninit=function(){$("#play-music").off("click")}}),define("page/bememikaindex",["comm/utils","comm/url","helper/playerbar","comm/request","comm/clickevent","helper/app","require","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i={title:"贝美童趣馆",desc:"米卡分龄教育",link:location.href,imgUrl:"专辑图片放进来"},j=function(b,c){var d=$(".mika-info-page");d.find(".banner .img-cover").attr("src",b.url);var e=f.getUA(0);1==e&&($(".main-header").show(),$(".main-header .back-btn").show(),$("#J_wrapper").css("padding","1.1rem 0 0 0"));var h=f.getUA(1);e>1&&h>0&&$(".share_weixin").show(),1==c&&$(".share_weixin").hide(),i.imgUrl=b.url;var j=a.template("J_temp-item-classify",{list:b.classifys});if($(".classify-list").html(j),1==c)var c=g(["page/weixin"],function(a){a.getWeixinConfig(i)});f.backScroll()},k=function(a,b,c){l(a.list,c);for(var d=parseInt(a.count/10),e=a.count%10,f="",g=0;d>g;g++)f+=g/3==0?'<li><a  style="margin:0;" value='+(g+1)+" type=3>第"+g+"1-"+(g+1)+"0期</a></li>":g/3==2?'<li><a style="margin:0;" value='+(g+1)+" type=3>第"+g+"1-"+(g+1)+"0期</a></li>":'<li><a  style="margin:0;" value='+(g+1)+" type=3>第"+g+"1-"+(g+1)+"0期</a></li>";0!=e&&(f+='<li><a style="margin:0;" value='+(g+1)+" type=3>第"+(10*d+1)+"-"+a.count+"期</a></li>"),$(".page-list").html(f),$(".page-list li").on("click",function(){var a=$(this).find("a").attr("value"),b=$(this).find("a").attr("type");$(this).parent().find("a").removeClass("selected"),$(this).find("a").addClass("selected"),m(b,a,c)})},l=function(b,c){$.each(b,function(a,b){b.content=b.sub_name,b.question=h.changeDate(b.update_time),1==c&&(b.id=b.id+"&weixin=1")});var d=a.template("J_temp-item",{list:b});$("#J_list-box").html(d)},m=function(a,b,c){d.getRequest({url:BEME.APIURL+"/ip/mikaPage",data:{type:a,page:b},successfn:function(a){f.loaded(),0===a.code&&l(a.data.list.reverse(),c)}})},n=function(a,b){d.getLocalRequest({url:BEME.APIURL+"/ip/mikaIndex?type="+a,successfn:function(a){f.loaded(),0===a.code&&j(a.data,b)}}),d.getLocalRequest({url:BEME.APIURL+"/ip/mikaPage",data:{page:0},successfn:function(a){f.loaded(),0===a.code&&k(a.data,b,!1)}})};h.changeDate=function(a){var b=new Date(a),c=b.getMonth()+1+"月"+b.getDate()+"日 ";return c};var o=function(a){$(".share_weixin").on("click",function(){e.shareToWeixin(a,"ip","ipindex")})};h.init=function(){f.setTitle("米卡分龄教育");var a=b.getParams();n(a.type,a.weixin),f.hideAllBox(),o(a.type)},h.uninit=function(){$("#play-music").off("click")}}),define("page/bememikainfo",["comm/utils","comm/url","helper/playerbar","page/bemeipindex","comm/request","comm/clickevent","helper/app","require","exports"],function(a,b,c,d,e,f,g,h,i){"use strict";var j={title:"贝美童趣馆",desc:"米卡分龄教育",link:location.href,imgUrl:"专辑图片放进来"},k=function(b,e){var f=$(".mika-info-page"),i=a.template("J_temp-mika-song",{list:b.song});$("#play-music").html(i);var k=g.getUA(0);1==k&&($(".main-header").show(),$(".main-header .back-btn").show(),$("#J_wrapper").css("padding","1.1rem 0 0 0"),$(".sub").hide()),1==e&&($(".share_weixin").hide(),$(".push-song").hide());var l=g.getUA(1);k>1&&l>0&&$(".share_weixin").show(),f.find(".problem").html(b.question),f.find(".answer").html(b.answer);var m="";m="第"+b.sequence+"期："+b.sub_name;var n=d.changeDate(b.update_time)+"更新";$("#new-title").text(m),$("#new-day").text(n),j.desc="《米卡分龄教育》"+b.name,j.imgUrl=b.url;var o=f.find(" .music-list");if(1==e?(c.initIpIndexPlay(o,b.song[0],3),$(".push-mika-song").hide()):c.initIpIndexPlay(o,b.song[0],5),1==e)var e=h(["page/weixin"],function(a){a.getWeixinConfig(j)});f.find(".play-video").html(b.video_url),f.find(".play-video").find("video").attr("poster",b.url),g.backScroll()},l=function(a,b,c,d){$.each(a.list,function(a,b){b.content="第"+b.sequence+"期："+b.sub_name,b.question=i.changeDate(b.update_time),1==c&&(b.id=b.id+"&weixin=1")}),m(a.list,c);for(var e=parseInt(a.count/10),f=a.count%10,g="",h=0;e>h;h++)g+=h/3==0?'<li><a  style="margin:0;" value='+(h+1)+" type=3>第"+h+"1-"+(h+1)+"0期</a></li>":h/3==2?'<li><a style="margin:0;" value='+(h+1)+" type=3>第"+h+"1-"+(h+1)+"0期</a></li>":'<li><a  style="margin:0;" value='+(h+1)+" type=3>第"+h+"1-"+(h+1)+"0期</a></li>";0!=f&&(g+='<li><a style="margin:0;" value='+(h+1)+" type=3>第"+(10*e+1)+"-"+a.count+"期</a></li>"),$(".page-list").html(g),$(".page-list li").on("click",function(){var a=$(this).find("a").attr("value"),b=$(this).find("a").attr("type");$(this).parent().find("a").removeClass("selected"),$(this).find("a").addClass("selected"),n(b,a,c)})},m=function(b,c){$.each(b,function(a,b){b.content="第"+b.sequence+"期："+b.sub_name+"（"+b.classify_name+"）",b.question=i.changeDate(b.update_time),1==c&&(b.id=b.id+"&weixin=1")});var d=a.template("J_temp-item",{list:b});$("#J_list-box").html(d)};i.changeDate=function(a){var b=new Date(a),c=b.getMonth()+1+"月"+b.getDate()+"日 ";return c};var n=function(a,b,c){e.getRequest({url:BEME.APIURL+"/ip/mikaPage",data:{type:a,page:b},successfn:function(a){g.loaded(),0===a.code&&m(a.data.list.reverse(),c)}})},o=function(a,b,c){e.getRequest({url:BEME.APIURL+"/ip/mikaPage",data:{page:0},successfn:function(b){g.loaded(),0===b.code&&l(b.data,a,c,!1)}}),e.getRequest({url:BEME.APIURL+"/ip/mikaInfo?id="+a,successfn:function(a){g.loaded(),0===a.code&&k(a.data,c)}}),1==c?$(".back-index").attr("href","?m=bememikaindex&weixin=1&type="+b):$(".back-index").attr("href","?m=bememikaindex&type="+b)},p=function(a,b){$("#play-music").on("click",".music-list .push-mika-song",function(){f.pushSong($(this))}),window.onscroll=function(){$(".title-box").offset().top,$("#bear-song-list").offset().top,$(window).scrollTop()},$(".share_weixin").on("click",function(){f.shareToWeixin(a,"ip","ipinfo",3)}),$(".bear-table").on("click","td",function(){var a=$(this).attr("href");window.location.href=a})};i.init=function(){g.setTitle("米卡分龄教育");var a=b.getParams();o(a.id,a.type,a.weixin),g.hideAllBox(),p(a.id,a.weixin)},i.uninit=function(){$("#play-music").off("click"),window.onscroll=null}}),define("page/bememikalist",["comm/utils","comm/url","comm/request","helper/app","require","exports"],function(a,b,c,d,e,f){"use strict";var g=function(b,c){d.setTitle(b.name);$(".mika-info-page");$.each(b.list,function(a,b){b.content="第"+b.sequence+"期："+b.sub_name,b.question=f.changeDate(b.update_time),1==c&&(b.id=b.id+"&weixin=1")});var e=a.template("J_temp-item-class",{list:b.list});$("#mika-classlist").html(e);var g=d.getUA(0);1==g&&($(".main-header").show(),$(".main-header .back-btn").show(),$("#J_wrapper").css("padding","1.1rem 0 0 0"),$(".sub").hide());var h=$("#mika-classlist").find(".mika_list_banner");$.each(h,function(a,b){var c=$(b).attr("img_url");""!=c&&$(b).css("background-image","url("+c+")")}),d.backScroll()},h=function(a,b){c.getRequest({url:BEME.APIURL+"/ip/mikaList?id="+a,successfn:function(a){d.loaded(),0===a.code&&g(a.data,b)}})};f.changeDate=function(a){var b=new Date(a),c=b.getMonth()+1+"月"+b.getDate()+"日 ";return c};var i=function(a,b){};f.init=function(){d.setTitle("米卡分龄教育");var a=b.getParams();h(a.id,a.weixin),d.hideAllBox(),i(a.id,a.weixin)},f.uninit=function(){}}),define("page/book",["comm/utils","comm/pushsong","comm/url","comm/request","jplayer","helper/app","require","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i=[],j=[],k=[],l=!1,m=!1,n=0,o=0,p=0,q=!0,r=0,s=0,t=$("#player"),u={title:"贝美时光说-成长场景",desc:"小囧熊英文乐园",link:location.href,imgUrl:"专辑图片放进来"},v=function(b,c){if(s=$(window).height(),r=$(window).width()-50,$(document.body).css("height",s),$(document.body).css("overflow","hidden"),$.each(b.song,function(a,b){j.push(b.img_url),b.url?k.push(b.url):k.push(1),i.push(b)}),$(".footer_blank").hide(),u.title=b.name,u.desc=b.description,u.imgUrl=b.url,f.showShare(),p=b.screenModel,o=b.song.length,1==p?($(".show-warning").show(),$(".img-block").addClass("h-block"),$(document.body).css("height",s),$("#J_slidebox").removeClass("hslide-box"),$("#J_btnsbox").removeClass("btns-box-in btns-box-out").css("zoom"),$("#J_btnsbox").addClass("btns-box-in"),$("#J_btnsbox").addClass("btns-h"),90==window.orientation&&($(".show-warning").hide(),$(".img-block").removeClass("h-block"),$(document.body).css("height",s),$("#J_slidebox").addClass("hslide-box"),$("#J_btnsbox").removeClass("btns-h"),$("#book-img").addClass("imgClass"),w(4e3))):($(".show-warning").hide(),$(".img-block").removeClass("h-block"),$("#J_slidebox").removeClass("hslide-box"),$("#J_btnsbox").addClass("btns-h")),a.loadImages(j,function(a,b){if(!a){var c=100/j.length,d=Math.floor(b*c+Math.random()*c);return d>100&&(d=100),$("#J_loadingbox .text span").text(d+"%")}l=!0,z()}),$("#book-img").attr("src",j[0]),q=!1,$("#J_slidebox .left").removeClass("leftin").css("zoom"),$("#J_slidebox .right").removeClass("rightin").css("zoom"),$("#J_slidebox").show(),$("#J_slidebox .left").addClass("leftin").css("zoom"),$("#J_slidebox .right").addClass("rightin").css("zoom"),$("#J_slidebox .left").addAnim("leftin"),m=!0,$("#J_btnsbox").hide(),1==c){$("#J_btnsbox").remove(),$(".footer-weixin").show();var c=g(["page/weixin"],function(a){a.getWeixinConfig(u)})}},w=function(a){var b=$("#J_btnsbox");b.removeClass("btns-box-in btns-box-out").css("zoom"),b.addClass("btns-box-in"),setTimeout(function(){b.removeClass("btns-box-in btns-box-out").css("zoom"),b.addClass("btns-box-out")},a)},x=function(a){t.jPlayer({ready:function(a){$(this).jPlayer("setMedia",{mp3:k[n]}).jPlayer("play")},supplied:"mp3",preload:"auto",wmode:"window"}),t.jPlayer("setMedia",{mp3:a}),t.jPlayer("play"),$("#J_btnsbox").show()},y=function(a,b){d.getRequest({url:BEME.APIURL+"/book/bookInfo?id="+a,successfn:function(a){f.loaded(),0===a.code&&v(a.data,b)}})},z=function(){l&&($("#J_loadingbox").hide(),$(".book-page").show(),1!=k[n]&&x(k[n]))},A=function(a){m=!1;var b=$.Deferred();return 0>a&&(a=totalPage+a),$("#J_slidebox .left").removeClass("leftin"),$("#J_slidebox .right").removeClass("rightin"),setTimeout(function(){b.resolve()},0),b.promise()},B=function(){var a=j[n];$("#book-img").attr("src",a),$("#J_slidebox .left").removeClass("leftin").css("zoom"),$("#J_slidebox .right").removeClass("rightin").css("zoom"),$("#J_slidebox").show(),$("#J_slidebox .left").addAnim("leftin"),$("#J_slidebox .right").addAnim("rightin").done(function(){m=!0})},C=function(a){if(!m)return!1;m=!1;var b=n;return n+=a,0>n?n+=o:n%=o,1!=k[n]?x(k[n]):($("#player").jPlayer("stop"),$("#J_btnsbox").hide()),A(b).done(function(){B()}),!1},D=function(c,d){$(window).bind("orientationchange",function(a){1==p?($(".show-warning").show(),0==window.orientation?($(".img-block").addClass("h-block"),$(document.body).css("height",s),$("#J_slidebox").removeClass("hslide-box"),$("#J_btnsbox").removeClass("btns-box-in btns-box-out").css("zoom"),$("#J_btnsbox").addClass("btns-box-in"),$("#J_btnsbox").addClass("btns-h"),$("#book-img").removeClass("imgClass")):($(".show-warning").hide(),$(".img-block").removeClass("h-block"),$(document.body).css("height",r),$("#J_slidebox").addClass("hslide-box"),$("#J_btnsbox").removeClass("btns-h"),$("#book-img").addClass("imgClass"),w(4e3))):($(".show-warning").hide(),$(".img-block").removeClass("h-block"),$("#J_slidebox").removeClass("hslide-box"))}),$("#J_slidebox .sbtn").on("touchstart",function(){var a=1;$(this).hasClass("left")&&(a=-1),C(a)}),$(".img-block").on("click",function(){1==p&&90==window.orientation&&($("#J_btnsbox").hasClass("btns-box-out")?($("#J_btnsbox").removeClass("btns-box-in btns-box-out").css("zoom"),$("#J_btnsbox").addClass("btns-box-in")):w(500))}),$("#J_btnsbox").on("touchstart","#J_btn-replay",function(){$("#player").jPlayer("stop"),$("#player").jPlayer("play")}),$("#J_btn-pushtoy").on("touchstart",function(){var a={},d=i[n];a.url=d.url,a.md5=d.md5,a.type=d.type,a.tag="picture_book",a.tagval=c,a.size=d.filesize;var e=$.extend({},a);e.bid=a.tagval,e.fid=d.id;try{var g=window.bemetoy.getToUerid()}catch(h){g=0}return 1>g?void f.showTips("您尚未绑定玩具!"):(b.playMusic(a,d),_czc.push(["_trackEvent","歌曲推送数","歌曲推送数","歌曲推送数"]),void _czc.push(["_trackEvent","有声绘本","有声绘本",d.name]))}),"onbeforeunload"in window?window.onbeforeunload=function(){$("#player").jPlayer("stop")}:"pagehide"in document&&(document.pagehide=function(){$("#player").jPlayer("stop")}),$(".share_weixin").on("click",function(){var b=window.location.href+"&weixin=1",c={title:u.title,desc:u.desc,url:b,shareType:0,imgUrl:a.imageWeixin(u.imgUrl)};f.shareWeixinUrl(c)}),$(document.body).swipeAsyn(function(a,b){if(b=b.toLowerCase(),"left"==b||"right"==b){var c="left"==b?1:-1;C(c)}a.preventDefault()})};h.init=function(){var a=c.getParams();1==a.weixin?f.setTitle("有声绘本世界"):f.setTitle("有声绘本世界"),y(a.id,a.weixin),D(a.id,a.weixin)},h.uninit=function(){$("#player").remove()}}),define("page/booklist",["comm/utils","comm/url","comm/request","helper/app","require","exports"],function(a,b,c,d,e,f){"use strict";var g=function(b){var c=a.template("J_temp-bookitem",{list:b.list});$("#J_book_list").html(c)},h=function(){c.getRequest({url:BEME.APIURL+"/book/booklist",successfn:function(a){d.loaded(),0===a.code&&g(a.data)}})},i=function(){$(".book-list").on("click",".item-a",function(){var a=$(this),b=a.attr("url"),c=a.attr("type");try{window.bemetoy.webViewTouchWithUrl(b,+c)}catch(d){}})};f.init=function(){d.setTitle("有声绘本世界");b.getParams();h(),i()},f.uninit=function(){}}),define("page/chaojifeixia",["comm/utils","comm/url","helper/app","require","exports"],function(a,b,c,d,e){"use strict";var f=function(){c.loaded()},g=function(){$("#player1").on("play",function(){document.getElementById("player2").pause(),document.getElementById("player3").pause(),document.getElementById("player4").pause()}),$("#player2").on("play",function(){document.getElementById("player1").pause(),document.getElementById("player3").pause(),document.getElementById("player4").pause()}),$("#player3").on("play",function(){document.getElementById("player2").pause(),document.getElementById("player1").pause(),document.getElementById("player4").pause()}),$("#player4").on("play",function(){document.getElementById("player2").pause(),document.getElementById("player3").pause(),document.getElementById("player1").pause()})};e.init=function(){c.setTitle("贝美童趣馆");b.getParams();f(),g()},e.uninit=function(){}}),define("page/descriptiontime",["comm/utils","comm/url","comm/request","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g){"use strict";var h=!1,i=function(a){if(d.setTitle(a.name),a.subscription){h=!0,$("#init_time").text(hours+":00");$(".time-box").find("a");if(+a.user_push>=7&&+a.user_push<=22){var b=$(".time-box").find("a")[+a.user_push-7];$(b).css("background","#e6f4c6"),$(b).css("border","1px solid #ceed88"),$(b).append('<img src="./static/images/duihao.png">')}else $(".init-time").find("a").css("border","1px solid #ceed88"),$(".init-time").find("span").append('<img src="./static/images/duihao.png">')}else $("#init_time").text(a.push_time_hours+":00"),$(".init-time").find("a").css("border","1px solid #ceed88"),$(".init-time").find("span").append('<img src="./static/images/duihao.png">')},j=function(a){c.getRequest({url:BEME.APIURL+"/station/getStationPushTime?id="+a,successfn:function(a){d.loaded(),0===a.code&&i(a.data)}})},k=function(a){$(".description .time-box").on("click","a",function(){var a=$(this),b=a.parent().parent().parent().find("img");b.length>0&&($(b[0]).parent().css("background","#f9eaeb"),$(b[0]).parent().css("border","1px solid #fad1d4"),$(b[0]).remove());var c=a.parent().parent().parent().parent().find("img");c.length>0&&($(c[0]).parent().parent().css("border","1px solid #fad1d4"),$(c[0]).remove()),a.css("background","#e6f4c6"),a.css("border","1px solid #ceed88"),a.append('<img src="./static/images/duihao.png">')}),$(".description .init-time").on("click","a",function(){var a=$(this),b=a.parent().find("img");
if(!(b.length>0)){var c=a.parent().parent().find("img");c.length>0&&($(c[0]).parent().css("background","#f9eaeb"),$(c[0]).parent().css("border","1px solid #fad1d4"),$(c[0]).remove()),a.css("border","1px solid #ceed88"),a.children().append('<img src="./static/images/duihao.png">')}}),$("#save_station").on("click",function(){var b="";$(".description").find("img").parent().length&&(b=$(".description").find("img").parent().text().split(":")[0]);try{window.bemetoy.subscribeRadio(a,1,b)}catch(c){alert(c)}})};g.init=function(){$(".back-btn").show(),a.headerMenu(),$("#save_station").show();var c=b.getParams();d.showHeader(),j(c.id),h=!1,k(c.id)},g.uninit=function(){$(".description .time-box, .description .init-time,#save_station").off("click")}}),define("page/fmindex",["comm/utils","comm/url","comm/request","helper/app","require","exports"],function(a,b,c,d,e,f){"use strict";var g=function(b){var c=a.template("J_temp-fmitem1",{list:b.recommend});$("#J_recommend-fm").html(c),c=a.template("J_temp-fmitem2",{list:b.hot}),$("#J_hot-fm").html(c),c=a.template("J_temp-fmitem3",{list:b.normal}),$("#J_normal-fm").html(c),d.showImage(),d.backScroll()},h=function(){c.getLocalRequest({url:BEME.APIURL+"/station/stationList",successfn:function(a){d.loaded(),0===a.code&&g(a.data)}})};f.init=function(){d.setTitle("电台节目"),$(".back-btn").show(),a.headerMenu(),$("#myplay").show(),d.showHeader(),h()},f.uninit=function(){}}),define("page/fminfo",["comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","page/myalbum","helper/app","helper/playerbar","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l=[],m=!1,n=function(b){var c=g.getUA(1);c>0&&$(".action-box .share").show();var d=$("#J_top-box");if(d.find(".img-cover").attr("imgsrc",a.imageUrlStationHead(b.station.url,1)),1==b.station.is_regular?d.find(".uptime").text("定时更新"):d.find(".uptime").text("每"+a.formatPushTime(b.station.push_time)+"更新"),d.find(".name").text(b.station.name),d.find(".playbox").text(b.station.demand_num),b.subscription){m=!0;var e=$("#J_description").parent();e.hasClass("btn-subscribed")||e.addClass("btn-subscribed"),$("#J_description").text("已订阅")}else{var e=$("#J_description").parent();e.hasClass("btn-subscribed")&&e.removeClass("btn-subscribed"),$("#J_description").text("订阅")}if($("#J_album-desc").text(b.station.description),$("#J_ordernum").text(b.station.subscription_num),b.radios?$("#J_songnum").text(b.radios.length):$("#J_songnum").text(0),b.tags){d=$("#J_info-box");var f="";$.each(b.tags,function(b,c){var d=a.getRandColor();f+='<li style="color:'+d+";border-color:"+d+'">'+c.name+"</li>"}),d.find(".tags").html(f)}$.each(b.radios,function(a,c){c.tagval=b.station.id}),l=b.radios,f=a.template("J_temp-item",{list:l,flag:!0}),$("#J_song-box").html(f),$.each(b.radios,function(a,b){b._type="station",b.tag="station",k[b.id]=b}),g.showImage(),g.backScroll()},o=function(a){c.getRequest({url:BEME.APIURL+"/station/radiolist?id="+a,successfn:function(a){g.loaded(),0===a.code&&n(a.data)}})},p=function(b){c.getRequest({url:BEME.APIURL+"/station/getStationPushTime?id="+b,successfn:function(b){if(g.loaded(),0===b.code){var c=b.data.name+"电台节目将在每";c+=1==b.data.is_regular?"次更新的":a.formatPushTime(b.data.push_time),c+=b.data.push_time_hours+":00点准时推送给玩具，记得收听哦",g.showAlert(c)}}})};window.onSubscribeRadioResult=function(a,b,c){if(1!=b){if(0==b)if(c){var d=$("#J_description").parent();d.hasClass("btn-subscribed")&&($("#J_description").text("订阅"),d.removeClass("btn-subscribed")),m=!1,g.showTips("取消订阅成功!")}else g.showTips("取消订阅失败!")}else if(c){var d=$("#J_description").parent();p(a),$("#J_description").text("已订阅"),d.addClass("btn-subscribed")}else g.showTips("订阅失败!")};var q=function(b){$("#J_album-desc").on("click",function(){var a=$(this);a.attr("block")?(a.css("display","-webkit-box"),a.attr("block",null)):(a.css("display","block"),a.attr("block",1))}),$("#J_info-box .btn-subscribe").on("click",function(){try{var a=$(this);if(a.hasClass("btn-subscribed")){var c={};c.content="确定不再订阅该电台？",g.showAlert(c,function(){window.bemetoy.subscribeRadio(b,0,"")})}else{var e=d.getUid();if(e.to<1)return void(window.location.href="#!m=pushfail&type=station&text=2");window.bemetoy.subscribeRadio(b,1,"")}}catch(f){}}),$("#J_song-box").on("click",".item .item-a .title-box,.item .item-a .desc",function(){e.pushSong($(this).parent())}),$("#J_song-box").on("click",".item-play",function(){e.audition(k,$(this).parent())}),$(".action-box").on("click",".play-btn",function(){e.pushAllSong(this)});var c=!0;$("#J_option-btn").on("click",function(){c?($("#J_option-btn").removeClass("option-btn"),$("#J_option-btn").addClass("option-btn-on")):($("#J_option-btn").removeClass("option-btn-on"),$("#J_option-btn").addClass("option-btn")),c=!c,l.reverse();var b=a.template("J_temp-item",{list:l,flag:c});$("#J_song-box").html(b)}),$(".top").on("click",".edit",function(){location.href="#!m=descriptiontime&id="+b}),$(".top").on("click",".cancel",function(){var a=($(this),{});a.content="确定不再订阅该电台？",g.showAlert(a,function(){try{window.bemetoy.subscribeRadio(b,0,"")}catch(a){alert(a)}}),$(".top").hide()}),$(".action-box").on("click",".share",function(){e.shareToWeixin(b,"station",b)})};j.init=function(){g.setTitle("电台"),$(".back-btn").show(),a.headerMenu(),$("#myplay").show(),m=!1;var c=b.getParams();g.showHeader(),o(c.id),q(c.id)},j.uninit=function(){$("#J_album-desc, #J_song-box, #J_option-btn, #J_info-box .btn-subscribe").off("click")}}),define("page/grow",["comm/utils","comm/url","comm/request","comm/clickevent","comm/unveil","helper/playerbar","helper/singleplayer","helper/app","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l={title:"贝美时光说-成长场景",desc:"小囧熊英文乐园",link:location.href,imgUrl:"专辑图片放进来"},m=function(b,c){var d=h.getUA(0),e=h.getUA(1);d>1&&e>0&&$(".share_weixin").show(),1==c&&($(".share_weixin").hide(),$(".push-song").hide());var f=$(".grow-banner-box");f.find(".img-cover").attr("src",a.imageUrlStationHead(b.url,1)),f.find(".grow_name").text(b.name),$("#abstract").html(b["abstract"]),$("#description").html(b.description);var g=$("#description").find("embed");$.each(g,function(a,d){p($(d).attr("song_id"),b.id,$(d),c)});var j=$("#description").find("video");$.each(j,function(a,b){var c="";c='<div class="song_list_name">'+$(b).attr("title")+"</div>",c+='<p class="play-video"><video src="'+$(b).attr("src")+'" controls="controls" poster="'+$(b).attr("width")+'"></video></p>',$(c).insertAfter($(b)),$(b).remove()});var m=$("#description").find("article");$.each(m,function(a,b){r($(b).attr("album_id"),$(b),c)});var n="";if(b.songs&&b.songs.length>0&&(n=1==c?a.template("J_temp-item-weixin",{list:b.songs}):a.template("J_temp-item",{list:b.songs}),$("#J_song-box").html(n),$.each(b.songs,function(a,b){b._type="album",b.tag="album",k[b.id]=b}),$("#song_list_name").html(b.song_name),$(".song_list").show()),b.albums&&b.albums.length>0&&($("#album_list_name").html(b.album_name),$.each(b.albums,function(a,b){1==c?b.id="#!m=weixin&id="+b.id+"&type=album":b.id="#!m=albuminfo&id="+b.id}),n=a.template("J_temp-albumitem",{list:b.albums}),$("#J_album-box").html(n),$(".album").show(),$("img.lazy").unveil()),h.backScroll(),l.title=b.name,l.desc=b["abstract"],l.imgUrl=a.imageUrl(b.url),1==c)var c=i(["page/weixin"],function(a){a.getWeixinConfig(l)})},n=function(a,b){c.getRequest({url:BEME.APIURL+"/grow/growInfo?id="+a,successfn:function(a){h.loaded(),0===a.code&&m(a.data,b)}})},o=function(a,b,c,e){var f="",h="music_"+a.id;f='<li class="music '+h+'" sid="'+a.id+'" md5="'+a.md5+'"  url="'+a.url+'" tag="grow" tagval="'+b+'"  size="'+a.filesize+'" type="'+a.type+'" ><div class="title">'+a.name+'</div><a class="push-grow-song">推送给玩具</a></li>';var i="single_"+a.id;1==e?(g.initSingleWeixinPlayer(i,a,c),$(f).insertAfter(c),$(".push-grow-song").hide()):(g.initSinglePlayer(i,a,c),$(f).insertAfter(c)),c.parent().addClass("music_div"),c.remove(),$("."+h).on("click",".push-grow-song",function(){d.pushSong($(this))})},p=function(a,b,d,e){c.getRequest({url:BEME.APIURL+"/grow/songInfo?id="+a,successfn:function(a){h.loaded(),0===a.code&&o(a.data,b,d,e)}})},q=function(b,c,d){var e="";$.each(b.tags,function(b,c){var d=a.getRandColor();e+='<li style="color:'+d+";border-color:"+d+'">'+c.name+"</li>"});var f="";f=1==d?'<div class="album_list" ><a class="album_link" href="#!m=weixin&type=album&id='+b.id+'">':'<div class="album_list" ><a class="album_link" href="#!m=albuminfo&id='+b.id+'">',f+='<img class="album_img" src="'+b.url+'"><div class="title">'+b.name+'</div><ul class="tags">'+e+"</ul></a></div>",$(f).insertAfter(c),c.remove()},r=function(a,b,d){c.getRequest({url:BEME.APIURL+"/grow/albumInfo?id="+a,successfn:function(a){h.loaded(),0===a.code&&q(a.data,b,d)}})},s=function(a,b){$(".share_weixin").on("click",function(){d.shareToWeixin(a,"grow")}),1==b?$("#J_song-box").on("click",".item",function(){var a=$(this),b=a.attr("sid");f.initWeixinPlayer(a,k[+b])}):($("#J_song-box").on("click",".item .item-a",function(){d.pushSong(this)}),$("#J_song-box").on("click",".item-play",function(){d.audition(k,this)}))};j.init=function(){var a=b.getParams();1==a.weixin?h.setTitle("贝美时光说-成长场景"):h.setTitle("成长场景"),n(a.id,a.weixin),s(a.id,a.weixin)},j.uninit=function(){}}),define("page/growlist",["comm/utils","comm/url","comm/request","helper/app","require","exports"],function(a,b,c,d,e,f){"use strict";var g=function(b){var c="";c=a.template("J_temp-growitem",{list:b.list}),$("#J_grow_list").html(c),d.showImage(),d.backScroll()},h=function(){c.getRequest({url:BEME.APIURL+"/grow/growList",successfn:function(a){d.loaded(),0===a.code&&g(a.data)}})},i=function(){};f.init=function(){d.setTitle("成长场景");b.getParams();h(),i()},f.uninit=function(){}}),define("page/index",["comm/utils","comm/url","comm/request","comm/pushsong","helper/playerbar","helper/temphtml","helper/app","jplayer","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k="",l="2015.10.09",m="",n=function(a,b){$(document.body).addClass("loading"),window.BEME._currentScroll=document.body.scrollTop,b.times=b.times||0,$.ajax({url:a,timeout:45e3,success:function(a){var c=a.indexOf("<body>"),d=a.indexOf("</body>"),e=a.substring(c+6,d);0>c||(b.preRender&&b.preRender(),$(b.containID).html(e),$(window).scrollTop(0),b.afterRender&&b.afterRender())},error:function(c,d,e){if(b.times<4&&c.status<1){var f=a.indexOf("?")>-1?"&":"?";a=a+f+"t="+Math.random(),++b.times,n(a,b)}g.loadingFail()}})};j.loadPage=function(a,b){if(b=b||{},b.containID=b.containID||"#J_wrapper",k!=a){k=a.substr(0,20);var c="pages/"+k+".html";n(c,b)}$("#J_body-mask").removeClass("mask-in"),$(document.body).removeClass("show-image")};var o=function(a){var c=b.getParams();c.m=c.m||"main",BEME.hashs=c;var d=c.m;j.loadPage(d,{afterRender:function(){BEME.curPageInstance&&BEME.curPageInstance.uninit&&(g.hideAllBox(),console.log("uninit "+BEME.PAGENAME),BEME.curPageInstance.uninit(),BEME.curPageInstance=null);var a=location.hash.replace(/^[#!]+/g,""),b="";a=a?"?"+a:a,b="pages/"+d+".html"+a;try{"function"==typeof _czc.push&&_czc.push(["_trackPageview",b,m])}catch(c){}m=b}})},p=function(){g.initEvent(),o(),g.onHashchange("mainchange",o)},q=function(){c.getLocalRequest({url:BEME.APIURL+"/listen/customRandom",successfn:function(a){if(g.loaded(),0===a.code){var b=BEME.template(f.mysongHtml,{list:a.data});$("#J_random-box").find(".item").remove(),$("#J_random-box").find(".list").append(b),$($("#J_random-box").find("li")[4]).find(".item-a").css("border","0")}}})};j.pushAllSong=function(a){var a=$(a).parent().parent().find(".item"),b=["url","md5","type","tag","tagval","size"],c=[],e=[],f=[];$.each(a,function(d,g){var h={};$.each(b,function(a,b){h[b]=$(g).attr(b)}),c.push(h);var i=$.extend({},h);i.bid=h.tagval,i.fid=a.attr("sid"),e.push(i),f.push($(g).find(".title").text())}),d.playAllMusic(c,e)};var r=function(){var a=$("#J_random-box");if(a.length<1)$(document.body).append(f.myrandomHtml),$("#J_random-box").on("click",".close-btn",function(){$("#J_random-box, #J_body-mask").hide(),g.hideMask()}),$("#J_random-box .random_left").on("click",function(){q()}),$("#J_random-box .random_right").on("click",function(){j.pushAllSong(this),_czc.push(["_trackEvent","随心听推送","随心听推送","随心听推送"])}),$("#J_random-box .list").on("touchstart",function(){return!1});else{var b=$("#J_body-mask").css("display");if("none"!=b)return}g.showMask(),a.show(),q(),_czc.push(["_trackEvent","随心听","随心听","随心听"])};window.showRandomListening=function(){r()},window.showMyListening=function(){location.href="http://m2.bemetoy.com/#!m=myindex"},window.showSearch=function(){location.href="http://m2.bemetoy.com/#!m=search"},window.showMyFootprint=function(){location.href="http://m2.bemetoy.com/#!m=myhistory"},window.colseMusic=function(){$("#J_body-mask").hide();try{$("#J_random-box").hide(),$("#J_alert-box").hide(),$("#J_album-alert").hide(),$("#J_newplay-box").hide()}catch(a){}$(".item-option-showplay").length>0&&(e.stopPlayer(),$(".item-option-showplay").find(".player").jPlayer("stop")),$("#player").jPlayer("stop")};var s=function(){$(".main-header-box").on("click",".back-btn",function(){history.go(-1)}),$(".loading-fail-box").on("click",function(){window.location.reload(!0)}),$("#J_body-mask").on("click",function(){g.hideMask(),$("#J_random-box").length&&$("#J_random-box").hide(),$("#J_alert-box").hide(),$("#J_album-alert").length&&$("#J_album-alert").hide(),$("#J_newplay-box").length&&$("#J_newplay-box").hide()}),$("#J_body-mask").on("touchstart",function(){return!1})};return j.init=function(){var c="cache-"+l;a.cache.get(c)||(console.log("clear all cache!"),a.cache.clear(),a.cache.set(c,"1")),p();b.getParams();g.hideAllBox(),s()},j}),define("page/iplist",["comm/utils","comm/url","comm/request","helper/app","require","exports"],function(a,b,c,d,e,f){"use strict";var g=function(b){$.each(b,function(a,b){b.question=d.changeDate(1e3*b.update_time)});var c=a.template("J_temp-item-class",{list:b});$("#ip-classlist").html(c)},h=function(){c.getRequest({url:BEME.APIURL+"/ip/ipMain",successfn:function(a){d.loaded(),0===a.code&&g(a.data)}})},i=function(){};f.init=function(){d.setTitle("贝美童趣馆列表");b.getParams();h(),i()},f.uninit=function(){}}),define("page/main",["comm/utils","comm/url","comm/request","helper/app","require","exports"],function(a,b,c,d,e,f){"use strict";var g=function(b){var c=$("#J_custom-box");b.name&&(c.find(".title").text("为"+b.name+"定制"),b.description=b.description.replace("宝宝",b.name)),c.find(".desc").text(b.description);var d=a.template("J_temp-customitem",{list:b.album_list});c.find(".list").html(d),i()},h=function(){c.getLocalRequest({url:BEME.APIURL+"/home/customList",type:"get",successfn:function(a){d.loaded(),0===a.code&&g(a.data)}}),c.getLocalRequest({url:BEME.APIURL+"/home/listeningList",type:"get",successfn:function(b){if(0===b.code){var c=a.template("J_temp-cateitem",{list:b.data});$("#J_cate-box").html(c),i()}}}),c.getLocalRequest({url:BEME.APIURL+"/home/stationList",type:"get",successfn:function(b){if(0===b.code){var c=a.template("J_temp-fmitem",{list:b.data});$("#J_fm-box").html(c),i(),d.backScroll()}}})},i=function(){$(".item-a .img-auto").each(function(a,b){b.onload=function(){$(this).parent().find(".info-box").show()}}),d.showImage()},j=function(){};f.init=function(){d.setTitle("听听"),$(".back-btn").hide(),a.headerMenu(),$("#myplay").show(),d.showHeader(),h(),j()},f.uninit=function(){}}),define("page/myalbum",["comm/utils","comm/url","comm/request","comm/clickevent","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(b){if($(".select-all").hide(),$(".myalbum .title").show(),b.length){var c=a.template("J_temp-pitem",{list:b});$("#J_play_list").html(c),$("#J_playnum").text(b.length),$("#J_playnum_1").text(b.length)}else $("#J_play_list").html(""),$("#J_playnum").text(0),$("#J_playnum_1").text(0);e.backScroll()},j=function(a){c.getRequest({url:BEME.APIURL+"/albums/userPlayList",successfn:function(b){e.loaded(),0===b.code&&a(b.data)}})},k=function(){c.getRequest({url:BEME.APIURL+"/albums/userPlayList",successfn:function(a){e.loaded(),0===a.code&&i(a.data)}})},l=function(a){var b=$(".item");$.each(b,function(a,b){var c=$(b);c.find(".checkbox").attr("value","0"),$(c.find(".checkbox")).find("img").attr("src","./static/images/xuanzekong.png")}),c.getRequest({url:BEME.APIURL+"/albums/deletePlayList",data:{ids:a},type:"POST",successfn:function(a){0===a.code?(e.showTips("歌单已删除"),k()):e.showTips("歌单删除失败")}})},m=function(a){c.getRequest({url:BEME.APIURL+"/albums/addPlayList",data:{name:a},type:"POST",successfn:function(a){$("#J_album-alert .ok-btn").removeClass("disabled"),0===a.code&&($("#J_album-alert .new-myalbum").removeClass("showinput"),$("#J_album-alert .input").val(""));var b=$("#J_album-alert"),c=b.attr("ids"),d=b.attr("type"),e=b.attr("album_ids");n(a.data,c,d,e,"")}})},n=function(a,b,d,f,g){d=d||"album",c.getRequest({url:BEME.APIURL+"/albums/insertIntoPlayList",data:{play_id:a,type:d,song_ids:b,album_ids:f},type:"POST",successfn:function(a){if(e.showTips(a.message+"加入歌单"),0===a.code){$("#J_album-alert, #J_body-mask").hide(),$(".caction-box").length&&$(".caction-box").show(),$(".title").length&&$(".title").show(),$("."+g).show(),$(".select-all").hide(),$(".select-all").find(".left").attr("value","0"),$(".select-all").find("img").attr("src","./static/images/xuanzekong.png");var b=$(".item");$.each(b,function(a,b){var c=$(b);c.find(".checkbox").attr("value","0"),$(c.find(".checkbox")).find("img").attr("src","./static/images/xuanzekong.png")}),$(".item").find(".checkbox").hide(),$(".item").find(".station").length&&$(".item").find(".checkbox").show()}}})},o=function(a,b){$("#J_album-alert").on("click",".close-btn",function(){$("#J_album-alert, #J_body-mask").hide(),e.hideMask(),$("#J_album-alert .new-myalbum").removeClass("showinput")}).on("click",".new-btn",function(){$("#J_album-alert .new-myalbum").addClass("showinput"),$("#J_album-alert .new-myalbum").find(".input").focus()}).on("click",".cancel-btn",function(){$("#J_album-alert .new-myalbum").removeClass("showinput")}).on("click",".ok-btn",function(){var a=$(this),b=$("#J_album-alert .input"),c=$.trim(b.val());return a.hasClass("disabled")?!1:c?(m(c),void $("#J_album-alert .ok-btn").addClass("disabled")):b.focus()}).on("click",".item",function(){var a=$(this),c=a.attr("albumid"),d=$("#J_album-alert"),e=d.attr("ids"),f=d.attr("type"),g=d.attr("album_ids");n(c,e,f,g,b)})};h.showAddMyablumBox=function(a,b,c,d){var g=$("#J_album-alert");return""===a?!1:(g.length<1&&($(document.body).append(f.myalbumAlertHtml),g=$("#J_album-alert"),o(g,d)),a&&g.attr({ids:a,type:b,album_ids:c}).show(),e.showMask(),g.show(),$("#J_album-alert .close-btn").show(),j(function(a){var b=BEME.template(f.myalbumItemHtml,{list:a});g.find(".item").remove(),g.find(".list").append(b)}),!0)};var p=function(){$("#play_edit").on("click",function(){("none"===$(".item").find(".checkbox")[0].style.display||""===$(".item").find(".checkbox")[0].style.display)&&($(".select-all").show(),$(".myalbum .title").hide(),$(".item").find(".checkbox").show(),$(".item").find(".checkbox span").length&&($(".item").find(".checkbox span").hide(),$(".item").find(".checkbox img").show()),$.each($(".item .item-a"),function(a,b){$(b).attr("href","javascript:void(0);")}))}),d.newPlayEvent(),$(".select-all .left").on("click",function(){var a=$(this).parent(),b=a.find(".check_all").attr("value"),c=$(".item").find(".checkbox");0==+b?(a.find("img").attr("src","./static/images/xuanze.png"),a.find(".check_all").attr("value",1),$.each(c,function(a,b){$(b).find("img").attr("src","./static/images/xuanze.png"),$(b).attr("value",1)}),$("#delete").removeClass("content_add"),$("#delete").addClass("content")):(a.find("img").attr("src","./static/images/xuanzekong.png"),a.find(".check_all").attr("value",0),$.each(c,function(a,b){$(b).find("img").attr("src","./static/images/xuanzekong.png"),$(b).attr("value",0)}),$("#delete").removeClass("content"),$("#delete").addClass("content_add"))}),$(".select-all #cancel").on("click",function(){$(".select-all").hide(),$(".myalbum .title").show(),$(".item").find(".checkbox").hide(),$.each($(".item"),function(a,b){var c=$(b).attr("sid"),d="#!m=myplay&id="+c;$(b).find(".item-a").attr("href",d)})}),$("#J_play_list").on("click",".checkbox",function(){d.check(this)}),$("#J_play_list").on("click",".item-a",function(){var a=$(this).parent().find(".checkbox");d.check(a)}),$(".select-all #delete").on("click",function(){var a=$(".item"),b=[];if($.each(a,function(a,c){var d=$(c),e=d.find(".checkbox").attr("value");1===+e&&b.push(d.attr("sid"))}),0===b.length);else{var c={};c.content="确定删除所选歌单？",e.showAlert(c,function(){l(b.join(","))})}})};h.init=function(){e.setTitle("我创建的歌单"),$(".back-btn").show(),a.headerMenu(),$("#editplay").show(),e.showHeader(),k(),p()},h.uninit=function(){$("#editplay, .myalbum .title .check, #J_play_list, #delete_play, #cancel_edit,#J_newplay-box").off("click")}}),define("page/mycollection",["comm/utils","comm/url","comm/request","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g){"use strict";var h=function(b){var c=a.template("J_temp-citem",{list:b});$("#J_collection_list").html(c),$("#J_collectionnum").text(b.length),d.backScroll()},i=function(){c.getRequest({url:BEME.APIURL+"/listen/customCollectionList",successfn:function(a){d.loaded(),0===a.code&&h(a.data)}})},j=function(){};g.init=function(){d.setTitle("收藏的专辑"),$(".back-btn").show(),a.headerMenu(),d.showHeader(),i(),j()},g.uninit=function(){}}),define("page/myhistory",["comm/utils","comm/url","comm/request","comm/clickevent","page/myalbum","helper/app","helper/playerbar","require","exports"],function(a,b,c,d,e,f,g,h,i){"use strict";var j={},k=function(b){if(0===b.count)return $("#have-history").hide(),$(".song-fail").show(),void f.noScroll();if(!b.playing_count&&!b.unplaying_count&&!b.history_count)return $("#have-history").hide(),void $(".song-fail").show();if(b.playing_count){var c=a.template("J_temp-nitem",{list:b.playing_count});$("#J_play_list").html(c)}else{var c='<div class="no-content">玩具没有正在收听节目</div>';$("#J_play_list").html(c)}if(b.unplaying_count){var c=a.template("J_temp-nitem",{list:b.unplaying_count});$("#J_waiting_list").html(c)}else{var c='<div class="no-content">玩具尚无待播放歌曲</div>';$("#J_waiting_list").html(c)}if(b.history_count){var c=a.template("J_temp-nitem",{list:b.history_count});$("#J_played_list").html(c)}else{var c='<div class="no-content">玩具尚无已播放歌曲</div>';$("#J_played_list").html(c)}$.each(b.history_count,function(a,b){b._type="history",j[b.relate_id]=b}),$.each(b.playing_count,function(a,b){b._type="history",j[b.relate_id]=b}),$.each(b.unplaying_count,function(a,b){b._type="history",j[b.relate_id]=b}),f.backScroll()},l=function(a){c.getLocalRequest({url:BEME.APIURL+"/listen/getHistory",successfn:function(a){return f.loaded(),0!==a.code?($("#have-history").hide(),$(".song-fail").show(),void f.noScroll()):void k(a.data)}})};i.deleteHistory=function(a){c.getRequest({url:BEME.APIURL+"/listen/deleteHistory",data:{id:a},type:"POST",successfn:function(a){f.showTips("删除歌曲"+a.message),0===a.code&&l()}})};var m=function(a){$("#have-history").on("click",".item .item-c .name,.item .item-c .desc",function(){var b=$(this).parent();d.pushSong(b),setTimeout(function(){l(a)},1e3)}),$("#have-history").on("click",".item-b,.item-play",function(a){a.stopPropagation();var b=$(this).parent().parent(),c=b.attr("rid");g.initPlayer(b,j[+c])}),$(".myhistory .title").on("click",function(){var a=$(this).find(".down"),b=a.parent().parent().find(".play-box");if(a.hasClass("up"))a.removeClass("up"),a.attr("src","./static/images/down.png"),b.show();else{a.addClass("up"),a.attr("src","./static/images/up.png"),b.hide();var c=$(".played").offset().top,d=$(window).scrollTop(),e=$("html").css("font-size").split("p")[0];e>=c-d&&(window.scrollTo(0,$(".playing").offset().height-4),$(".waiting_play .title").removeClass("fixed_waiting"))}}),window.onscroll=function(){var a=$(".played").offset().top,b=$(".waiting_play").offset().top,c=($(".played").offset().height,$(".waiting_play").offset().height),d=$(window).scrollTop(),e=$("html").css("font-size").split("p")[0]-5;0>b-d?$(".waiting_play .title").addClass("fixed_waiting"):$(".waiting_play .title").removeClass("fixed_waiting"),e>=b+c-d&&$(".waiting_play .title").removeClass("fixed_waiting"),e>=a-d?$(".played .title").addClass("fixed_waiting"):$(".played .title").removeClass("fixed_waiting")}};i.init=function(){f.setTitle("点播足迹");var c=b.getParams();$(".back-btn").show(),a.headerMenu(),$("#myplay").show(),f.showHeader(),l(c.id),m(c.id)},i.uninit=function(){}}),define("page/myindex",["comm/utils","comm/url","comm/request","comm/clickevent","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(b){if($("#history_num").html(b.history_count),0==b.history_count&&!b.play_list&&!b.collection_list&&!b.station_list)return $("#not-have-play").show(),$("#have-play").hide(),$("#addplay").hide(),void e.noScroll();var c=a.template("J_temp-mpitem",{list:b.play_list});if(b.play_list)$("#J_play_list").html(c);else{var c='<div class="no-content">无创建的歌单</div>';$("#J_play_list").html(c),$("#J_play_list").parent().find(".right").hide()}if(c=a.template("J_temp-mcitem",{list:b.collection_list}),b.collection_list)$("#J_collection_list").html(c);else{var c='<div class="no-content">暂无收藏的专辑</div>';$("#J_collection_list").html(c),$("#J_collection_list").parent().find(".right").hide()}if(c=a.template("J_temp-msitem",{list:b.station_list}),b.station_list)$("#J_description_list").html(c);else{var c='<div class="no-content">您尚未订阅电台</div>';$("#J_description_list").html(c),$("#J_description_list").parent().find(".right").hide()}e.backScroll()},j=function(){c.getRequest({url:BEME.APIURL+"/listen/customListenList",successfn:function(a){e.loaded(),0===a.code?i(a.data):($("#not-have-play").show(),$("#have-play").hide(),$("#addplay").hide(),e.noScroll())}})},k=function(){$("#addplay").on("click",function(){$("#J_newplay-box").show(),e.showMask()}),$("#create_play").on("click",function(){$("#J_newplay-box").show(),e.showMask(),$("#J_newplay-box ").find(".text").focus()}),d.newPlayEvent()};h.init=function(){e.setTitle("我的听听"),$(".back-btn").show(),e.showHeader(),a.headerMenu(),$("#addplay").show(),j(),k()},h.uninit=function(){$("#addplay, #J_newplay-box").off("click")}}),define("page/myplay",["comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","page/myalbum","helper/app","helper/playerbar","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l=0,m=function(b){if(g.setTitle(b.play.name),0===b.count)return $("#J_songnum").text(0),$(".title").show(),$("#play_list").hide(),void $(".song-fail").show();var c=a.template("J_temp-mpitem",{list:b.songs});$("#J_song_list").html(c),$("#J_songnum").text(b.songs.length),$("#J_play_name").text(b.play.name),$("#J_songnum_all").text(b.songs.length),$(".title").show(),$(".select-all").hide(),$("#J_wrapper .item").find(".checkbox").hide(),$.each(b.songs,function(a,b){b._type="play",b.tag=b.song_type,b.user=!0,k[b.id]=b}),g.backScroll()},n=function(a){c.getRequest({url:BEME.APIURL+"/listen/customPlayDetail?id="+a,successfn:function(a){g.loaded(),0===a.code?m(a.data):($("#play_list").hide(),$(".song-fail").show())}})},o=function(a,b){var d=$(".item");$.each(d,function(a,b){var c=$(b);c.find(".checkbox").attr("value","0"),$(c.find(".checkbox")).find("img").attr("src","./static/images/xuanzekong.png")}),c.getRequest({url:BEME.APIURL+"/albums/deletePlayListSong",data:{ids:a},type:"POST",successfn:function(a){g.showTips("删除歌曲"+a.message),0===a.code&&n(b)}})};j.deletePlay=function(a){o(a,l)};var p=function(a){$("#editplay").on("click",function(){$(".delete-all").show(),$("#J_wrapper .item").find(".checkbox").show(),$("#delete_play").show(),$("#editplay").hide(),$(".back-btn").hide(),$(".title").hide(),$("#cancel_edit").show()}),$(".select-all").on("click","#cancel",function(){$(".select-all").hide(),$("#J_wrapper .item").find(".checkbox").hide(),$(".title").show()}),$(".select-all").on("click","#delete",function(){var b=$(".item"),c=[];if($.each(b,function(a,b){var d=$(b),e=d.find(".checkbox").attr("value");1===+e&&c.push(d.attr("rid"))}),0===c.length);else{var d={};d.content="确定删除所选歌曲？",g.showAlert(d,function(){o(c.join(","),a)})}}),$("#J_song_list").on("click",".item .item_a",function(){e.pushSong(this)}),$("#J_song_list").on("click",".item-play",function(){e.audition(k,this)}),$(".title3").on("click",".play-btn",function(){e.pushAllSong(this)}),$("#listen_edit").on("click",function(a){a.stopPropagation(),"none"==$(".top").css("display")?$(".top").show():$(".top").hide()}),$(document).click(function(){$(".top").hide()}),$(".top").on("click",".edit",function(a){a.stopPropagation(),("none"===$(".item").find(".checkbox")[0].style.display||""===$(".item").find(".checkbox")[0].style.display)&&($(".select-all").show(),$(".myplay .title").hide(),$(".item").find(".checkbox").show(),$(".item").find(".checkbox span").length&&($(".item").find(".checkbox span").hide(),$(".item").find(".checkbox img").show())),$(".top").hide()}),$(".top").on("click",".cancel",function(b){b.stopPropagation(),$("#J_newplay-box").show(),$("#J_newplay-box .play_title").text("修改歌单名"),$("#J_newplay-box #play_name").val(document.title),$("#J_newplay-box #play_name").focus(),$("#J_newplay-box #play_id").attr("value",a),$("#J_newplay-box .btn-ok").css("color","#0091ff"),g.showMask(),$(".top").hide()}),e.newPlayEvent(),$("#J_song_list").on("click",".checkbox",function(){e.check(this)}),$(".select-all").on("click",".left",function(){var a=$(this).parent(),b=a.find(".left").attr("value"),c=$(".item").find(".checkbox");0==+b?(a.find("img").attr("src","./static/images/xuanze.png"),a.find(".left").attr("value",1),$.each(c,function(a,b){$(b).find("img").attr("src","./static/images/xuanze.png"),$(b).attr("value",1)}),$("#delete").removeClass("content_add"),$("#delete").addClass("content")):(a.find("img").attr("src","./static/images/xuanzekong.png"),a.find(".left").attr("value",0),$.each(c,function(a,b){$(b).find("img").attr("src","./static/images/xuanzekong.png"),$(b).attr("value",0)}),$("#delete").removeClass("content"),$("#delete").addClass("content_add"))})};j.init=function(){var c=b.getParams();$(".back-btn").show(),a.headerMenu(),$("#editplay").show(),g.showHeader(),n(c.id),l=c.id,p(c.id)},j.uninit=function(){$("#editplay, .select-all,#listen_edit, #J_play_list, #delete_play, #cancel_edit").off("click")}}),define("page/mystation",["comm/utils","comm/url","comm/request","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g){"use strict";var h=function(b){var c=a.template("J_temp-ditem",{list:b});$("#J_description_list").html(c),$("#J_descriptionnum").text(b.length),d.backScroll()},i=function(){c.getRequest({url:BEME.APIURL+"/listen/customStationList",successfn:function(a){d.loaded(),0===a.code&&h(a.data)}})},j=function(){};g.init=function(){d.setTitle("订阅的电台"),$(".back-btn").show(),a.headerMenu(),d.showHeader(),i(),j()},g.uninit=function(){}}),define("page/newmain",["comm/utils","comm/url","comm/request","helper/app","require","exports"],function(a,b,c,d,e,f){"use strict";var g=function(){c.getLocalRequest({url:BEME.APIURL+"/home/listeningList",type:"get",successfn:function(b){if(d.loaded(),0===b.code){var c=a.template("J_temp-cateitem",{list:b.data});$("#J_cate-box").html(c),h()}}})},h=function(){$(".item-a .img-auto").each(function(a,b){b.onload=function(){$(this).parent().find(".info-box").show()}}),d.showImage()},i=function(){};f.init=function(){d.setTitle("听听"),$(".back-btn").hide(),a.headerMenu(),$("#myplay").show(),d.showHeader(),g(),i()},f.uninit=function(){}}),define("page/pushfail",["comm/utils","comm/url","comm/request","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g){"use strict";var h="http://item.jd.com/1917166.html",i=function(a,b){"album"==a&&d.setTitle("专辑"),"topic"==a&&d.setTitle("专题"),"station"==a&&d.setTitle("电台");
var c=["0","推送失败","订阅失败"];$(".push .title").text(c[+b]),d.backScroll()},j=function(){d.loaded()},k=function(){$(".connect_app").on("click",function(){try{window.bemetoy.bindToy()}catch(a){}}),$(".buy-jd").on("click",function(){try{window.bemetoy.openSystemExplorer(h)}catch(a){}})};g.init=function(){var c=b.getParams();$(".back-btn").show(),a.headerMenu(),$("#myplay").show(),d.showHeader(),j(),i(c.type,c.text),k()},g.uninit=function(){}}),define("page/ranking",["comm/utils","comm/url","comm/request","comm/pushsong","comm/swipe","comm/clickevent","helper/app","helper/playerbar","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={},m=function(b){$("#J_songnum").text(b.length);var c=a.template("J_temp-item",{list:b});$("#J_song-box").html(c),$.each(b,function(a,b){b._type="ranking",l[b.id]=b}),g.backScroll()},n=function(){c.getRequest({url:BEME.APIURL+"/ranking/getAllTag",successfn:function(b){if(0===b.code){b.data.splice(0,0,{id:0,name:"全部分类"});var c=a.template("J_temp-cate",{list:b.data});$("#J_cate-box").html(c),$("#J_top-box").Swipe({continuous:!1,callback:function(a){$("#J_cate-box .menu-list").eq(a).find(".item-a").eq(0).click()}}),$("#J_cate-box .menu-list").eq(0).find(".item-a").eq(0).click()}}})},o=function(a){c.getRequest({url:BEME.APIURL+"/ranking/rankingList?classify_id="+a,successfn:function(a){g.loaded(),0===a.code?m(a.data):($("#J_song-box").html(""),$("#J_songnum").text("0"))}})},p=function(){$("#J_cate-box").on("click",".item-a",function(){var a=$(this),b=a.data("id");o(b),$("#J_cate-box li").removeClass("cur"),a.parent().addClass("cur")}),$("#J_song-box").on("click",".item .item-a",function(){f.pushSong(this)}),$(".caction-box").on("click",".play-btn",function(){f.pushAllSong(this)}),$("#J_song-box").on("click",".item-play",function(){var a=$(this).parent(),b=a.attr("sid");h.initPlayer(a,l[+b])})};k.init=function(){g.setTitle("点播排行"),$(".back-btn").show(),a.headerMenu(),$("#myplay").show();b.getParams();g.showHeader(),p(),n()},k.uninit=function(){$("#J_cate-box, #J_song-box").off("click")}}),define("page/search",["comm/utils","comm/url","comm/request","comm/clickevent","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i="",j={},k=!1,l=!1,m=function(b){var c=$(".search_suggest"),d="";d=a.template("J_temp_hot_list",{list:b.hot}),c.find(".hot_ul").html(d),$("#search_input").focus(),e.backScroll()},n=function(b,d){c.getRequest({url:BEME.APIURL+"/search/searchHot",successfn:function(a){e.loaded(),0===a.code&&m(a.data)}}),c.getRequest({url:BEME.APIURL+"/search/searchUser",successfn:function(b){if(e.loaded(),0===b.code){var c=a.template("J_temp_search_history",{list:b.data.users});$(".history_ul").html(c),$(".search_history").show()}else $(".search_history").hide()}}),d=decodeURI(d),"album"==b&&($("#search_input").val(d),$(".search_header .delete-btn").show(),k=!0,$(".result_header .h_album").click(),$(".header_btn").addClass("enter_btn")),"station"==b&&($("#search_input").val(d),$(".search_header .delete-btn").show(),l=!0,$(".result_header .h_station").click(),$(".header_btn").addClass("enter_btn"))},o=function(b,c){var e=$(".search_result");e.find(".result_header").find(".cur").removeClass("cur"),e.find(".result_header").find(".h_song").addClass("cur");var f="";j={},$.each(b.songs,function(a,b){b._type="album",b.tag="album",j[b.id]=b}),s(b.songs,c),f=a.template("J_temp_song_list",{list:b.songs}),$(".search_result").find("#song-box").html(f),$(".search_suggest").hide(),$(".search_list").hide(),$(".album_list").hide(),$(".station_list").hide(),$(".song_list").show(),$(".no_song").hide(),e.show(),$("#song-box").off("click"),$("#song-box").on("click",".item .item-a",function(){d.pushSong(this)}),$("#song-box").on("click",".item-play",function(){d.audition(j,this)})},p=function(b,c){var d=$(".search_result");d.find(".result_header").find(".cur").removeClass("cur"),d.find(".result_header").find(".h_album").addClass("cur");var e="";s(b.albums,c),e=a.template("J_temp_album_list",{list:b.albums}),$(".search_result").find("#album_list").html(e),$(".search_suggest").hide(),$(".search_list").hide(),$(".album_list").show(),$("#album_list").show(),$(".station_list").hide(),$(".song_list").hide(),$(".no_song").hide(),d.show()},q=function(b,c){var d=$(".search_result");d.find(".result_header").find(".cur").removeClass("cur"),d.find(".result_header").find(".h_station").addClass("cur");var e="";s(b.stations,c),e=a.template("J_temp_station_list",{list:b.stations}),$(".search_result").find("#station_list").html(e),$(".search_suggest").hide(),$(".search_list").hide(),$(".album_list").hide(),$(".station_list").show(),$("#station_list").show(),$(".song_list").hide(),$(".no_song").hide(),d.show()},r=function(){$(".search_result").show(),$(".no_song").show(),$(".search_suggest").hide(),$(".search_list").hide(),$(".search_result").find("#station_list").html(""),$(".search_result").find("#album_list").html(""),$(".search_result").find("#song-box").html(""),c.getRequest({url:BEME.APIURL+"/listen/customRandom",successfn:function(b){if(e.loaded(),0===b.code){var c=a.template("J_temp_song_list",{list:b.data});$("#random_song").html(c),j={},$.each(b.data,function(a,b){b._type="album",b.tag="album",j[b.id]=b}),$("#random_song").off("click"),$("#random_song").on("click",".item .item-a",function(){d.pushSong(this)}),$("#random_song").on("click",".item-play",function(){d.audition(j,this)})}}})},s=function(a,b){""==b||a.length<=0||$.each(a,function(a,c){var d=(c.name,/(.)(?=.*\1)/g),e=c.name;b=b.replace(d,"");for(var f=0;f<b.length;f++)f>=1&&b[f]==b[f-1]||" "!=b[f]&&(e=e.replace(new RegExp(b[f],"g"),"$"+b[f]+"#"),e=e.replace(new RegExp(b[f].toUpperCase(),"g"),"$"+b[f].toUpperCase()+"#"));console.log(e),e=e.replace(new RegExp("\\$","g"),"<span>"),e=e.replace(new RegExp("\\#","g"),"</span>"),console.log(e),c.name=e})},t=function(a){c.getRequest({url:BEME.APIURL+"/search/searchByWord?type=song&name="+a,successfn:function(a){e.loaded();var b=$("#search_input").val().replace(/(^\s*)|(\s*$)/g,"");0===a.code?(o(a.data,b),$("#song-box").show(),w(b,a.data.songs.length,"song")):($("#song-box").hide(),$("#album_list").hide(),$("#station_list").hide(),$(".song_list").show(),r(),w(b,0,"song"))}})},u=function(a){c.getRequest({url:BEME.APIURL+"/search/searchByWord?type=album&name="+a,successfn:function(a){e.loaded();var b=$("#search_input").val().replace(/(^\s*)|(\s*$)/g,"");0===a.code?(p(a.data,b),$("#album-box").show(),w(b,a.data.albums.length,"album")):($("#album_list").html(""),$("#album_list").hide(),r(),w(b,0,"album"))}})},v=function(a){c.getRequest({url:BEME.APIURL+"/search/searchByWord?type=station&name="+a,successfn:function(a){e.loaded();var b=$("#search_input").val().replace(/(^\s*)|(\s*$)/g,"");0===a.code?(q(a.data,b),$("#station-box").show(),w(b,a.data.stations.length,"station")):($("#station_list").html(""),$("#station_list").hide(),r(),w(b,0,"station"))}})},w=function(a,b,d){c.getRequest({url:BEME.APIURL+"/search/addUserInfo",data:{name:a,num:b,type:d},successfn:function(a){e.loaded()}})},x=function(a){c.getRequest({url:BEME.APIURL+"/search/delUserInfo",data:{id:a},successfn:function(a){e.loaded(),0===a.code}})},y=function(b){c.getRequest({url:BEME.APIURL+"/search/searchRecommend",data:{name:b},successfn:function(b){var c="";0===b.code&&(c=a.template("J_temp_search_list",{list:b.data})),$(".search_ul").html(c)}})},z=function(){$(".search_list").hide(),$(".search_suggest").show(),$(".search_header .delete-btn").hide(),$(".search_result").hide(),$(".no_song").hide(),$(".header_btn").removeClass("enter_btn"),n()},A=function(){var a=$(".search_result");a.find(".result_header").find(".cur").removeClass("cur"),a.find(".result_header").find(".h_song").addClass("cur"),a.find(".header_song").find(".current").removeClass("current"),a.find(".header_song").find(".h_all_1").addClass("current"),$(".search_header .delete-btn").show()},B=function(){$("#search_input").on("input propertychange",function(){var a=$("#search_input").val().replace(/(^\s*)|(\s*$)/g,"");a!=i&&""!=a&&(i=a,y(a)),""==a?z():($(".search_list").show(),$(".search_suggest").hide(),$(".search_header .delete-btn").show(),$(".search_result").hide(),$(".header_btn").addClass("enter_btn"))}),$("#search_input").on("keypress",function(a){"13"==a.keyCode&&$(".header_btn").click()}),$(".header_btn").on("click",function(){var a=$(this);a.hasClass("enter_btn")&&($(".result_header .h_song").click(),$(".header_song .h_all_1").click())}),$(".history_ul").on("click",".search_name",function(){var a=$(this).text();t(a),$("#search_input").val(a),A()}),$(".history_ul").on("click",".delete",function(){var a=$(this).attr("_id"),b={};b.content="确定删除所选历史？",e.showAlert(b,function(){x(a),n()})}),$(".clear_list").on("click","a",function(){var a={};a.content="确定删除所有历史？",e.showAlert(a,function(){x(0),n()})}),$(".result_header").on("click","li",function(){var a=$(this);a.parent().find(".cur").removeClass("cur"),a.addClass("cur");var b=a.attr("_type"),c=$("#search_input").val().replace(/(^\s*)|(\s*$)/g,"");return"song"==b?($(".song_list").show(),$(".album_list").hide(),$(".station_list").hide(),void t(c)):"album"==b?($(".song_list").hide(),$(".album_list").show(),$(".station_list").hide(),void(k?u(c):window.location.href="?m=search&type=album&name="+c)):"station"==b?($(".song_list").hide(),$(".album_list").hide(),$(".station_list").show(),void(l?v(c):window.location.href="?m=search&type=station&name="+c)):void 0}),$("#header_song").on("click","li",function(){var a=$(this);a.parent().find(".current").removeClass("current"),a.addClass("current");var b=a.attr("_id"),c=$("#search_input").val().replace(/(^\s*)|(\s*$)/g,"");""!=b&&(c+="@tags_name"+b),t(c)}),$(".search_ul").on("click","li",function(){var a=$(this);$("#search_input").val(a.text()),$(".header_btn").click(),A()}),$(".hot_ul").on("click","a",function(){var a=$(this);t(a.text()),$("#search_input").val(a.text()),A()}),$(".delete-btn").on("click",function(){$("#search_input").val(""),i="",z()})};h.init=function(){var c=b.getParams();a.headerMenu(),e.showHeader(),e.setTitle("搜索"),B(),n(c.type,c.name)},h.uninit=function(){}}),define("page/topicinfo",["comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","helper/app","helper/playerbar","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l=function(b){$("#J_top-box img").attr("src",a.imageUrlStationHead(b.topic.banner,1)),$("#J_album-title").text(b.topic.name),$("#J_album-desc").text(b.topic.description),$("#J_songnum").text(b.songs.length),$.each(b.songs,function(a,c){c.tagval=b.topic.id});var c=f.getUA(1);c>0&&$(".caction-box .share").show();var d=a.template("J_temp-item",{list:b.songs});$("#J_song-box").html(d),$.each(b.songs,function(a,b){b._type="topic",b.tag="topic",k[b.id]=b})},m=function(a){c.getRequest({url:BEME.APIURL+"/albums/topicList?id="+a,successfn:function(a){f.loaded(),0===a.code&&l(a.data)}})},n=function(a){$("#J_song-box").on("click",".item .item-a",function(){e.pushSong(this)}),$("#J_song-box").on("click",".item-play",function(){e.audition(k,this)}),$(".caction-box").on("click",".play-btn",function(){e.pushAllSong(this)}),$("#play_edit").on("click",function(){e.playEdit("caction-box")}),$("#J_song-box").on("click",".checkbox",function(){}),e.initSelectAllEvent("caction-box"),$(".caction-box").on("click",".share",function(){e.shareToWeixin(a,"topic",a)})};j.init=function(){f.setTitle("专题"),$(".back-btn").show(),a.headerMenu(),$("#myplay").show();var c=b.getParams();f.showHeader(),m(c.id),n(c.id)},j.uninit=function(){$("#J_album-desc, #J_song-box").off("click")}}),define("page/weixin",["jweixin","comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","helper/app","helper/playerbar","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={},m={title:"这里是标题",desc:"这里是描述语言",link:location.href,imgUrl:"专辑图片放进来"},n=function(a){var c="",d=$("#J_album-box");d.find(".title").text(a.album.name),m.title=a.album.name,m.desc=a.album.description,m.imgUrl=a.album.url,d.find(".img-cover").attr("src",b.imageUrl(a.album.url)),d.find(".desc").text(a.album.description),a.tags&&($.each(a.tags,function(a,d){var e=b.getRandColor();c+='<li style="color:'+e+";border-color:"+e+'">'+d.name+"</li>"}),d.find(".tags").html(c)),d.show(),$("#J_topic-box").hide(),c=b.template("J_temp-item",{list:a.songs}),$("#J_song-box").html(c),$.each(a.songs,function(a,b){l[b.id]=b})},o=function(a){var c="",d=$("#J_topic-box");d.find(".img-cover").attr("src",b.imageUrlStationHead(a.topic.cover)),d.find(".title").text(a.topic.name),m.title=a.topic.name,m.desc=a.topic.description,m.imgUrl=a.topic.cover,$("#J_album-box").hide(),$("#J_topic-box").show(),c=b.template("J_temp-item",{list:a.songs}),$("#J_song-box").html(c),$.each(a.songs,function(a,b){l[b.id]=b})},p=function(a){var c="",d=$("#J_topic-box");d.find(".img-cover").attr("src",b.imageUrlStationHead(a.station.url)),d.find(".title").text(a.station.name),$("#J_album-box").hide(),$("#J_topic-box").show(),m.title=a.station.name,m.desc=a.station.description,m.imgUrl=a.station.url;var e=a.radios.slice(0,8);c=b.template("J_temp-item",{list:e}),$("#J_song-box").html(c),$.each(e,function(a,b){l[b.id]=b})},q=function(a,c){$(".weixin-page").hide();var d=$(".song-page");"album"==c?d.find(".image").attr("src",a.image):(d.find(".image").hide(),d.find(".header-image").css("background-image","url("+a.image+")"),d.find(".header-image").show()),d.find(".name").text(a.name),m.title=a.name,m.desc=a.description,m.imgUrl=b.imageUrl(b.imageUrlStationHead(a.image));var e=d.find(" .play");h.initWeixinSongPlay(e,a),d.show()},r=function(a,b,c){switch(a){case"album":n(b);break;case"topic":o(b);break;case"station":p(b);break;case"song":q(b,c)}k.getWeixinConfig(m)};k.getWeixinConfig=function(a){var b=window.location.href;d.getRequest({url:BEME.APIURL+"/weixin/getWeixinConfig",data:{url:b},successfn:function(b){s(b,a)}})};var s=function(b,c){a.config({debug:!1,appId:b.data.appid,timestamp:b.data.time,nonceStr:b.data.nonce,signature:b.data.sign,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),a.ready(function(){a.onMenuShareTimeline(c),a.onMenuShareAppMessage(c),a.onMenuShareQQ(c),a.onMenuShareWeibo(c),a.onMenuShareQZone(c)}),a.error(function(a){})},t=function(a,b,c,e){if(b){var f="";switch(b){case"album":f=BEME.APIURL+"/albums/albumList";break;case"topic":f=BEME.APIURL+"/albums/topicList";break;case"station":f=BEME.APIURL+"/station/radiolist";break;case"song":f=BEME.APIURL+"/weixin/getWeixinSongPage";break;case"radio":f=BEME.APIURL+"/weixin/getWeixinSongPage"}""!=f&&d.getRequest({url:f,data:{id:a,type:b,album_type:c,album_id:e},successfn:function(a){g.loaded(),0===a.code&&r(b,a.data,c)}})}},u=function(a){$("#J_album-desc").on("click",function(){var a=$(this);a.attr("block")?(a.css("display","-webkit-box"),a.attr("block",null)):(a.css("display","block"),a.attr("block",1))}),$("#J_song-box").on("click",".item",function(){var a=$(this),b=a.attr("sid");h.initWeixinPlayer(a,l[+b])}),$(".song-page ").on("click",".play-cover",function(){var a=$(this);a.hasClass("pause")?($("#J_jplayer-weixin-song .btn-song").click(),a.removeClass("pause"),a.attr("src","./static/images/zanting.png")):($("#J_jplayer-weixin-song .btn-song").click(),a.addClass("pause"),a.attr("src","./static/images/bofang.png"))})};k.init=function(){g.setTitle("专辑");var a=c.getParams();g.showHeader(),t(a.id,a.type,a.album_type,a.album_id),u(a.id)},k.uninit=function(){$("#J_album-desc,.select-all, #J_song-box, #J_album-box .favorites").off("click")}});