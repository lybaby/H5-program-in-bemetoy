/*! 09-05-2016 */
define("page/myindex",["comm/utils","comm/url","comm/request","comm/clickevent","helper/app","helper/temphtml","require","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(b){if($("#history_num").html(b.history_count),0==b.history_count&&!b.play_list&&!b.collection_list&&!b.station_list)return $("#not-have-play").show(),$("#have-play").hide(),$("#addplay").hide(),void e.noScroll();var c=a.template("J_temp-mpitem",{list:b.play_list});if(b.play_list)$("#J_play_list").html(c);else{var c='<div class="no-content">无创建的歌单</div>';$("#J_play_list").html(c),$("#J_play_list").parent().find(".right").hide()}if(c=a.template("J_temp-mcitem",{list:b.collection_list}),b.collection_list)$("#J_collection_list").html(c);else{var c='<div class="no-content">暂无收藏的专辑</div>';$("#J_collection_list").html(c),$("#J_collection_list").parent().find(".right").hide()}if(c=a.template("J_temp-msitem",{list:b.station_list}),b.station_list)$("#J_description_list").html(c);else{var c='<div class="no-content">您尚未订阅电台</div>';$("#J_description_list").html(c),$("#J_description_list").parent().find(".right").hide()}e.backScroll()},j=function(){c.getRequest({url:BEME.APIURL+"/listen/customListenList",type:"post",data:{uid:a.getUid()},successfn:function(a){e.loaded(),0===a.code?i(a.data):($("#not-have-play").show(),$("#have-play").hide(),$("#addplay").hide(),e.noScroll())}})},k=function(){$("#addplay").on("click",function(){$("#J_newplay-box").show(),e.showMask()}),$("#create_play").on("click",function(){$("#J_newplay-box").show(),e.showMask(),$("#J_newplay-box ").find(".text").focus()}),d.newPlayEvent()};h.init=function(){e.setTitle("我的听听"),$(".back-btn").show(),e.showHeader(),a.headerMenu(),$("#addplay").show(),j(),k()},h.uninit=function(){$("#addplay, #J_newplay-box").off("click")}});