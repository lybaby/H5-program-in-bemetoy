/*! 09-05-2016 */
define("comm/utils",["comm/url","require","exports"],function(a,b,c){"use strict";var d=function(){},e=window.localStorage;Object.keys=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},c.getQueryString=function(a,b){var c=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),d=window.location.search.substr(1).match(c);return null!==d?d[2]:b};var f={};c.getUrlSearchInfo=function(){if(f.searchData)return f.searchData;var a,b,c=window.location,d=c.search.replace(/^[\?]+/,""),e=location.hash.replace(/^[#!]+/,"");return d=d+"&"+e,d=d.split("&"),f.searchData={},$.each(d,function(c,d){return d?(c=d.indexOf("="),c>-1?(a=d.substr(0,c),b=d.substr(c+1)):(a=d,b=""),void(f.searchData[a]=b)):!0}),f.searchData};var g={set:function(a,b){try{return e.setItem(a,b)}catch(c){try{return e.removeItem(a),e.setItem(a,b)}catch(d){e.clear(),console.log("cache["+a+"] set error!")}}return!1},get:function(a){try{return e.getItem(a)}catch(b){return!1}},del:function(a){try{return e.removeItem(a)}catch(b){return!1}},clear:function(){e.clear()}};c.cache=g,e||(c.cache={set:d,get:d,del:d,clear:d}),c.template=function(a,b,c){var d=$("#"+a),e=d.html();return BEME.template(e,b,c)},c.getHashUrl=function(b,c){c=c||"#!";var d="";return d=a.buildQuery(b),c+d},c.replaceHashUrl=function(b,c){c=c||"#!";var d="",e=a.getParams();return $.extend(b,e),d=a.buildQuery(b),c+d},c.getDateInfo=function(a,b){var c=new Date(1e3*a),d={y:c.getFullYear(),m:c.getMonth()+1,d:c.getDate(),H:c.getHours(),M:c.getMinutes(),S:c.getSeconds()};return $.each(d,function(a,b){d[a]=10>b?"0"+b:b}),b?d[b]:d},c.formatDate=function(a){var b=c.getDateInfo(a),d=b.m+"-"+b.d;return b.y!=(new Date).getFullYear()&&(d=b.y+"-"+d),d},c.appCookie=function i(a,b,c){var d=document,e=window.location.hostname;if("undefined"==typeof b){if(0<d.cookie.length){var f=d.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null===f?"":f[2]}return""}if(i(a)==b)return!1;c=$.extend({expires:1,path:"/",domain:e},c||{}),null===b&&(b="",c.expires=-1);var g="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var h;"number"==typeof c.expires?(h=new Date,h.setTime(h.getTime()+1*c.expires*60*60*1e3)):h=c.expires,g=h.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:e;c.secure?"; secure":"";return d.cookie=a+"="+b+"; path="+j+"; domain="+k+"; expires="+g,i(a)},c.formatTime=function(a){for(var b=[],c=0,d=0,e=1;e>-1;e--)c=Math.pow(60,e),d=Math.floor(a/c),d=10>d?"0"+d:d,b.push(d),a%=c;return b.join(":")},c.imageUrl=function(a){if(a){var b=a.split(".");return b[b.length-2]=b[b.length-2]+"_335px_70qu",b.join(".")}},c.imageUrlHead=function(a){if(a){var b=a.split(".");return b[b.length-2]=b[b.length-2]+"_335px_90qu",b.join(".")}},c.imageWeixin=function(a){if(a){var b=a.split(".");return b[b.length-2]=b[b.length-2]+"_70px_70qu",b.join(".")}},c.imageUrlStationHead=function(a,b){if(a){var c=a.split(".");return 1==b&&(c[c.length-2]=c[c.length-2]+"_640px_90qu"),0==b&&(c[c.length-2]=c[c.length-2]+"_320px_90qu"),c.join(".")}},c.formatPushTime=function(a){a=a.replace(/(,$)/,"");var b=a.split(",");if(7===b.length)return"天";var c=[],d=["日","一","二","三","四","五","六"];return b.sort(),0===+b[0]&&(b.splice(0,1),b.push(0)),$.each(b,function(a,b){c.push("周"+d[+b])}),c.join("、")};var h=["#eb67d5","#33b833","#ed5239","#288be1","#ff8800"];return c.getRandColor=function(){var a=[];return function(){a.length<1&&(a=h.slice(0));var b=a[Math.floor(a.length*Math.random())],c=a.indexOf(b);return a.splice(c,1),b}}(),c.headerMenu=function(){$("#myplay").hide(),$("#editplay").hide(),$("#addplay").hide(),$("#save_station").hide(),$("#delete_play").hide()},c.hideHeader=function(){$(".main-header").hide(),$("#J_wrapper").css("margin-top","-1.1rem"),$("#J_body-tips").css("margin-top","-1.05rem")},c.loadImages=function(a,b,c){for(var d=0,e=a.length,f=null,g=!1,h={},i=function(){this.onload=null,this.onerror=null;var a=this.getAttribute("_src");return h[a]=this,++d==e&&b&&!g?(g=!0,b(!0,d,h)):void b(!1,d,h)},j=0;e>j;j++)f=new Image,f.onload=i,f.onerror=i,f.setAttribute("_src",a[j]),f.src=a[j];c&&setTimeout(function(){g||(g=!0,b(h))},c)},c.getCookie=function(a){for(var b=document.cookie.split("; "),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return unescape(d[1])}},c.getUid=function(){var a=0,b=c.getCookie("session_id");if(!b)try{a=window.bemetoy.getFromUerid()}catch(d){}return a},$.Deferred=function(){var a={},b={done:function(b){a.success=b}};return{resolve:function(){a.success&&a.success.apply(this,arguments)},promise:function(){return b},resolveWith:function(){},rejectWith:function(){}}},$.fn.addAnim=function(a,b,c){b=b||300,c=c||"webkitAnimationEnd webkitTransitionEnd";var d=$.Deferred(),e=$(this),f=function(a){e.css({"-webkit-transition":"",transition:""}).css("zoom"),e.off(c,f),d.resolve(e)};return setTimeout(function(){var d="all "+b+"ms ease-in";e.one(c,f).css({"-webkit-transition":d,transition:d}).addClass(a)},0),d.promise()},BEME.func=BEME.func||{},BEME.func.appCookie=c.appCookie,BEME.func.getHashUrl=c.getHashUrl,BEME.func.replaceHashUrl=c.replaceHashUrl,BEME.func.getDateInfo=c.getDateInfo,BEME.func.formatDate=c.formatDate,BEME.func.formatTime=c.formatTime,BEME.func.formatPushTime=c.formatPushTime,BEME.func.imageUrl=c.imageUrl,BEME.func.imageUrlHead=c.imageUrlHead,BEME.func.imageUrlStationHead=c.imageUrlStationHead,c});