/*! 09-05-2016 */
define("page/albumweixin",["jweixin","comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","helper/app","helper/playerbar","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={},m={title:"这里是标题",desc:"这里是描述语言",link:location.href,imgUrl:"专辑图片放进来"},n=function(a){var c=$("#J_album-box");c.find(".img-cover").attr("imgsrc",b.imageUrl(a.url)),m.desc=a.description,m.imgUrl=b.imageUrl(a.url),c.find(".desc").text(a.description),q(a.type,a.album_id)},o=function(c,d){var e=$("#J_album-box");if(1==c&&(e.find(".title").text(d.album.name),m.title=d.album.name),2==c&&(e.find(".title").text(d.topic.name),m.title=d.topic.name),3==c&&(e.find(".title").text(d.station.name),m.title=d.station.name),d.tags){var f="";$.each(d.tags,function(a,c){var d=b.getRandColor();f+='<li style="color:'+d+";border-color:"+d+'">'+c.name+"</li>"}),e.find(".tags").html(f)}3==c?(f=b.template("J_temp-item",{list:d.radios}),$("#J_song-box").html(f)):(f=b.template("J_temp-item",{list:d.songs}),$("#J_song-box").html(f),$.each(d.songs,function(a,b){l[b.id]=b})),g.showImage(),a.onMenuShareTimeline(m),a.onMenuShareAppMessage(m),a.onMenuShareQQ(m),a.onMenuShareWeibo(m),a.onMenuShareQZone(m)},p=function(a){d.getRequest({url:BEME.APIURL+"/weixin/getWeixin?id="+a,successfn:function(a){g.loaded(),0===a.code&&n(a.data)}})},q=function(a,b){"album"==a&&d.getRequest({url:BEME.APIURL+"/albums/albumList?id="+b,successfn:function(a){g.loaded(),0===a.code&&o(1,a.data)}}),"topic"==a&&d.getRequest({url:BEME.APIURL+"/albums/topicList?id="+b,successfn:function(a){g.loaded(),0===a.code&&o(2,a.data)}}),"station"==a&&d.getRequest({url:BEME.APIURL+"/station/radiolist?id="+b,successfn:function(a){g.loaded(),0===a.code&&o(3,a.data)}})},r=function(a){$("#J_album-desc").on("click",function(){var a=$(this);a.attr("block")?(a.css("display","-webkit-box"),a.attr("block",null)):(a.css("display","block"),a.attr("block",1))}),$("#J_song-box").on("click",".item",function(){var a=$(this),b=a.attr("sid");h.initWeixinPlayer(a,l[+b])})};k.init=function(){g.setTitle("专辑");var a=c.getParams();g.showHeader(),p(a.id),r(a.id)},k.uninit=function(){$("#J_album-desc,.select-all, #J_song-box, #J_album-box .favorites").off("click")}});