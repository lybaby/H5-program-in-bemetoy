/*! 09-05-2016 */
define("minpage/topicinfo",["comm/utils","comm/url","comm/request","comm/pushsong","comm/clickevent","helper/app","helper/playerbar","page/myalbum","require","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={},l=function(b){$("#J_top-box img").attr("src",a.imageUrlStationHead(b.topic.banner,1)),$("#J_album-title").text(b.topic.name),$("#J_album-desc").text(b.topic.description),$("#J_songnum").text(b.songs.length),$.each(b.songs,function(a,c){c.tagval=b.topic.id});var c=f.getUA(1);c>0&&$(".caction-box .share").show();var d=a.template("J_temp-item",{list:b.songs});$("#J_song-box").html(d),$.each(b.songs,function(a,b){b._type="topic",b.tag="topic",k[b.id]=b})},m=function(a){c.getRequest({url:BEME.APIURL+"/albums/topicList?id="+a,successfn:function(a){f.loaded(),0===a.code&&l(a.data)}})},n=function(a){$("#J_song-box").on("click",".item .item-a",function(){e.pushSong(this)}),$("#J_song-box").on("click",".item-play",function(){e.audition(k,this)}),$(".caction-box").on("click",".play-btn",function(){e.pushAllSong(this)}),$("#play_edit").on("click",function(){e.playEdit("caction-box")}),$("#J_song-box").on("click",".checkbox",function(){}),e.initSelectAllEvent("caction-box"),$(".caction-box").on("click",".share",function(){e.shareToWeixin(a,"topic",a)})};j.init=function(){f.setTitle("专题"),$(".back-btn").show(),a.headerMenu(),$("#myplay").show();var c=b.getParams();f.showHeader(),m(c.id),n(c.id)},j.uninit=function(){$("#J_album-desc, #J_song-box").off("click")}});