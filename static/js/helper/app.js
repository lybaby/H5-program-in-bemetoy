/*! 10-05-2016 */
define("helper/app",["comm/url","comm/utils","comm/request","require","exports"],function(a,b,c,d,e){"use strict";var f={},g=function(){var a=$("#J_alert-box"),b=g.setting;if(!g.isInit){g.isInit=!0;var c={close:function(){$("#J_body-mask, #J_alert-box").hide()}};a.find(".btn-cancel").on("click",function(a){b=g.setting,b.cancel?b.cancel.call(c,a):c.close()}),a.find(".btn-ok").on("click",function(a){b=g.setting,b.ok?(b.ok.call(c,a),c.close()):c.close()})}b.hideCancel?(a.find(".btn-cancel").hide(),a.find("a").css("width","100%")):(a.find(".btn-cancel").show(),a.find("a").css("width","50%")),a.find(".title").html(b.title),a.find(".content").html(b.content),a.find(".btn-ok").html(b.okWording),a.find(".btn-cancel").html(b.cancelWording),$("#J_body-mask, #J_alert-box").show()};e.showAlert=function(a,b){var c={title:"提示",content:"描述",hideCancel:!1,ok:b,cancel:!1,okWording:"确定",cancelWording:"取消"};"string"==typeof a&&(a={hideCancel:!0,content:a,okWording:"确定",ok:!1}),g.setting=$.extend(c,a),g()},e.showTips=function(a,b){b=b||2e3;var c=$("#J_body-tips");c.text(a).removeClass("tips-in tips-out").css("zoom"),c.addClass("tips-in"),setTimeout(function(){c.removeClass("tips-in tips-out").css("zoom"),c.addClass("tips-out")},b)},e.showOneTips=function(a,b){b=b||2e3;var c=$("#J_body-tips");c.text(a).removeClass("tipsone-in tipsone-out").css("zoom"),c.addClass("tipsone-in"),setTimeout(function(){c.removeClass("tipsone-in tipsone-out").css("zoom"),c.addClass("tipsone-out")},b)};var h={};e.onHashchange=function(a,b){h[a]=b},e.offHashchange=function(a){delete h[a]},e.initEvent=function(){$(window).on("hashchange",function(a){var b=this;$.each(h,function(c,d){d.call(b,a)})})};var i=function(){var a=$("#J_wrapper-prepare").children();a.length>0&&$("#J_wrapper").empty().append(a)};e.loaded=function(){f._pageStatus="loaded",$(document.body).removeClass("loading"),i()},e.loading=function(){f._pageStatus="loading",f._loadingTimer&&clearTimeout(f._loadingTimer),f._loadingTimer=setTimeout(function(){"loading"==f._pageStatus&&($(document.body).addClass("loading"),i())},300)},e.loadingFail=function(){$(document.body).removeClass("loading"),$(document.body).addClass("loading-f")},e.noScroll=function(){$(document.body).addClass("overflow")},e.showMask=function(){$("#J_body-mask").show(),$(document.body).addClass("overflow")},e.hideMask=function(){$("#J_body-mask").hide(),$(document.body).removeClass("overflow")},e.setTitle=function(a){document.title=a,$("#J_header-title span").text(a)},e.showImage=function(){$("img[imgsrc]").each(function(a,b){var c=$(this).attr("imgsrc"),d=this,b=document.createElement("img");b.onload=function(){$(d).attr("src",b.src)},b.src=c})},e.hideAllBox=function(){$("#J_body-mask").hide();try{$("#J_random-box").hide(),$("#J_alert-box").hide(),$("#J_album-alert").hide(),$("#J_newplay-box").hide()}catch(a){}},e.getUA=function(a){var b=navigator.userAgent,c=b.toLowerCase().match(/(bemetoy)\/([\d.]+)/);if(null!=c){var d=c[2].split(".");return d[a]}return 0},e.backScroll=function(){var a=location.href,b=window.BEME.urlList.length;if(b>0)if(a==window.BEME.urlList[b-2])setTimeout(function(){window.scrollTo(0,window.BEME.scrollList[window.BEME.scrollList.length-1]),window.BEME.urlList.pop(),window.BEME.scrollList.pop()},50);else{if(a==window.BEME.urlList[b-1])return;window.scrollTo(0,0),window.BEME.scrollList.push(window.BEME._currentScroll),window.BEME.urlList.push(a)}else window.BEME.scrollList.push(window.BEME._currentScroll),window.BEME.urlList.push(a)},e.changeDate=function(a){var b=new Date(a),c=b.getMonth()+1+"月"+b.getDate()+"日 ";return c},e.showHeader=function(){var b=a.getParams(),c=!0,d=["myindex","myalbum","myindex","myplay","mystation"];$.each(d,function(a,d){return b.m===d?(c=!1,!1):void 0});try{window.bemetoy.showMyListenHeader(c)}catch(e){}},e.showShare=function(){var a=e.getUA(0),b=e.getUA(1);a>1&&b>0&&$(".share_weixin").show()},e.shareWeixinUrl=function(a){$.ajax({url:BEME.APIURL+"/weixin/getWeixinContent",dataType:"json",type:"get",xhrFields:{withCredentials:!0},cache:!1,data:a,success:function(a){if(0==a.code)try{window.bemetoy.socialShareWithContent(a.data)}catch(b){alert(b)}}})}});